(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["contact-batch-add"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f");var n=a("6b75");function s(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(t,e):void 0}}},"06cd":function(t,e,a){t.exports=a.p+"img/xls.c3a19535.png"},"0bab":function(t,e,a){},2263:function(t,e,a){"use strict";a("9c58")},2530:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-bg-module"},[a("a-table",{attrs:{columns:t.drawTable.columns,"data-source":t.drawTable.data},scopedSlots:t._u([{key:"allotEmployee",fn:function(e){return a("div",{},t._l(e,(function(e,n){return a("a-tag",{key:n},[t._v(t._s(e.name))])})),1)}},{key:"tags",fn:function(e){return a("div",{},t._l(e,(function(e,n){return a("a-tag",{key:n},[t._v(t._s(e.name))])})),1)}},{key:"operation",fn:function(e,n){return a("div",{},[a("a",{on:{click:t.remindBtn}},[t._v("提醒")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.delWriteRow(n)}}},[t._v("删除")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.$router.push({path:"/contactBatchAdd/importShow?recordId="+n.id})}}},[t._v("详情")])],1)}}])})],1)},s=[],i=a("89f6"),r={data:function(){return{drawTable:{columns:[{title:"标题",dataIndex:"title"},{title:"上传时间",dataIndex:"uploadAt"},{title:"分配员工",dataIndex:"allotEmployee",scopedSlots:{customRender:"allotEmployee"}},{title:"标签",dataIndex:"tags",scopedSlots:{customRender:"tags"}},{title:"导入数量",dataIndex:"importNum",width:100},{title:"成功添加数量",dataIndex:"addNum",width:120},{title:"文件名",dataIndex:"fileName",width:200},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],data:[]}}},created:function(){this.importDataClick()},methods:{remindBtn:function(t){},importDataClick:function(){var t=this;Object(i["h"])().then((function(e){t.drawTable.data=e.data.data}))},delWriteRow:function(t){var e=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(i["i"])({id:t.id}).then((function(t){e.importDataClick(),e.$message.success("删除成功")}))}})}}},o=r,l=(a("2abd"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"14d405c3",null);e["default"]=c.exports},"2abd":function(t,e,a){"use strict";a("850a")},"2ee5":function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"h",(function(){return d})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return m})),a.d(e,"l",(function(){return p})),a.d(e,"k",(function(){return f})),a.d(e,"j",(function(){return h}));var n=a("b775");function s(t){return Object(n["b"])({url:"/channelCodeGroup/index",method:"get",params:t})}function i(t){return Object(n["b"])({url:"/channelCodeGroup/update",method:"put",data:t})}function r(t){return Object(n["b"])({url:"/channelCodeGroup/store",method:"post",data:t})}function o(t){return Object(n["b"])({url:"/channelCodeGroup/move",method:"put",data:t})}function l(t){return Object(n["b"])({url:"/channelCode/store",method:"post",data:t})}function c(t){return Object(n["b"])({url:"/channelCode/update",method:"put",data:t})}function d(t){return Object(n["b"])({url:"/channelCode/index",method:"get",params:t})}function u(t){return Object(n["b"])({url:"/channelCode/contact",method:"get",params:t})}function m(t){return Object(n["b"])({url:"/channelCode/show",method:"get",params:t})}function p(t){return Object(n["b"])({url:"/channelCode/statisticsIndex",method:"get",params:t})}function f(t){return Object(n["b"])({url:"/channelCode/statistics",method:"get",params:t})}function h(t){return Object(n["b"])({url:"/workDepartment/index",method:"get",params:t})}},"35cf":function(t,e,a){},"3ee7":function(t,e,a){},"4a04":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[a("a-modal",{attrs:{"on-ok":"handleOk",width:636,footer:!1,centered:"",maskClosable:!1},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("template",{slot:"title"},[t._v(" 选择成员 ")]),a("div",{staticClass:"content"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"tips"},[t._v(" 没有想要添加的成员？ "),a("a",{attrs:{href:"#"}},[t._v("添加成员教程")])]),a("div",{staticClass:"search"},[a("a-input-search",{attrs:{placeholder:"请输入成员昵称"},on:{search:t.search}})],1),a("div",{staticClass:"member"},t._l(t.members,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])]),a("div",{staticClass:"radio"},[a("a-checkbox",{on:{change:function(a){return t.selectChange(e)}},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"v.select"}})],1)])})),0)]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"tips"},[t._v(" 已选成员：（"+t._s(t.selectedMembers.length)+"） ")]),a("div",{staticClass:"member"},t._l(t.selectedMembers,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])])])})),0)])]),a("div",{staticClass:"confirm"},[a("a-button",{on:{click:function(e){t.modalShow=!1}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:t.go}},[t._v("确定")])],1)],2)],1)},s=[],i=a("b85c"),r=(a("d3b7"),a("159b"),a("4de4"),a("a434"),a("2ee5")),o={data:function(){return{modalShow:!1,loading:!1,members:[],selectedMembers:[],currentData:{}}},methods:{setSelect:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.selectedMembers=[],t.forEach((function(t,a){e.selectedMembers[a]=t})),this.currentData=a,this.getData("",(function(t){e.selectedMembers.forEach((function(t){e.members.forEach((function(e){t.wxUserId===e.wxUserId&&(t.avatar||(t.avatar=e.avatar),e.select=!0)}))}))})),this.reset(),this.modalShow=!0},search:function(t){this.getData(t)},selectChange:function(t){var e=-1,a=this.selectedMembers.filter((function(a,n){if(a.id===t.id)return e=n,a}));if(a.length)return this.selectedMembers.splice(e,1),!1;this.selectedMembers.push(t)},reset:function(){var t,e=Object(i["a"])(this.members);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.select=!1}}catch(n){e.e(n)}finally{e.f()}},go:function(){this.hide(),this.$emit("change",this.selectedMembers)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r["j"])({searchKeyWords:e}).then((function(e){t.members=e.data.employee,a&&a()}))},show:function(){this.getData(),this.reset(),this.selectedMembers=[],this.modalShow=!0},hide:function(){this.modalShow=!1}}},l=o,c=(a("2263"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,"24741dee",null);e["a"]=d.exports},"51e7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"white-bg-module"},[n("a-tabs",{model:{value:t.tabPane,callback:function(e){t.tabPane=e},expression:"tabPane"}},[n("a-tab-pane",{key:1,attrs:{tab:"潜在客户"}},[n("div",{staticClass:"radios-btns"},[n("div",{staticClass:"radios"},[t._v(" 筛选： "),n("a-radio-group",{on:{change:t.selectRadio},model:{value:t.askClientTable.status,callback:function(e){t.$set(t.askClientTable,"status",e)},expression:"askClientTable.status"}},[n("a-radio",{attrs:{value:4}},[t._v(" 全部")]),n("a-radio",{attrs:{value:0}},[t._v(" 未分配")]),n("a-radio",{attrs:{value:1}},[t._v(" 待添加")]),n("a-radio",{attrs:{value:2}},[t._v(" 待通过")]),n("a-radio",{attrs:{value:3}},[t._v(" 已添加")])],1)],1),n("div",{staticClass:"btns"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){t.visible=!0}}},[t._v(" 导入客户")]),n("a-button",{attrs:{type:"primary",icon:"profile"},on:{click:function(e){return t.$router.push({path:"/contactBatchAdd/importIndex"})}}},[t._v(" 导入记录")]),n("a-button",{attrs:{type:"primary"},on:{click:t.distributionBtn}},[t._v("分配")]),n("a-button",{attrs:{type:"primary",icon:"setting"},on:{click:t.openSetup}},[t._v(" 设置")])],1)]),n("div",{staticClass:"search-table"},[n("div",{staticClass:"search"},[n("h5",[t._v("共"+t._s(t.clientTable.data.length)+"个客户")]),n("div",{staticClass:"an-form"},[n("a-input-search",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入要搜索电话 / 备注名",allowClear:!0},on:{search:t.searchClientData,change:t.cleanInput},model:{value:t.askClientTable.searchKey,callback:function(e){t.$set(t.askClientTable,"searchKey",e)},expression:"askClientTable.searchKey"}})],1)]),n("a-table",{staticClass:"table",attrs:{bordered:"",columns:t.clientTable.columns,"data-source":t.clientTable.data,"row-selection":{selectedRowKeys:t.clientTable.rowSelection,onChange:t.onSelectChange}},scopedSlots:t._u([{key:"tags",fn:function(e){return n("div",{},t._l(e,(function(e,a){return n("a-tag",{key:a},[t._v(t._s(e.name))])})),1)}},{key:"status",fn:function(e){return n("div",{},[0==e?n("a-tag",{attrs:{color:"gray"}},[t._v("未分配")]):t._e(),1==e?n("a-tag",{attrs:{color:"orange"}},[t._v("待添加")]):t._e(),2==e?n("a-tag",{attrs:{color:"cyan"}},[t._v("待通过")]):t._e(),3==e?n("a-tag",{attrs:{color:"green"}},[t._v("已添加")]):t._e()],1)}},{key:"allotEmployee",fn:function(e){return n("div",{},[n("a-tag",[t._v(t._s(e.name))])],1)}},{key:"operation",fn:function(e,a){return n("div",{},[n("a",{on:{click:function(e){return t.remindBtn(a)}}},[t._v("提醒")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(e){return t.deleteRow(a)}}},[t._v("删除")])],1)}}])})],1)]),n("a-tab-pane",{key:2,attrs:{tab:"数据统计","force-render":""}},[n("a-row",{attrs:{gutter:0,type:"flex",justify:"space-between"}},[n("a-col",{attrs:{span:24}},[n("div",{staticClass:"child_module"},[n("div",{staticClass:"child_title"},[t._v("总览")]),n("a-row",{staticClass:"total_module",attrs:{type:"flex",gutter:20,justify:"space-between"}},[n("a-col",{staticClass:"item item_hr",attrs:{span:4}},[n("span",[t._v(t._s(t.dataStatistic.contactNum))]),n("p",[t._v("导入总客户数")]),n("a",{on:{click:function(e){return t.customerDataDetails(4)}}},[t._v("详情")])]),n("a-col",{staticClass:"item",attrs:{span:4}},[n("span",[t._v(t._s(t.dataStatistic.pendingNum))]),n("p",[t._v("待分配客户数")]),n("a",{on:{click:function(e){return t.customerDataDetails(0)}}},[t._v("详情")])]),n("a-col",{staticClass:"item item_hr",attrs:{span:4}},[n("span",[t._v(t._s(t.dataStatistic.toAddNum))]),n("p",[t._v("待添加客户数")]),n("a",{on:{click:function(e){return t.customerDataDetails(1)}}},[t._v("详情")])]),n("a-col",{staticClass:"item item_hr",attrs:{span:4}},[n("span",[t._v(t._s(t.dataStatistic.toPendingNum))]),n("p",[t._v("待通过客户数")]),n("a",{on:{click:function(e){return t.customerDataDetails(2)}}},[t._v("详情")])]),n("a-col",{staticClass:"item item_hr",attrs:{span:4}},[n("span",[t._v(t._s(t.dataStatistic.passedNum))]),n("p",[t._v("已添加总客户数")]),n("a",{on:{click:function(e){return t.customerDataDetails(3)}}},[t._v("详情")])]),n("a-col",{staticClass:"item",attrs:{span:4}},[n("span",[t._v(t._s(t.dataStatistic.completion)+"%")]),n("p",[t._v("添加完成率")])])],1)],1)])],1),n("div",{staticClass:"screen_row"},[n("div",[t._v("自定义时间："),n("a-range-picker",{attrs:{valueFormat:"YYYY-MM-DD"},on:{change:t.changeTime},model:{value:t.screenTime,callback:function(e){t.screenTime=e},expression:"screenTime"}})],1),n("div",[t._v("选择成员： "),n("a-select",{staticStyle:{"min-width":"200px","max-width":"570px","margin-left":"-5px"},attrs:{mode:"multiple",placeholder:"请选择成员"},on:{change:t.changeMember},model:{value:t.screenMember,callback:function(e){t.screenMember=e},expression:"screenMember"}},t._l(t.employeeData,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),n("a-button",{staticStyle:{"margin-left":"25px"},on:{click:t.resetBtn}},[t._v("重置")])],1),n("div",{staticClass:"add-table"},[n("a-table",{attrs:{columns:t.tableData.columns,"data-source":t.tableData.data},scopedSlots:t._u([{key:"completion",fn:function(e){return n("div",{},[t._v(" "+t._s(e)+"% ")])}}])})],1)],1)],1),n("a-modal",{attrs:{title:"设置",footer:null,width:"600px",visible:t.settingVisible,dialogClass:"setting-module",maskClosable:!1},on:{cancel:function(e){t.settingVisible=!1}}},[n("a-tabs",{attrs:{type:"card","default-active-key":"1"}},[n("a-tab-pane",{key:"1",attrs:{tab:"自动提醒"}},[n("div",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("未分配提醒")]),n("div",[n("div",{staticClass:"num-date"},[t._v(" 超过 "),n("a-input-number",{staticStyle:{width:"67px"},attrs:{min:1},model:{value:t.askSetUpData.pendingTimeOut,callback:function(e){t.$set(t.askSetUpData,"pendingTimeOut",e)},expression:"askSetUpData.pendingTimeOut"}}),t._v(" 天，"),n("span",{staticClass:"b"},[t._v("客户未分配跟进成员")]),t._v("，次日 "),n("a-time-picker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss",valueFormat:"HH:mm:ss"},model:{value:t.askSetUpData.pendingReminderTime,callback:function(e){t.$set(t.askSetUpData,"pendingReminderTime",e)},expression:"askSetUpData.pendingReminderTime"}}),t._v(" 提醒管理员分配 ")],1),n("div",[t._v(" 选择接收提醒管理员: "),n("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"选择管理员"},model:{value:t.askSetUpData.pendingLeaderId,callback:function(e){t.$set(t.askSetUpData,"pendingLeaderId",e)},expression:"askSetUpData.pendingLeaderId"}},t._l(t.employeeData,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.employeeId}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)]),n("div",{staticClass:"hr"}),n("div",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("成员未添加客户提醒")]),n("div",{staticClass:"num-date"},[t._v(" 超过 "),n("a-input-number",{staticStyle:{width:"67px"},attrs:{min:1},model:{value:t.askSetUpData.undoneTimeOut,callback:function(e){t.$set(t.askSetUpData,"undoneTimeOut",e)},expression:"askSetUpData.undoneTimeOut"}}),t._v(" 天，"),n("span",{staticClass:"b"},[t._v("成员未添加客户")]),t._v("，次日 "),n("a-time-picker",{staticStyle:{width:"120px"},attrs:{format:"HH:mm:ss",valueFormat:"HH:mm:ss"},model:{value:t.askSetUpData.undoneReminderTime,callback:function(e){t.$set(t.askSetUpData,"undoneReminderTime",e)},expression:"askSetUpData.undoneReminderTime"}}),t._v(" 提醒成员分配 ")],1),n("div",{staticClass:"hr"}),n("div",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("自动回收")]),n("div",{staticClass:"num-date"},[t._v(" 超过 "),n("a-input-number",{staticStyle:{width:"67px"},attrs:{min:1},model:{value:t.askSetUpData.recycleTimeOut,callback:function(e){t.$set(t.askSetUpData,"recycleTimeOut",e)},expression:"askSetUpData.recycleTimeOut"}}),t._v(" 天，"),n("span",{staticClass:"b"},[t._v("客户未通过好友")]),t._v("， 自动转移到待分配 ")],1),n("div",{staticClass:"btns"},[n("a-button",{on:{click:t.cancelBtn}},[t._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:t.saveSetUp}},[t._v(" 保存")])],1)])],1)],1),n("a-modal",{attrs:{title:"上传表格",footer:null,visible:t.visible,dialogClass:"uploadExcel",maskClosable:!1},on:{cancel:function(e){t.visible=!1}}},[n("div",{staticClass:"text"},[t._v(" 请下载模板后输入手机号上传，可批量复制手机号至模板内，若输入内容有重复手机号或空行将会自动过滤 ")]),n("div",{staticClass:"download-template"},[t._v("点击下载"),n("a",{attrs:{href:t.downloadExcelUrl,target:"_blank"}},[t._v("Excel模板")])]),n("a-form-model",{ref:"ruleForm",staticClass:"upload-form",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[n("a-form-model-item",{attrs:{label:"选择表格"}},[n("div",{staticClass:"upload-box"},[n("div",{staticClass:"btn"},[n("a-button",[n("a-icon",{attrs:{type:"plus"}}),t._v(" 添加文件 ")],1)],1),n("input",{staticStyle:{cursor:"pointer"},attrs:{type:"file",accept:".xls,.xlsx"},on:{change:t.uploadChange}})]),t.uploadState?n("div",{staticStyle:{"margin-top":"15px"}},[n("div",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[t._v(t._s(t.xlsName))]),n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("06cd"),alt:""}})]):t._e()]),n("a-form-model-item",{attrs:{label:"选择员工",prop:"delivery"}},[n("a-button",{on:{click:t.selectEmployee}},[t._v(" 选择员工 ")]),n("div",{staticClass:"ml16"},t._l(t.leadClientData.allotEmployee,(function(e){return n("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"客户标签"}},[n("div",{staticClass:"choiceAdmin",on:{click:t.showModal}},[0==t.clientTagArr.length?n("span",{staticClass:"operationTips"},[t._v("请选择标签")]):t._e(),t._l(t.clientTagArr,(function(e,a){return n("a-tag",{key:a},[t._v(" "+t._s(e.name)+" "),n("a-icon",{attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),t.delTagsArr(a)}}})],1)}))],2)]),n("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[n("a-button",{attrs:{type:"primary"},on:{click:t.importContactClick}},[t._v("保存")]),n("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.visible=!1}}},[t._v(" 取消")])],1)],1)],1),n("a-modal",{attrs:{title:"分配",maskClosable:!1,footer:null,width:"350px"},model:{value:t.allocationPopup,callback:function(e){t.allocationPopup=e},expression:"allocationPopup"}},[n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("div",{staticStyle:{"line-height":"30px"}},[t._v("分配员工：")]),n("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择分配员工"},model:{value:t.assignEmployeesId,callback:function(e){t.assignEmployeesId=e},expression:"assignEmployeesId"}},t._l(t.employeeData,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.employeeId}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"15px"}},[n("a-button",{staticStyle:{"margin-right":"30px"},on:{click:t.cancelAssignment}},[t._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:t.sureAssigned}},[t._v("确定")])],1)]),n("addlableIndex",{ref:"childRef",on:{choiceTagsArr:t.acceptArray}}),n("selectMember",{ref:"selectMember",on:{change:function(e){return t.leadClientData.allotEmployee=e}}})],1)},s=[],i=(a("d3b7"),a("159b"),a("b0c0"),a("a434"),a("6010")),r=a("4a04"),o=a("ff04"),l=a("89f6"),c=a("8ded"),d=a.n(c),u={components:{selectMember:r["a"],MaUpload:o["a"],addlableIndex:i["a"]},computed:{headers:function(){var t=d.a.get("ACCESS_TOKEN");return{Accept:"application/json",Authorization:t}}},data:function(){return{uploadState:!1,tabPane:1,clientTagArr:[],visible:!1,settingVisible:!1,labelCol:{span:4},wrapperCol:{span:14},form:{excel:"",region:""},rules:{excel:[{required:!0,message:"请选择表格",trigger:"change"}]},askClientTable:{status:4,searchKey:"",recordId:""},clientTable:{columns:[{title:"电话号码",dataIndex:"phone"},{title:"客服备注名字",dataIndex:"remark"},{title:"导入时间",dataIndex:"uploadAt"},{title:"客户标签",dataIndex:"tags",scopedSlots:{customRender:"tags"}},{title:"添加状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"添加时间",dataIndex:"addAt"},{title:"分配员工",dataIndex:"allotEmployee",scopedSlots:{customRender:"allotEmployee"}},{title:"分配次数",dataIndex:"allotNum"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],data:[],rowSelection:[]},askSetUpData:{pendingStatus:1,pendingTimeOut:1,pendingReminderTime:"",pendingLeaderId:"",undoneStatus:1,undoneTimeOut:1,undoneReminderTime:1,recycleStatus:1,recycleTimeOut:""},employeeData:[],dataStatistic:{},xlsName:"",leadClientData:{title:"",tags:[],allotEmployee:[],file:{}},tableData:{columns:[{title:"成员",dataIndex:"name"},{title:"分配客户数",dataIndex:"allotNum"},{title:"待添加客户数",dataIndex:"toAddNum"},{title:"待通过客户数",dataIndex:"pendingNum"},{title:"已添加客户数",dataIndex:"passedNum"},{title:"回收客户数",dataIndex:"recycleNum"},{title:"添加完成率",dataIndex:"completion",scopedSlots:{customRender:"completion"}}],data:[]},allocationPopup:!1,assignEmployeesId:[],assignCustomerId:"",screenMember:[],screenTime:[],downloadExcelUrl:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL+"/static/Excel%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B%E6%A8%A1%E6%9D%BF.xlsx"}},created:function(){},mounted:function(){this.getClientTableData(),this.getStatisticsData(),this.getStaffData()},methods:{resetBtn:function(){this.screenTime=[],this.screenMember=[],this.getStatisticsData()},changeTime:function(){this.getStatisticsData()},changeMember:function(){this.getStatisticsData()},customerDataDetails:function(t){this.tabPane=1,this.askClientTable.status=t,this.getClientTableData()},remindBtn:function(t){var e=this;Object(l["j"])({employeeId:t.employeeId,recordId:t.recordId}).then((function(t){e.$message.success("提醒成功")}))},selectEmployee:function(){this.$refs.selectMember.setSelect(this.leadClientData.allotEmployee)},cancelAssignment:function(){this.allocationPopup=!1,this.assignEmployeesId=""},distributionBtn:function(){if(0==this.clientTable.rowSelection.length)return this.$message.warning("分配客户不能为空"),!1;this.allocationPopup=!0},onSelectChange:function(t){this.clientTable.rowSelection=t},sureAssigned:function(){var t=this;if(""==this.assignEmployeesId)return this.$message.warning("请选择要分配的员工"),!1;var e=[];this.clientTable.rowSelection.forEach((function(a){e[a]=t.clientTable.data[a].id})),Object(l["a"])({id:e,employeeId:this.assignEmployeesId}).then((function(e){t.$message.success("分配成功"),t.allocationPopup=!1,t.assignEmployeesId="",t.clientTable.rowSelection=[],t.getClientTableData()}))},deleteRow:function(t){var e=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(l["b"])({id:t.id}).then((function(t){e.getClientTableData(),e.$message.success("删除成功")}))}})},uploadChange:function(t){void 0!=t.target.files[0]&&(this.uploadState=!0,this.leadClientData.file=t.target.files[0],this.xlsName=t.target.files[0].name)},importContactClick:function(){var t=this;if(!this.uploadState)return this.$message.error("表格未上传"),!1;if(!this.leadClientData.allotEmployee.length)return this.$message.error("员工未选择"),!1;var e=[];this.leadClientData.allotEmployee.forEach((function(t,a){e[a]=t.employeeId}));var a=[];0!=this.clientTagArr.length&&this.clientTagArr.forEach((function(t,e){a[e]=t.id}));var n=new FormData;n.append("title","批量加好友"),n.append("tags",JSON.stringify(a)),n.append("allotEmployee",JSON.stringify(e)),n.append("file",this.leadClientData.file,this.leadClientData.file.name),Object(l["g"])(n).then((function(e){200===e.code&&(t.$message.success("导入成功"),t.visible=!1,t.getClientTableData(),t.uploadState=!1,t.clientTagArr=[],t.leadClientData={})}))},getStatisticsData:function(){var t=this;Object(l["d"])({employeeId:this.screenMember,startTime:this.screenTime[0],endTime:this.screenTime[1]}).then((function(e){t.dataStatistic=e.data.dataStatistic,t.tableData.data=e.data.employees.data}))},saveSetUp:function(){var t=this;return""==this.askSetUpData.pendingTimeOut?(this.$message.warning("待处理客户提醒天数不能为空"),!1):""==this.askSetUpData.pendingReminderTime?(this.$message.warning("待处理客户提醒时间不能为空"),!1):""==this.askSetUpData.pendingLeaderId?(this.$message.warning("接收提醒管理员不能为空"),!1):""==this.askSetUpData.undoneTimeOut?(this.$message.warning("成员未添加客户提醒天数不能为空"),!1):""==this.askSetUpData.undoneReminderTime?(this.$message.warning("成员未添加客户提醒时间不能为空"),!1):""==this.askSetUpData.recycleTimeOut?(this.$message.warning("回收客户提醒天数不能为空"),!1):void Object(l["k"])(this.askSetUpData).then((function(e){t.$message.success("设置成功"),t.settingVisible=!1,t.askSetUpData={pendingStatus:1,undoneStatus:1,recycleStatus:1}}))},cancelBtn:function(){this.settingVisible=!1},getStaffData:function(){var t=this;Object(l["e"])().then((function(e){t.employeeData=e.data.employee}))},openSetup:function(){var t=this;Object(l["f"])().then((function(e){"{}"!=JSON.stringify(e.data)&&(t.askSetUpData=e.data),t.settingVisible=!0}))},cleanInput:function(){""==this.askClientTable.searchKey&&this.getClientTableData()},searchClientData:function(){this.getClientTableData()},selectRadio:function(t){this.getClientTableData()},getClientTableData:function(){var t=this,e={status:"",searchKey:this.askClientTable.searchKey,recordId:this.askClientTable.recordId};4==this.askClientTable.status?e.status="":e.status=this.askClientTable.status,Object(l["c"])(e).then((function(e){t.clientTable.data=e.data.data}))},showModal:function(){this.$refs.childRef.show(this.clientTagArr)},delTagsArr:function(t){this.clientTagArr.splice(t,1)},acceptArray:function(t){t&&(this.clientTagArr=t)}}},m=u,p=(a("5c98"),a("2877")),f=Object(p["a"])(m,n,s,!1,null,"2e842dd6",null);e["default"]=f.exports},"5c98":function(t,e,a){"use strict";a("35cf")},6010:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tagsModal"},[a("a-modal",{staticClass:"modelCard",attrs:{title:"选择标签",maskClosable:!1},on:{ok:t.handleOk},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[t._l(t.lableArr,(function(e,n){return a("div",{key:n,staticClass:"labelRow"},[a("div",{staticClass:"labelTitle"},[t._v(t._s(e.groupName))]),a("div",{staticClass:"labelContent"},[a("div",{staticClass:"labeladdBtn",on:{click:function(a){t.showInput=e.id}}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加 ")],1),t.showInput==e.id?a("a-input",{staticClass:"lable_input",attrs:{placeholder:"输入后回车"},on:{blur:t.closeInput,pressEnter:function(a){return t.inputLable(e.id,n)}},model:{value:t.addlableCont,callback:function(e){t.addlableCont=e},expression:"addlableCont"}}):t._e(),t._l(e.tags,(function(e,n){return a("div",{key:n,ref:"hello",refInFor:!0,staticClass:"labelSub",class:[-1!=t.choiceTagsArr.indexOf(e)?"lableSelect":""],on:{click:function(a){return t.selectTags(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)])})),a("span",{staticClass:"add_tags",on:{click:t.addNametags}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 新建标签组 ")],1)],2),a("a-modal",{attrs:{title:"新建标签组"},on:{ok:t.handleNewTags},model:{value:t.addNewTags,callback:function(e){t.addNewTags=e},expression:"addNewTags"}},[a("div",{staticClass:"add_tigs"},[a("a-icon",{attrs:{type:"bell",theme:"filled"}}),t._v(" 管理员可根据不同部门选择展示不同的标签组，部门管理员可创建部门可见的标签 ")],1),a("a-form-model",{attrs:{model:t.tagsform,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"标签组名称"}},[a("a-input",{attrs:{placeholder:"请输入标签组名称"},model:{value:t.tagsform.name,callback:function(e){t.$set(t.tagsform,"name",e)},expression:"tagsform.name"}})],1)],1)],1)],1)},s=[],i=a("1da1"),r=(a("96cf"),a("a434"),a("d3b7"),a("159b"),a("b0c0"),a("7728")),o={data:function(){return{modalShow:!1,addNewTags:!1,showInput:0,addlableCont:"",lableArr:[],labelCol:{span:5},wrapperCol:{span:18},tagsform:{name:"",resource:1,selectSection:[]},tipsWarn:!0,choiceTagsArr:[]}},created:function(){this.getClientTags()},methods:{getClientTags:function(){var t=this;Object(r["d"])({page:1,perPage:10}).then((function(e){t.lableArr=e.data}))},selectTags:function(t){var e=this.choiceTagsArr.indexOf(t);-1==e?this.choiceTagsArr.push(t):this.choiceTagsArr.splice(e,1)},memberSelectChange:function(t){this.tagsform.selectSection=t},show:function(t){var e=this;this.choiceTagsArr=[],void 0!=t&&t.forEach((function(t,a){e.choiceTagsArr[a]=t})),this.modalShow=!0},delSelect:function(t){this.tagsform.selectSection.splice(t,1)},handleOk:function(t){this.modalShow=!1,this.$emit("choiceTagsArr",this.choiceTagsArr)},handleNewTags:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.tagsform.name){e.next=3;break}return t.$message.warning("标签组名称不能为空"),e.abrupt("return");case 3:Object(r["j"])({groupName:t.tagsform.name}).then((function(e){t.getClientTags(),t.tagsform.name="",t.$message.success("创建成功"),t.addNewTags=!1}));case 4:case"end":return e.stop()}}),e)})))()},closeInput:function(){this.showInput=!1},inputLable:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=[],s.push(a.addlableCont),i={groupId:t,tagName:s},n.next=5,Object(r["l"])(i).then((function(t){}));case 5:o={name:a.addlableCont},a.lableArr[e].tags.push(o),a.showInput=!1,a.addlableCont="";case 9:case"end":return n.stop()}}),n)})))()},addNametags:function(){this.addNewTags=!0}}},l=o,c=(a("981e"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,null,null);e["a"]=d.exports},"604a":function(t,e,a){},"6b75":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,"a",(function(){return n}))},7728:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"m",(function(){return i})),a.d(e,"f",(function(){return r})),a.d(e,"h",(function(){return o})),a.d(e,"g",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"i",(function(){return d})),a.d(e,"l",(function(){return u})),a.d(e,"d",(function(){return m})),a.d(e,"e",(function(){return p})),a.d(e,"j",(function(){return f})),a.d(e,"b",(function(){return h})),a.d(e,"k",(function(){return b}));var n=a("b775");function s(t){return Object(n["b"])({url:"/roomClockIn/store",method:"post",data:t})}function i(t){return Object(n["b"])({url:"/roomClockIn/update",method:"put",data:t})}function r(t){return Object(n["b"])({url:"/roomClockIn/destroy",method:"delete",data:t})}function o(t){return Object(n["b"])({url:"/roomClockIn/index",method:"get",params:t})}function l(t){return Object(n["b"])({url:"/roomClockIn/show",method:"get",params:t})}function c(t){return Object(n["b"])({url:"/roomClockIn/showContact",method:"get",params:t})}function d(t){return Object(n["b"])({url:"/roomClockIn/info",method:"get",params:t})}function u(t){return Object(n["b"])({url:"/workContactTag/store",method:"post",data:t})}function m(t){return Object(n["b"])({url:"/workContactTag/contactTagList",method:"get",params:t})}function p(t){return Object(n["b"])({url:"/roomClockIn/dayDetail",method:"get",params:t})}function f(t){return Object(n["b"])({url:"/workContactTagGroup/store",method:"post",data:t})}function h(t){return Object(n["b"])({url:"/roomClockIn/batchContactTags",method:"put",data:t})}function b(t){return Object(n["b"])({url:"/officialAccount/index",method:"GET",params:t})}},7756:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{staticClass:"user-total",attrs:{type:"flex",gutter:0,justify:"space-between"}},[a("a-col",{staticClass:"white-bg-module user",attrs:{span:12}},[a("img",{attrs:{src:"https://img0.baidu.com/it/u=73163259,1373343321&fm=26&fmt=auto&gp=0.jpg"}}),a("div",{staticClass:"info"},[a("p",[t._v("张萨克")]),a("div",{staticClass:"status"},[t._v("管理员")])])]),a("a-col",{staticClass:"white-bg-module total_module",attrs:{span:12}},[a("a-row",{attrs:{type:"flex",gutter:20,justify:"space-between"}},[a("a-col",{staticClass:"item item_hr",attrs:{span:12}},[a("p",[t._v("总客户数")]),a("span",[t._v("0 "),a("span",[t._v("人")])])]),a("a-col",{staticClass:"item",attrs:{span:12}},[a("p",[t._v("今日新增")]),a("span",[t._v("0 "),a("span",[t._v("人")])])])],1)],1)],1),a("div",{staticClass:"white-bg-module"},[a("div",{staticClass:"client-title"},[t._v("联系客户统计")]),a("a-row",{staticClass:"user-total",attrs:{type:"flex",align:"bottom",gutter:0,justify:"first-start"}},[a("a-col",{staticClass:"white-bg-module total_module total_module1",attrs:{span:18}},[a("a-row",{attrs:{type:"flex",gutter:20,justify:"space-between"}},[a("a-col",{staticClass:"item item_hr",attrs:{span:6}},[a("p",[t._v("昨日聊天总数")]),a("span",[t._v("0 "),a("span",[t._v("条")])])]),a("a-col",{staticClass:"item",attrs:{span:6}},[a("p",[t._v("昨日发消息总数")]),a("span",[t._v("0 "),a("span",[t._v("条")])])]),a("a-col",{staticClass:"item item_hr",attrs:{span:6}},[a("p",[t._v("昨日回复聊天占比")]),a("span",[t._v("0 "),a("span",[t._v("%")])])]),a("a-col",{staticClass:"item",attrs:{span:6}},[a("p",[t._v("昨日平均首次回复时长")]),a("span",[t._v("0 "),a("span",[t._v("min")])])])],1)],1),a("a-col",{staticClass:"tooltip-text",attrs:{span:3}},[a("a-tooltip",{attrs:{placement:"topLeft","arrow-point-at-center":""}},[a("a-icon",{attrs:{type:"question-circle"}}),t._v(" 统计说明 "),a("div",{staticClass:"text",attrs:{slot:"title"},slot:"title"},[t._v(" 1、聊天总数：成员有主动发送过消息的单聊总数"),a("br"),t._v(" 2、发送消息数：成员在单聊中发送的消息总数"),a("br"),t._v(" 3、已回复聊天占比：客户主动发起聊天后，成员在一个自然日内有回复过消息的聊天数/客户主动发起的聊天数比例"),a("br"),t._v(" 4、平均首次回复时长：客户主动发起聊天后，成员在一个自然日内首次回复的时长间隔为首次回复时长 ")])],1)],1)],1)],1),a("div",{staticClass:"white-bg-module"})],1)},s=[],i=(a("b407"),a("2877")),r={},o=Object(i["a"])(r,n,s,!1,null,"439c16b0",null);e["default"]=o.exports},"78f4":function(t,e,a){},"850a":function(t,e,a){},"89f6":function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i})),a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"h",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"f",(function(){return u})),a.d(e,"k",(function(){return m})),a.d(e,"e",(function(){return p})),a.d(e,"j",(function(){return f}));var n=a("b775");function s(t){return Object(n["b"])({url:"/contactBatchAdd/index",method:"get",params:t})}function i(t){return Object(n["b"])({url:"/contactBatchAdd/allot",method:"POST",data:t})}function r(t){return Object(n["b"])({url:"/contactBatchAdd/dataStatistic",method:"GET",params:t})}function o(t){return Object(n["b"])({url:"/contactBatchAdd/destroy",method:"delete",data:t})}function l(t){return Object(n["b"])({url:"/contactBatchAdd/importIndex",method:"GET",params:t})}function c(t){return Object(n["b"])({url:"/contactBatchAdd/importDestroy",method:"delete",data:t})}function d(t){return Object(n["b"])({url:"/contactBatchAdd/importStore",method:"POST",data:t})}function u(t){return Object(n["b"])({url:"/contactBatchAdd/settingEdit",method:"GET",params:t})}function m(t){return Object(n["b"])({url:"/contactBatchAdd/settingUpdate",method:"POST",data:t})}function p(t){return Object(n["b"])({url:"/workDepartment/index",method:"get",params:t})}function f(t){return Object(n["b"])({url:"/contactBatchAdd/remind",method:"get",params:t})}},"981e":function(t,e,a){"use strict";a("78f4")},"9c58":function(t,e,a){},a61d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("数据统计")])},s=[],i=a("2877"),r={},o=Object(i["a"])(r,n,s,!1,null,null,null);e["default"]=o.exports},b407:function(t,e,a){"use strict";a("0bab")},b4c6:function(t,e,a){"use strict";a("604a")},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var n=a("06c5");function s(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,i=function(){};return{s:i,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){l=!0,r=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(l)throw r}}}}},dd26:function(t,e,a){"use strict";a("3ee7")},f51f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"white-bg-module"},[a("div",{staticClass:"search"},[a("div",{staticClass:"total"},[a("span",{staticClass:"b"},[t._v("共"+t._s(t.clientTable.data.length)+"个客户")])]),a("div",{staticClass:"an-form"},[t._v(" 添加状态 "),a("a-select",{staticStyle:{width:"200px"},on:{change:t.selectRadio},model:{value:t.askClientTable.status,callback:function(e){t.$set(t.askClientTable,"status",e)},expression:"askClientTable.status"}},[a("a-select-option",{attrs:{value:4}},[t._v("全部")]),a("a-select-option",{attrs:{value:0}},[t._v("未分配")]),a("a-select-option",{attrs:{value:1}},[t._v("待添加")]),a("a-select-option",{attrs:{value:2}},[t._v("待通过")]),a("a-select-option",{attrs:{value:3}},[t._v("已添加")])],1),a("a-input-search",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入要搜索电话 / 备注名",allowClear:!0},on:{search:t.searchClientData,change:t.cleanInput},model:{value:t.askClientTable.searchKey,callback:function(e){t.$set(t.askClientTable,"searchKey",e)},expression:"askClientTable.searchKey"}})],1)]),a("a-table",{staticClass:"table",attrs:{columns:t.clientTable.columns,"data-source":t.clientTable.data},scopedSlots:t._u([{key:"tags",fn:function(e){return a("div",{},t._l(e,(function(e,n){return a("a-tag",{key:n},[t._v(t._s(e.name))])})),1)}},{key:"status",fn:function(e){return a("div",{},[0==e?a("a-tag",{attrs:{color:"gray"}},[t._v("未分配")]):t._e(),1==e?a("a-tag",{attrs:{color:"orange"}},[t._v("待添加")]):t._e(),2==e?a("a-tag",{attrs:{color:"cyan"}},[t._v("待通过")]):t._e(),3==e?a("a-tag",{attrs:{color:"green"}},[t._v("已添加")]):t._e()],1)}},{key:"allotEmployee",fn:function(e){return a("div",{},[a("a-tag",[t._v(t._s(e.name))])],1)}},{key:"operation",fn:function(e,n){return a("div",{},[a("a",{on:{click:function(e){return t.remindAdd(n)}}},[t._v("提醒添加")])])}}])})],1)},s=[],i=a("89f6"),r={data:function(){return{clientTable:{columns:[{title:"电话号码",dataIndex:"phone"},{title:"客服备注名字",dataIndex:"remark"},{title:"导入时间",dataIndex:"uploadAt"},{title:"客户标签",dataIndex:"tags",scopedSlots:{customRender:"tags"}},{title:"添加状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"添加时间",dataIndex:"addAt"},{title:"分配员工",dataIndex:"allotEmployee",scopedSlots:{customRender:"allotEmployee"}},{title:"分配次数",dataIndex:"allotNum"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],data:[]},askClientTable:{status:4,searchKey:"",recordId:""}}},created:function(){this.askClientTable.recordId=this.$route.query.recordId,this.getClientTableData()},methods:{remindAdd:function(t){this.$confirm({title:"提示",content:"将通过提醒给该成员添加该手机号为好友，是否确认发送？",okText:"发送",okType:"primary",cancelText:"取消",onOk:function(){}})},selectRadio:function(){this.getClientTableData()},searchClientData:function(){this.getClientTableData()},cleanInput:function(){""==this.askClientTable.searchKey&&this.getClientTableData()},getClientTableData:function(){var t=this,e={status:"",searchKey:this.askClientTable.searchKey,recordId:this.askClientTable.recordId};4==this.askClientTable.status?e.status="":e.status=this.askClientTable.status,Object(i["c"])(e).then((function(e){t.clientTable.data=e.data.data}))}}},o=r,l=(a("b4c6"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"4b22c034",null);e["default"]=c.exports},ff04:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-upload",{class:t.btnType?"avatar-uploader":"btn-type",attrs:{name:"file","list-type":"picture-card",headers:t.headers,method:"post","show-upload-list":!1,action:t.uploadApi,"before-upload":t.beforeUpload,accept:"image/*"},on:{change:t.handleChange}},[t.btnType?a("div",[t.imageUrl?a("div",{staticClass:"img-wrapper"},[a("img",{staticClass:"img",attrs:{src:t.imageUrl,alt:"avatar"}})]):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}})],1)]):a("a-button",{attrs:{type:"link"}},[t._v("重新上传")])],1)},s=[],i=(a("a9e3"),a("b0c0"),a("ac1f"),a("1276"),a("d81d"),a("99af"),a("caad"),a("2532"),a("a15b"),a("8ded")),r=a.n(i),o={model:{prop:"modelVal",event:"changeImg"},props:{fileType:{type:Number||Array,default:1},modelVal:{default:"",type:String},btnType:{type:Boolean,default:!0}},data:function(){return{loading:!1,imageUrl:"",FileTypeArr:["",["jpg","png","jpeg"],["mp3","amr"],["mp4"],["doc","docx","xls","xlsx","csv","ppt","pptx","txt","pdf","Xmind"]],uploadApi:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL+"/dashboard/common/upload"}},computed:{headers:function(){var t=r.a.get("ACCESS_TOKEN");return{Accept:"application/json",Authorization:t}}},created:function(){},methods:{showImg:function(t){this.imageUrl=t},handleChange:function(t){if("uploading"!==t.file.status){if("done"===t.file.status){var e=t.file.response.data;this.$emit("success",e),this.$emit("changeImg",e.path),this.imageUrl=e.fullPath,this.loading=!1}if("error"===t.file.status&&t.file.response){var a=t.file.response;this.$message.error(a.msg)}}else this.loading=!0},beforeUpload:function(t){var e=this,a=this._getFileSuffix(t.name).toLowerCase(),n=t.type.split("/")[0],s=t.size/1024/1024<2,i=t.size/1024/1024<10,r=[];this.fileType instanceof Array?this.fileType.map((function(t){r.concat(e.FileTypeArr[t])})):r=this.FileTypeArr[this.fileType];var o=r.includes(a);return o?"video"===n?(i||this.$message.error("上传文件过大"),o&&i):(s||this.$message.error("上传文件过大"),o&&s):(this.$message.error("您只能上传以下类型： ".concat(r.join(","))),!1)},_getFileSuffix:function(t){return t.substring(t.lastIndexOf(".")+1)}}},l=o,c=(a("dd26"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,null,null);e["a"]=d.exports}}]);