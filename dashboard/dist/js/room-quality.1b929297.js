(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["room-quality"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f");var s=a("6b75");function r(t,e){if(t){if("string"===typeof t)return Object(s["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(s["a"])(t,e):void 0}}},"0adc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("a-card",{staticStyle:{"min-width":"900px"},attrs:{title:"规则详情"}},[s("div",{staticClass:"page_top"},[s("div",{staticClass:"left"},[s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("规则名称：")]),s("span",[t._v(t._s(t.detailsData.name))])]),s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("创建人：")]),s("a-tag",[s("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(t.detailsData.createUserName))],1),1==t.detailsData.status?s("a-tag",{attrs:{color:"green"}},[t._v("已开启")]):s("a-tag",{attrs:{color:"grey"}},[t._v("已关闭")])],1),s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("创建时间：")]),s("span",[t._v(t._s(t.detailsData.createdAt))])]),s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("质检群聊：")]),s("div",{staticClass:"groupRow"},t._l(t.detailsData.rooms,(function(e,r){return s("div",{key:r,staticClass:"groupStyle"},[s("img",{attrs:{src:a("8522"),alt:""}}),s("div",{staticClass:"group_information"},[s("div",{staticClass:"groupName"},[t._v(t._s(e.name))]),s("div",{staticClass:"groupNumber"},[t._v(t._s(e.contact_num)+"/"+t._s(e.roomMax))])])])})),0)]),s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("质检时间：")]),1==t.detailsData.qualityType?s("span",[t._v("全天检测")]):t._e(),2==t.detailsData.qualityType?s("span",[t._v("自定义检测")]):t._e()]),2==t.detailsData.qualityType?s("div",t._l(t.detailsData.workCycle,(function(e,a){return s("div",{key:a,staticClass:"workTime"},[s("span",{staticClass:"title"},[t._v("工作周期"+t._s(a+1)+"：")]),t._l(e.week,(function(e,a){return s("span",{key:a},[0==e?s("a-tag",[t._v("周日")]):t._e(),1==e?s("a-tag",[t._v("周一")]):t._e(),2==e?s("a-tag",[t._v("周二")]):t._e(),3==e?s("a-tag",[t._v("周三")]):t._e(),4==e?s("a-tag",[t._v("周四")]):t._e(),5==e?s("a-tag",[t._v("周五")]):t._e(),6==e?s("a-tag",[t._v("周六")]):t._e()],1)})),s("div",{staticClass:"work_time"},[s("span",{staticClass:"start_time"},[t._v("开始时间：")]),s("span",[t._v(t._s(e.start_time))]),s("span",{staticClass:"start_time"},[t._v("结束时间：")]),s("span",[t._v(t._s(e.end_time))])])],2)})),0):t._e()]),s("div",{staticClass:"right"},[s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("规则：")]),s("div",{staticClass:"rule_particulars"},t._l(t.detailsData.rule,(function(e,a){return s("div",{key:a,staticClass:"rule_sub"},[s("div",{staticClass:"rule_name"},[t._v("规则"+t._s(a+1)+"：")]),s("div",{staticClass:"rule_set"},[t._v("为超过 "),s("span",[t._v(t._s(e.num))]),1==e.time_type?s("span",[t._v("分钟")]):t._e(),2==e.time_type?s("span",[t._v("小时")]):t._e(),3==e.time_type?s("span",[t._v("天")]):t._e(),t._v(" 未回复客户消息的群聊,给 "),1==e.employee_type?s("span",[t._v("管理员")]):t._e(),2==e.employee_type?s("span",[t._v("群主")]):t._e(),t._l(e.employee,(function(e,a){return s("a-tag",{key:a},[s("a-icon",{attrs:{type:"user"}}),t._v(t._s(e.name))],1)})),t._v(" 发送提醒行为")],2)])})),0)]),s("div",{staticClass:"row"},[s("span",{staticClass:"title"},[t._v("群聊质检白名单：")]),s("div",{staticClass:"rule_particulars pure_list"},[1==t.detailsData.whiteListStatus?s("div",t._l(t.detailsData.keyword,(function(e,a){return s("a-tag",{key:a},[t._v(t._s(e))])})),1):s("Empty")],1)])])])]),s("a-card",{staticStyle:{"min-width":"900px","margin-top":"15px"}},[s("div",[t._v("数据总览")]),s("div",{staticClass:"over_view"},[s("div",{staticClass:"record_view"},[s("h2",[t._v(t._s(t.overViewData.quality_total_num))]),s("div",{staticClass:"tips"},[t._v("总触发规则次数")])]),s("a-divider",{staticClass:"num",attrs:{type:"vertical"}}),s("div",{staticClass:"record_view"},[s("h2",[t._v(t._s(t.overViewData.quality_today_num))]),s("div",{staticClass:"tips"},[t._v("今日触发规则次数")])]),s("a-divider",{staticClass:"num",attrs:{type:"vertical"}}),s("div",{staticClass:"record_view"},[s("h2",[t._v(t._s(t.overViewData.quality_week_num))]),s("div",{staticClass:"tips"},[t._v("本周触发规则次数")])]),s("a-divider",{staticClass:"num",attrs:{type:"vertical"}}),s("div",{staticClass:"record_view"},[s("h2",[t._v(t._s(t.overViewData.quality_month_num))]),s("div",{staticClass:"tips"},[t._v("本月触发规则次数")])])],1)]),s("a-card",{staticStyle:{"min-width":"900px","margin-top":"15px"}},[s("div",{staticClass:"table_top"},[s("div",[t._v("群聊详情数据"),s("a-divider",{attrs:{type:"vertical"}}),t._v("共"+t._s(t.table.data.length)+"个群聊")],1)]),s("a-table",{staticClass:"tableStyle",attrs:{columns:t.table.columns,"data-source":t.table.data},scopedSlots:t._u([{key:"room_name",fn:function(e){return s("div",{},[s("a-tag",[t._v(t._s(e))])],1)}},{key:"owner_name",fn:function(e){return s("div",{},[s("a-tag",[s("a-icon",{attrs:{type:"user"}}),t._v(t._s(e)+" ")],1)],1)}},{key:"status",fn:function(e){return s("div",{},[0==e?s("span",[t._v("正常")]):t._e(),1==e?s("span",[t._v("跟进人离职")]):t._e(),2==e?s("span",[t._v("离职继承中")]):t._e(),3==e?s("span",[t._v("离职继承完成")]):t._e()])}},{key:"operation",fn:function(e,a){return s("div",{},[s("a",{on:{click:function(e){return t.groupDetails(a.room_id)}}},[t._v("查看详情")])])}}])}),s("a-modal",{attrs:{title:"群详情",maskClosable:!1,footer:null,width:"820px"},model:{value:t.groupShow,callback:function(e){t.groupShow=e},expression:"groupShow"}},[s("div",{staticClass:"row_head"},[t._v("群聊内员工("+t._s(t.room_employee.length)+")")]),s("div",{staticClass:"group_row"},t._l(t.room_employee,(function(e,a){return s("div",{key:a,staticClass:"number_box"},[s("img",{attrs:{src:e.avatar,alt:""}}),s("div",{staticClass:"number_right"},[s("div",{staticClass:"number_name"},[t._v(t._s(e.name))]),1==e.audit_status?s("a-tag",{attrs:{color:"blue"}},[t._v("已开通消息存档")]):s("a-tag",[t._v("未开通消息存档")])],1)])})),0),s("div",{staticClass:"row_head",staticStyle:{"margin-top":"22px"}},[t._v("回复数据")]),s("div",{},[s("div",{staticClass:"card"},[s("div",{staticClass:"message-wrapper"},[s("ul",{staticClass:"message-content"},t._l(t.messageData,(function(e,a){return s("li",{key:a,staticClass:"message-item"},[s("div",{staticClass:"people-wrapper",class:1==e.isCurrentUser?"people-self":""},[s("div",{staticClass:"people-avatar"},[e.avatar?s("img",{staticClass:"img",attrs:{src:e.avatar,onerror:t.errorImg,alt:""}}):s("a-icon",{staticClass:"icon",attrs:{type:"user"}})],1),s("div",{staticClass:"people-info"},[s("div",{staticClass:"name-wrapper",class:1==e.isCurrentUser?"self-name-wrapper":""},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("span",{staticClass:"message-time"},[t._v(t._s(e.msgDataTime))])]),1==e.type||e.type>7?s("div",{class:["info",1==e.isCurrentUser?"self-info":""]},[t._v(" "+t._s(e.content.content)+" "),e.content.item?s("div",{staticClass:"info-item"},t._l(e.content.item,(function(e,a){return s("div",{key:a},[s("div",[t._v(" "+t._s(e.content)+" ")])])})),0):t._e()]):s("div",{class:["info","white",1==e.isCurrentUser?"self-info":""]},[2==e.type?s("a",{attrs:{href:e.content.ossFullPath,target:"blank"}},[s("img",{staticClass:"img",attrs:{src:e.content.ossFullPath,onerror:t.errorImg,alt:""}})]):t._e(),4==e.type?s("audio",{staticClass:"audio",attrs:{controls:""}},[s("source",{attrs:{src:e.content.ossFullPath,type:"audio/mpeg"}}),s("source",{attrs:{src:e.content.ossFullPath,type:"audio/ogg"}})]):t._e(),5==e.type?s("video",{staticClass:"video",attrs:{poster:"",controls:"","data-setup":"{}",preload:"auto"}},[s("source",{attrs:{src:e.content.ossFullPath}})]):t._e(),6==e.type?s("div",{staticClass:"little"},[s("div",{staticClass:"wrpper"},[t._v("小程序")]),s("div",{staticClass:"title-wrapper"},[s("div",{staticClass:"name"},[t._v(t._s(e.content.displayname))]),s("div",{staticClass:"title"},[t._v(t._s(e.content.title))]),s("div",{staticClass:"description"},[t._v(" "+t._s(e.content.description)+" ")])])]):t._e(),7==e.type?s("a",{attrs:{href:e.content.ossFullPath,target:"blank"}},[s("div",{staticClass:"other"},[s("a-icon",{staticClass:"file",attrs:{type:"file"}}),s("span",{staticClass:"file-name"},[t._v("文件")])],1)]):t._e()])])])])})),0)])])])])],1)],1)},r=[],n=(a("06f4"),a("fc25")),i=a("6380"),o={components:{Empty:n["a"]},data:function(){return{room_employee:[],groupShow:!1,messageData:[],errorImg:'this.src="'+a("1195")+'"',table:{columns:[{key:"room_name",dataIndex:"room_name",title:"群聊名称",scopedSlots:{customRender:"room_name"}},{key:"owner_name",dataIndex:"owner_name",title:"群主",scopedSlots:{customRender:"owner_name"}},{key:"status",dataIndex:"status",title:"群状态",scopedSlots:{customRender:"status"},align:"center"},{key:"room_total_num",dataIndex:"room_total_num",title:"群人数",align:"center"},{key:"quality_total_num",dataIndex:"quality_total_num",title:"总触发规则次数",align:"center",scopedSlots:{customRender:"quality_total_num"}},{key:"quality_today_num",dataIndex:"quality_today_num",title:"今日触发规则次数",align:"center",scopedSlots:{customRender:"quality_today_num"}},{key:"room_employee_num",dataIndex:"room_employee_num",title:"群聊内员工人数",align:"center",scopedSlots:{customRender:"room_employee_num"}},{key:"last_time",dataIndex:"last_time",title:"近期提醒时间",align:"center",scopedSlots:{customRender:"last_time"}},{key:"operation",dataIndex:"operation",title:"操作",scopedSlots:{customRender:"operation"}}],data:[]},detailsData:{},overViewData:{}}},created:function(){this.rowId=this.$route.query.rowId,this.getDetailsData({id:this.rowId}),this.getTableData({id:this.rowId})},methods:{getMessageList:function(){Object(i["d"])().then((function(t){}))},groupDetails:function(t){var e=this;Object(i["a"])({room_id:t}).then((function(t){e.groupShow=!0,e.room_employee=t.data.room_employee}))},getDetailsData:function(t){var e=this;Object(i["e"])(t).then((function(t){e.detailsData=t.data}))},getTableData:function(t){var e=this;Object(i["f"])(t).then((function(t){e.table.data=t.data.list,e.overViewData=t.data.data}))}}},l=o,u=(a("dc38"),a("2877")),c=Object(u["a"])(l,s,r,!1,null,"786a1a1c",null);e["default"]=c.exports},"0e64":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-group"},[s("a-modal",{attrs:{"on-ok":"handleOk",width:526,footer:!1},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[s("template",{slot:"title"},[t._v(" 选择群聊 ")]),s("div",{staticClass:"content"},[s("div",{staticClass:"tips"},[t._v(" 全部群聊（"+t._s(t.groups.length)+"）： ")]),s("div",{staticClass:"groups"},t._l(t.groups,(function(e,r){return t.resetFlag?s("div",{key:r,staticClass:"item"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:a("8522")}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"count"},[t._v(" "+t._s(e.contact_num)+" / "+t._s(e.roomMax)+" ")])]),s("div",[s("div",{staticClass:"select"},[t.resetFlag?s("a-checkbox",{attrs:{checked:e.select},on:{change:function(a){return t.selectChange(a,e)}}}):t._e()],1)])]):t._e()})),0),s("div",{staticClass:"confirm"},[s("a-button",{on:{click:function(e){t.modalShow=!1}}},[t._v("取消")]),s("a-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)])],2)],1)},r=[],n=a("b85c"),i=(a("d3b7"),a("159b"),a("4de4"),a("59e4")),o={data:function(){return{modalShow:!1,loading:!1,groups:[],currentData:{},resetFlag:!0}},methods:{setSelect:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.currentData=a,this.getData((function(a){e.reset(),e.groups.forEach((function(e){t.forEach((function(t){t.wxChatId===e.wxChatId&&(e.select=!0)}))}))})),this.modalShow=!0},selectChange:function(t,e){this.resetFlag=!1,e.select=t.target.checked,this.resetFlag=!0},confirm:function(){this.hide();var t=this.groups.filter((function(t){return!0===t.select}));this.$emit("change",t,this.currentData)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(i["o"])({roomGroupId:0,page:1,perPage:1e3}).then((function(a){t.groups=a.data,e&&e()}))},show:function(){this.getData(),this.reset(),this.modalShow=!0},hide:function(){this.modalShow=!1},reset:function(){var t,e=Object(n["a"])(this.groups);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.select=!1}}catch(s){e.e(s)}finally{e.f()}}}},l=o,u=(a("2897"),a("2877")),c=Object(u["a"])(l,s,r,!1,null,"b583576e",null);e["a"]=c.exports},1195:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAzCAYAAADsBOpPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAQrSURBVGhD7ZjbK21RFMbPP+l+SeRW7hS5veCFeEJur0S5xZN4EEUkIUpKvCCXouQaxum3m3M119pr7zPX2nsrHV+NdmuNMb7vs8295pjrj/ww/BpONf5vw09PT7KzsyPLy8syNTUV+eSa+8lCwobv7+9la2tLuru7JScnR9LS0qKC++Spoz4RJGR4fX1dmpubJTc319eoN6ijnr6wCGWYf/HCwoKvKSIrK0vy8/Mjn355gv4wSyWU4ZGRkSgzeXl50tnZKXNzc5FvkLXLJ9fcJ2/W0w9PUAQ2PD8/7xLWsbGxIZ+fn6rKDe6T9+uDLwgCGT45OYkSZE2enp6qivigjnovB7y2sDb8/v4ug4ODLqGKigq5urpSFXagnj6TB174bWBt+ObmRqqrqx0RflRHR0cqGwz00a+54IXfBtaG9/b2JDs72xGZmJhQmXCgX3PBC78NrA0PDQ05ApmZmXJ2dqYy4UA/PJoTfhtYG25vb3fIy8vLA69dL+iHR3PCbwNrw0VFRQ55XV2d3N3dqUw40A+P5oTfBtaGCwoKHPLa2lq5vb1VmXCgHx7NCb8NrA03NjY65CUlJXJxcaEy4UA/PJoTfhtYG+7t7XXIicPDQ5UJB/pNPvhtYG14ZWVF0tPTHYGxsTGVCQf6NRe88NvA2vD19bVUVVU5IoyKYb9l+syRFF74bWBt+O3tTfr7+x0RIllbM7zw28DaMDg/P5fi4mKXWKLDD3zw2iKQYbC5uekS1BF2vIQvCAIbBjMzM1EDOddtbW0yOjoayXMA5ZNr7vvVkw+KUIZZb0tLSy4DQYN+23VrIpRhRsHFxUUpLCz0NWMTAwMDoeaRQIYxOj09LTU1NZKRkeFrJEiUlZXJ5OSk9SwMrA0/PDxIS0uLrzDBw58nQF9fX2RT4EUKn1xz39x0vAEv/DawMsxw3dTUFCXEqaGnp0dWV1f/OQyRp45687ShA36bIf6fhnd3d33XakdHR0Tg+flZVdqBevro93Kig148xDXMzOrdldhSx8fH5eXlRVWFA/3weN8aoRdv1o5pmL29oaHBRVZfXy/b29sxN4iggAc+eE0ddGPNFjEN81A3SRiwDw4OVDa5gNc8IBCxNhVfw/xLvH81j7Ovry9VkVzAC7+ph77f0vA1zKZgnmi7urrk9fVVZVMD+NHRmujjw4sow7yBqaysdBo5HB4fH6tsaoGOedjFh/eNUJRh1pNuIILMqonCb+b2/m6iDA8PD7samLq+E+iZ+vgx4TL8+PjoOnoTib7hCQr0TH384EvDZZjJv7S01ClmC/34+FDZ7wF65taNH/NE4jK8v7/veh62traqzPcCXe0BP/jScBleW1tzPc686+e7YP6O8IMvDZfhy8tLmZ2djYyGhO3Il2ygqz0Q5iHXZfgn4NdwqvFrONX4YYZF/gKB6bB2CTcbPgAAAABJRU5ErkJggg=="},2263:function(t,e,a){"use strict";a("9c58")},2897:function(t,e,a){"use strict";a("9d3f")},"2ee5":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"g",(function(){return n})),a.d(e,"e",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"i",(function(){return u})),a.d(e,"h",(function(){return c})),a.d(e,"b",(function(){return m})),a.d(e,"c",(function(){return d})),a.d(e,"l",(function(){return p})),a.d(e,"k",(function(){return v})),a.d(e,"j",(function(){return f}));var s=a("b775");function r(t){return Object(s["b"])({url:"/channelCodeGroup/index",method:"get",params:t})}function n(t){return Object(s["b"])({url:"/channelCodeGroup/update",method:"put",data:t})}function i(t){return Object(s["b"])({url:"/channelCodeGroup/store",method:"post",data:t})}function o(t){return Object(s["b"])({url:"/channelCodeGroup/move",method:"put",data:t})}function l(t){return Object(s["b"])({url:"/channelCode/store",method:"post",data:t})}function u(t){return Object(s["b"])({url:"/channelCode/update",method:"put",data:t})}function c(t){return Object(s["b"])({url:"/channelCode/index",method:"get",params:t})}function m(t){return Object(s["b"])({url:"/channelCode/contact",method:"get",params:t})}function d(t){return Object(s["b"])({url:"/channelCode/show",method:"get",params:t})}function p(t){return Object(s["b"])({url:"/channelCode/statisticsIndex",method:"get",params:t})}function v(t){return Object(s["b"])({url:"/channelCode/statistics",method:"get",params:t})}function f(t){return Object(s["b"])({url:"/workDepartment/index",method:"get",params:t})}},"35c5":function(t,e,a){"use strict";a("486a")},"486a":function(t,e,a){},"4a04":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[a("a-modal",{attrs:{"on-ok":"handleOk",width:636,footer:!1,centered:"",maskClosable:!1},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("template",{slot:"title"},[t._v(" 选择成员 ")]),a("div",{staticClass:"content"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"tips"},[t._v(" 没有想要添加的成员？ "),a("a",{attrs:{href:"#"}},[t._v("添加成员教程")])]),a("div",{staticClass:"search"},[a("a-input-search",{attrs:{placeholder:"请输入成员昵称"},on:{search:t.search}})],1),a("div",{staticClass:"member"},t._l(t.members,(function(e,s){return a("div",{key:s,staticClass:"item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])]),a("div",{staticClass:"radio"},[a("a-checkbox",{on:{change:function(a){return t.selectChange(e)}},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"v.select"}})],1)])})),0)]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"tips"},[t._v(" 已选成员：（"+t._s(t.selectedMembers.length)+"） ")]),a("div",{staticClass:"member"},t._l(t.selectedMembers,(function(e,s){return a("div",{key:s,staticClass:"item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])])])})),0)])]),a("div",{staticClass:"confirm"},[a("a-button",{on:{click:function(e){t.modalShow=!1}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:t.go}},[t._v("确定")])],1)],2)],1)},r=[],n=a("b85c"),i=(a("d3b7"),a("159b"),a("4de4"),a("a434"),a("2ee5")),o={data:function(){return{modalShow:!1,loading:!1,members:[],selectedMembers:[],currentData:{}}},methods:{setSelect:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.selectedMembers=[],t.forEach((function(t,a){e.selectedMembers[a]=t})),this.currentData=a,this.getData("",(function(t){e.selectedMembers.forEach((function(t){e.members.forEach((function(e){t.wxUserId===e.wxUserId&&(t.avatar||(t.avatar=e.avatar),e.select=!0)}))}))})),this.reset(),this.modalShow=!0},search:function(t){this.getData(t)},selectChange:function(t){var e=-1,a=this.selectedMembers.filter((function(a,s){if(a.id===t.id)return e=s,a}));if(a.length)return this.selectedMembers.splice(e,1),!1;this.selectedMembers.push(t)},reset:function(){var t,e=Object(n["a"])(this.members);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.select=!1}}catch(s){e.e(s)}finally{e.f()}},go:function(){this.hide(),this.$emit("change",this.selectedMembers)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(i["j"])({searchKeyWords:e}).then((function(e){t.members=e.data.employee,a&&a()}))},show:function(){this.getData(),this.reset(),this.selectedMembers=[],this.modalShow=!0},hide:function(){this.modalShow=!1}}},l=o,u=(a("2263"),a("2877")),c=Object(u["a"])(l,s,r,!1,null,"24741dee",null);e["a"]=c.exports},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}},5620:function(t,e,a){},"59e4":function(t,e,a){"use strict";a.d(e,"C",(function(){return r})),a.d(e,"k",(function(){return n})),a.d(e,"i",(function(){return i})),a.d(e,"x",(function(){return o})),a.d(e,"D",(function(){return l})),a.d(e,"u",(function(){return u})),a.d(e,"f",(function(){return c})),a.d(e,"y",(function(){return m})),a.d(e,"A",(function(){return d})),a.d(e,"l",(function(){return p})),a.d(e,"t",(function(){return v})),a.d(e,"s",(function(){return f})),a.d(e,"B",(function(){return h})),a.d(e,"e",(function(){return _})),a.d(e,"c",(function(){return y})),a.d(e,"d",(function(){return b})),a.d(e,"z",(function(){return w})),a.d(e,"b",(function(){return g})),a.d(e,"w",(function(){return C})),a.d(e,"q",(function(){return k})),a.d(e,"o",(function(){return x})),a.d(e,"v",(function(){return A})),a.d(e,"a",(function(){return R})),a.d(e,"n",(function(){return T})),a.d(e,"j",(function(){return O})),a.d(e,"p",(function(){return j})),a.d(e,"g",(function(){return D})),a.d(e,"h",(function(){return S})),a.d(e,"m",(function(){return F})),a.d(e,"r",(function(){return E}));var s=a("b775");function r(t){return Object(s["b"])({url:"/workRoomGroup/index",method:"get",params:t})}function n(t){return Object(s["b"])({url:"/workRoomGroup/destroy",method:"delete",data:t})}function i(t){return Object(s["b"])({url:"/workRoomGroup/store",method:"post",data:t})}function o(t){return Object(s["b"])({url:"/workRoomGroup/update",method:"put",data:t})}function l(t){return Object(s["b"])({url:"/workRoom/index",method:"get",params:t})}function u(t){return Object(s["b"])({url:"/workRoom/syn",method:"put",data:t})}function c(t){return Object(s["b"])({url:"/workRoom/batchUpdate",method:"put",data:t})}function m(t){return Object(s["b"])({url:"/workContactRoom/index",method:"get",params:t})}function d(t){return Object(s["b"])({url:"/workEmployeeDepartment/memberIndex",method:"get",params:t})}function p(t){return Object(s["b"])({url:"/workDepartment/index",method:"get",params:t})}function v(t){return Object(s["b"])({url:"/workRoom/statisticsIndex",method:"get",params:t})}function f(t){return Object(s["b"])({url:"/workRoom/statistics",method:"get",params:t})}function h(t){return Object(s["b"])({url:"/workRoomAutoPull/index",method:"get",params:t})}function _(t){return Object(s["b"])({url:"/workRoomAutoPull/update",method:"put",data:t})}function y(t){return Object(s["b"])({url:"/workRoomAutoPull/store",method:"post",data:t})}function b(t){return Object(s["b"])({url:"/workRoomAutoPull/show",method:"get",params:t})}function w(t){return Object(s["b"])({url:"/workContactTagGroup/index",method:"get",params:t})}function g(t){return Object(s["b"])({url:"/workContactTag/store",method:"post",data:t})}function C(t){return Object(s["b"])({url:"/workContactTag/allTag",method:"get",params:t})}function k(t){return Object(s["b"])({url:"/workRoom/roomIndex",method:"get",params:t})}function x(t){return Object(s["b"])({url:"/roomTagPull/roomList",method:"get",params:t})}function A(t){return Object(s["b"])({url:"/roomTagPull/index",method:"get",params:t})}function R(t){return Object(s["b"])({url:"/roomTagPull/store",method:"POST",data:t})}function T(t){return Object(s["b"])({url:"/roomTagPull/show",method:"GET",params:t})}function O(t){return Object(s["b"])({url:"/roomTagPull/destroy",method:"DELETE",data:t})}function j(t){return Object(s["b"])({url:"/roomTagPull/remindSend",method:"GET",params:t})}function D(t){return Object(s["b"])({url:"/roomTagPull/chooseContact",method:"GET",params:t})}function S(t){return Object(s["b"])({url:"/roomTagPull/filterContact",method:"POST",data:t})}function F(t){return Object(s["b"])({url:"/roomTagPull/showContact",method:"GET",params:t})}function E(t){return Object(s["b"])({url:"/contactMessageBatchSend/showRoom",method:"GET",params:t})}},6380:function(t,e,a){"use strict";a.d(e,"h",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"i",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return m})),a.d(e,"a",(function(){return d}));var s=a("b775");function r(t){return Object(s["b"])({url:"/roomQuality/store",method:"post",data:t})}function n(t){return Object(s["b"])({url:"/roomQuality/index",method:"get",params:t})}function i(t){return Object(s["b"])({url:"/roomQuality/status",method:"put",data:t})}function o(t){return Object(s["b"])({url:"/roomQuality/info",method:"get",params:t})}function l(t){return Object(s["b"])({url:"/roomQuality/update",method:"put",data:t})}function u(t){return Object(s["b"])({url:"/roomQuality/showContact",method:"get",params:t})}function c(t){return Object(s["b"])({url:"/roomQuality/destroy",method:"delete",data:t})}function m(t){return Object(s["b"])({url:"workMessage/index",method:"get",params:t})}function d(t){return Object(s["b"])({url:"/roomQuality/contactDetail",method:"get",params:t})}},"6b75":function(t,e,a){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}a.d(e,"a",(function(){return s}))},"6ea1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("a-card",{attrs:{title:"修改规则设置",bordered:!1}},[r("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.ruleForm}},"a-form-model",e.layout,!1),[r("a-form-model-item",{attrs:{"has-feedback":"",label:"规则名称",prop:"pass","wrapper-col":{span:10}}},[r("a-input",{attrs:{autocomplete:"off",maxLength:20,placeholder:"名称不会展示给用户，用于企业记录渠道名称或使用场景"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"添加群聊",prop:"pass"}},[r("div",{staticClass:"addGroup"},[r("a-button",{staticClass:"addBtngroup",on:{click:function(t){return e.$refs.selectGroup.show()}}},[r("a-icon",{attrs:{type:"plus"}}),e._v("添加群聊")],1),r("div",{staticClass:"addTips"},[e._v(" 客户群聊内至少有一个员工开通消息存档功能才可使用哦， "),r("span",{staticClass:"newsArchive"},[e._v("立即开通消息存档")])])],1),r("div",{staticClass:"chosenGroup"},e._l(e.ruleForm.rooms,(function(t,s){return r("div",{key:s,staticClass:"chosenElement"},[r("img",{attrs:{src:a("8522"),alt:""}}),r("div",{staticClass:"chosenRight"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"num"},[e._v(e._s(t.contact_num)+"/"+e._s(t.roomMax))])]),0==t.audit_status?r("a-popover",{attrs:{placement:"topLeft"}},[r("template",{slot:"content"},[r("span",[e._v("此群聊内没有员工开通消息存档功能")])]),r("div",{staticClass:"notallyWith"})],2):e._e()],1)})),0)]),r("selectGroup",{ref:"selectGroup",on:{change:e.receiveGroup}}),r("a-form-model-item",{attrs:{label:"质检时间"}},[r("a-radio-group",{on:{change:e.selectDetectTime},model:{value:e.ruleForm.quality_type,callback:function(t){e.$set(e.ruleForm,"quality_type",t)},expression:"ruleForm.quality_type"}},[r("a-radio",{attrs:{value:1}},[e._v("全天检测")]),r("a-radio",{attrs:{value:2}},[e._v("自定义质检时间")])],1),2==e.ruleForm.quality_type?r("div",{staticClass:"customizeTime"},[r("div",{staticClass:"customizeTips"},[r("div",[e._v("自动上下线")]),r("div",{staticClass:"tipsRule"},[r("div",[e._v("1、可用于员工早晚班等不同上下班时间段使用；")]),r("div",[e._v("2、员工在非线上时间将不会收到推送提醒。")])])]),e._l(e.customTimeArray,(function(t,a){return r("div",{key:a,staticClass:"customizeContent"},[r("div",{staticClass:"customDate"},[r("div",[e._v("工作周期"+e._s(a+1)+"：")]),r("div",{staticClass:"cycleOption"},[r("a-tree-select",{staticStyle:{width:"100%"},attrs:{"tree-data":e.treeData,"tree-checkable":"",placeholder:"请选择工作周期"},model:{value:t.week,callback:function(a){e.$set(t,"week",a)},expression:"item.week"}}),r("span",{staticClass:"downIcon"},[r("a-icon",{attrs:{type:"down"}})],1)],1)]),r("div",{staticClass:"customTime"},[r("div",[e._v("质检时间：")]),r("div",[r("a-time-picker",{attrs:{format:"HH:mm",placeholder:"开始时间"},model:{value:t.start_time,callback:function(a){e.$set(t,"start_time",a)},expression:"item.start_time"}}),e._v(" ~ "),r("a-time-picker",{attrs:{format:"HH:mm",placeholder:"结束时间"},model:{value:t.end_time,callback:function(a){e.$set(t,"end_time",a)},expression:"item.end_time"}})],1)]),1!=e.customTimeArray.length?r("div",{staticClass:"customDelBtn",on:{click:function(t){return e.customDelEvent(a)}}},[r("a-icon",{attrs:{type:"delete"}})],1):e._e()])})),r("div",{staticClass:"addCycleBtn",on:{click:e.addCycleEvent}},[r("a-icon",{staticClass:"addBtnIcon",attrs:{type:"plus-circle"}}),e._v("添加其他工作时间")],1)],2):e._e()],1),r("a-form-model-item",{attrs:{label:"添加规则"}},[r("div",{staticClass:"addRuleRow"},[r("div",{staticClass:"addRuleCont"},e._l(e.ruleArray,(function(t,a){return r("div",{key:a,staticClass:"addRuleContRow"},[r("div",[0!=a?r("a-icon",{staticClass:"delRuleBtn",attrs:{type:"minus-circle"},on:{click:function(t){return e.delRuleEvent(a)}}}):e._e(),e._v(" 规则"+e._s(a+1)+"：为超过 "),r("a-input-number",{attrs:{id:"inputNumber",min:1},model:{value:t.num,callback:function(a){e.$set(t,"num",a)},expression:"item.num"}}),r("a-select",{staticStyle:{width:"120px","margin-left":"10px"},model:{value:t.time_type,callback:function(a){e.$set(t,"time_type",a)},expression:"item.time_type"}},[r("a-select-option",{attrs:{value:1}},[e._v("分钟")]),r("a-select-option",{attrs:{value:2}},[e._v("时")]),r("a-select-option",{attrs:{value:3}},[e._v("天")])],1),e._v(" 未回复客户消息的群聊， ")],1),r("div",{staticClass:"choiceRow"},[e._v("给 "),r("a-select",{staticClass:"choice_admin",staticStyle:{width:"200px"},model:{value:t.employee_type,callback:function(a){e.$set(t,"employee_type",a)},expression:"item.employee_type"}},[r("a-select-option",{attrs:{value:1}},[e._v("管理员/部门管理员")]),r("a-select-option",{attrs:{value:2}},[e._v("客户群群主")])],1),r("div",{staticStyle:{"margin-left":"211px",display:"flex"}},[1==t.employee_type?r("div",{staticClass:"choiceAdmin",on:{click:function(t){return e.showMemberPop(a)}}},[0==t.showEmployee.length?r("span",{staticClass:"operationTips"},[e._v("请选择管理员/部门管理员")]):e._e(),r("div",e._l(t.showEmployee,(function(t,a){return r("a-tag",{key:a},[e._v(e._s(t.name))])})),1)]):e._e(),e._v(" 发送行为 ")])],1)])})),0),r("selectMember",{ref:"selectMember",on:{change:e.effectStaff}}),e.ruleArray.length<8?r("div",{staticClass:"addRuleBtn",on:{click:e.addRuleEvent}},[r("a-icon",{staticClass:"addBtnIcon",attrs:{type:"plus-circle"}}),e._v("添加规则 "),r("span",{staticClass:"addLimit"},[e._v("(最多设置8个规则)")])],1):r("div",{staticClass:"addRuleBtn2"},[r("a-icon",{staticClass:"addBtnIcon",attrs:{type:"plus-circle"}}),e._v("添加规则"),r("span",{staticClass:"addLimit"},[e._v("(最多设置8个规则)")])],1)],1)]),r("a-form-model-item",{attrs:{label:"群聊质检白名单"}},[r("a-row",[r("a-switch",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:function(){e.white_list_status?t.ruleForm.white_list_status=1:t.ruleForm.white_list_status=0}},model:{value:e.white_list_status,callback:function(t){e.white_list_status=t},expression:"white_list_status"}}),e.ruleForm.white_list_status?r("span",[e._v("已开启")]):r("span",[e._v("已关闭")]),r("span",{staticClass:"whiteTips"},[e._v("（多条关键词，可同时生效）")])],1),e.ruleForm.white_list_status?r("div",{staticClass:"addkeyRow"},[e.inputVisible?r("a-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{maxLength:8},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("a-button",{staticClass:"button-new-tag",on:{click:e.showInput}},[e._v("+ 添加关键词")]),e._l(e.ruleForm.keyword,(function(t){return r("a-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])}))],2):e._e()],1),r("a-form-model-item",{attrs:{"wrapper-col":{span:14}}},[r("a-button",{staticClass:"establishBtn",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("修改")])],1)],1)],1)],1)},r=[],n=a("53ca"),i=(a("b0c0"),a("d3b7"),a("159b"),a("a434"),a("6380")),o=a("0e64"),l=a("4a04"),u=a("c1df"),c=a.n(u),m={components:{selectGroup:o["a"],selectMember:l["a"]},data:function(){return{white_list_status:!0,customTimeArray:[{week:["周一","周二","周三","周四","周五","周六","周日"],start_time:"",end_time:""}],ruleArray:[{num:30,time_type:1,employee_type:1,employee:[],showEmployee:[]}],indexRuleNum:0,inputVisible:!1,inputValue:"",treeData:[{title:"周一",value:"周一",key:"周一"},{title:"周二",value:"周二",key:"周二"},{title:"周三",value:"周三",key:"周三"},{title:"周四",value:"周四",key:"周四"},{title:"周五",value:"周五",key:"周五"},{title:"周六",value:"周六",key:"周六"},{title:"周日",value:"周日",key:"周日"}],customTimeValue:["周一","周二","周三","周四","周五","周六","周日"],ruleForm:{name:"",rooms:[],quality_type:1,work_cycle:[],rule:[],white_list_status:0,keyword:[]},layout:{labelCol:{span:3},wrapperCol:{span:14}}}},created:function(){this.rowId=this.$route.query.rowId,this.getRuleData({id:this.rowId})},methods:{getRuleData:function(t){var e=this;Object(i["e"])(t).then((function(t){e.ruleForm.name=t.data.name,e.ruleForm.rooms=t.data.rooms,e.ruleForm.quality_type=t.data.qualityType,e.ruleForm.white_list_status=t.data.whiteListStatus,""==t.data.keyword?e.ruleForm.keyword=[]:e.ruleForm.keyword=t.data.keyword,e.showRuleData(t.data)}))},showRuleData:function(t){var e=this;this.ruleForm.white_list_status?this.white_list_status=!0:this.white_list_status=!1,""!=t.workCycle&&this.handleTestTime(t.workCycle),this.ruleArray=[],t.rule.forEach((function(t,a){var s={num:"",time_type:"",employee_type:"",employee:[],showEmployee:[]};s.num=t.num,s.time_type=t.time_type,s.employee_type=t.employee_type,s.showEmployee=t.showEmployee,s.employee=e.handAskRule(t.employee),e.ruleArray.push(s)}))},handAskRule:function(t){var e=[];return t.forEach((function(t,a){e[a]=t.id})),e},handleTestTime:function(t){var e=this;this.customTimeArray=[],t.forEach((function(t,a){var s={week:[],start_time:"",end_time:""};t.week.forEach((function(t,e){0==t&&(s.week[e]="周日"),1==t&&(s.week[e]="周一"),2==t&&(s.week[e]="周二"),3==t&&(s.week[e]="周三"),4==t&&(s.week[e]="周四"),5==t&&(s.week[e]="周五"),6==t&&(s.week[e]="周六")})),s.start_time=c()(t.start_time,"HH:mm"),s.end_time=c()(t.end_time,"HH:mm"),e.customTimeArray.push(s)}))},showMemberPop:function(t){this.indexRuleNum=t,this.$refs.selectMember.show()},receiveGroup:function(t){this.ruleForm.rooms=t},effectStaff:function(t){var e=[];t.forEach((function(t,a){e[a]=t.id})),this.ruleArray[this.indexRuleNum].showEmployee=t,this.ruleArray[this.indexRuleNum].employee=e},handleClose:function(t){this.ruleForm.keyword.splice(this.ruleForm.keyword.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.ruleForm.keyword.push(t),this.inputVisible=!1,this.inputValue=""},submitForm:function(){var t=this;if(""==this.ruleForm.name)return this.$message.error("规则名称不能为空"),!1;if(""==this.ruleForm.rooms)return this.$message.error("群聊不能为空"),!1;if(2==this.ruleForm.quality_type){this.ruleForm.work_cycle=[];for(var e=function(e){var a={week:[],start_time:"",end_time:""};return""==t.customTimeArray[e].week?(t.$message.error("工作周期"+(e+1)+"的工作时间不能为空"),{v:!1}):(t.customTimeArray[e].week.forEach((function(t,e){a.week[e]=e})),""==t.customTimeArray[e].start_time?(t.$message.error("工作周期"+(e+1)+"的开始时间不能为空"),{v:!1}):""==t.customTimeArray[e].end_time?(t.$message.error("工作周期"+(e+1)+"的结束时间不能为空"),{v:!1}):t.customTimeArray[e].start_time>t.customTimeArray[e].end_time?(t.$message.error("工作周期"+(e+1)+"的开始时间不得小于结束时间"),{v:!1}):(a.start_time=t.customTimeArray[e].start_time.format("HH:mm"),a.end_time=t.customTimeArray[e].end_time.format("HH:mm"),void t.ruleForm.work_cycle.push(a)))},a=0;a<this.customTimeArray.length;a++){var s=e(a);if("object"===Object(n["a"])(s))return s.v}}for(var r=0;r<this.ruleArray.length;r++)if(1==this.ruleArray[r].employee_type&&""==this.ruleArray[r].employee)return this.$message.error("规则"+(r+1)+"请选择管理员"),!1;this.ruleForm.rule=this.ruleArray,this.ruleForm.id=this.rowId,Object(i["i"])(this.ruleForm).then((function(e){t.$message.success("修改成功"),t.$router.push({path:"/roomQuality/index"})}))},selectDetectTime:function(t){2==this.ruleForm.examinationTime&&""==this.customTimeArray&&this.addCycleEvent()},addCycleEvent:function(){var t={week:[],start_time:"",end_time:""};t.week=this.customTimeValue,this.customTimeArray.push(t)},customDelEvent:function(t){this.customTimeArray.splice(t,1)},delRuleEvent:function(t){this.ruleArray.splice(t,1)},addRuleEvent:function(){if(this.ruleArray.length<8){var t={num:30,time_type:1,employee_type:1,employee:[],showEmployee:[]};this.ruleArray.push(t)}}}},d=m,p=(a("bd56"),a("2877")),v=Object(p["a"])(d,s,r,!1,null,null,null);e["default"]=v.exports},"7bd3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("a-card",{attrs:{title:"添加质检规则",bordered:!1}},[r("a-form-model",e._b({ref:"ruleForm",attrs:{model:e.ruleForm}},"a-form-model",e.layout,!1),[r("a-form-model-item",{attrs:{"has-feedback":"",label:"规则名称",prop:"pass","wrapper-col":{span:10}}},[r("a-input",{attrs:{autocomplete:"off",maxLength:20,placeholder:"名称不会展示给用户，用于企业记录渠道名称或使用场景"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",label:"添加群聊",prop:"pass"}},[r("div",{staticClass:"addGroup"},[r("a-button",{staticClass:"addBtngroup",on:{click:function(t){return e.$refs.selectGroup.show()}}},[r("a-icon",{attrs:{type:"plus"}}),e._v("添加群聊")],1)],1),r("div",{staticClass:"chosenGroup"},e._l(e.ruleForm.rooms,(function(t,s){return r("div",{key:s,staticClass:"chosenElement"},[r("img",{attrs:{src:a("8522"),alt:""}}),r("div",{staticClass:"chosenRight"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"num"},[e._v(e._s(t.contact_num)+"/"+e._s(t.roomMax))])]),0==t.audit_status?r("a-popover",{attrs:{placement:"topLeft"}},[r("template",{slot:"content"},[r("span",[e._v("此群聊内没有员工开通消息存档功能")])]),r("div",{staticClass:"notallyWith"})],2):e._e()],1)})),0)]),r("selectGroup",{ref:"selectGroup",on:{change:e.receiveGroup}}),r("a-form-model-item",{attrs:{label:"质检时间"}},[r("a-radio-group",{model:{value:e.ruleForm.quality_type,callback:function(t){e.$set(e.ruleForm,"quality_type",t)},expression:"ruleForm.quality_type"}},[r("a-radio",{attrs:{value:1}},[e._v("全天检测")]),r("a-radio",{attrs:{value:2}},[e._v("自定义质检时间")])],1),2==e.ruleForm.quality_type?r("div",{staticClass:"customizeTime"},[r("div",{staticClass:"customizeTips"},[r("div",[e._v("自动上下线")]),r("div",{staticClass:"tipsRule"},[r("div",[e._v("1、可用于员工早晚班等不同上下班时间段使用；")]),r("div",[e._v("2、员工在非线上时间将不会收到推送提醒。")])])]),e._l(e.customTimeArray,(function(t,a){return r("div",{key:a,staticClass:"customizeContent"},[r("div",{staticClass:"customDate"},[r("div",[e._v("工作周期"+e._s(a+1)+"：")]),r("div",{staticClass:"cycleOption"},[r("a-tree-select",{staticStyle:{width:"100%"},attrs:{"tree-data":e.treeData,"tree-checkable":"",placeholder:"请选择工作周期"},model:{value:t.week,callback:function(a){e.$set(t,"week",a)},expression:"item.week"}}),r("span",{staticClass:"downIcon"},[r("a-icon",{attrs:{type:"down"}})],1)],1)]),r("div",{staticClass:"customTime"},[r("div",[e._v("质检时间：")]),r("div",[r("a-time-picker",{attrs:{format:"HH:mm",placeholder:"开始时间"},model:{value:t.start_time,callback:function(a){e.$set(t,"start_time",a)},expression:"item.start_time"}}),e._v(" ~ "),r("a-time-picker",{attrs:{format:"HH:mm",placeholder:"结束时间"},model:{value:t.end_time,callback:function(a){e.$set(t,"end_time",a)},expression:"item.end_time"}})],1)]),1!=e.customTimeArray.length?r("div",{staticClass:"customDelBtn",on:{click:function(t){return e.customDelEvent(a)}}},[r("a-icon",{attrs:{type:"delete"}})],1):e._e()])})),r("div",{staticClass:"addCycleBtn",on:{click:e.addCycleEvent}},[r("a-icon",{staticClass:"addBtnIcon",attrs:{type:"plus-circle"}}),e._v("添加其他工作时间")],1)],2):e._e()],1),r("a-form-model-item",{attrs:{label:"添加规则"}},[r("div",{staticClass:"addRuleRow"},[r("div",{staticClass:"addRuleCont"},e._l(e.ruleArray,(function(t,a){return r("div",{key:a,staticClass:"addRuleContRow"},[r("div",[0!=a?r("a-icon",{staticClass:"delRuleBtn",attrs:{type:"minus-circle"},on:{click:function(t){return e.delRuleEvent(a)}}}):e._e(),e._v(" 规则"+e._s(a+1)+"：为超过 "),r("a-input-number",{attrs:{id:"inputNumber",min:1},model:{value:t.num,callback:function(a){e.$set(t,"num",a)},expression:"item.num"}}),r("a-select",{staticStyle:{width:"120px","margin-left":"10px"},model:{value:t.time_type,callback:function(a){e.$set(t,"time_type",a)},expression:"item.time_type"}},[r("a-select-option",{attrs:{value:1}},[e._v("分钟")]),r("a-select-option",{attrs:{value:2}},[e._v("时")]),r("a-select-option",{attrs:{value:3}},[e._v("天")])],1),e._v(" 未回复客户消息的群聊， ")],1),r("div",{staticClass:"choiceRow"},[e._v("给 "),r("a-select",{staticClass:"choice_admin",staticStyle:{width:"200px"},model:{value:t.employee_type,callback:function(a){e.$set(t,"employee_type",a)},expression:"item.employee_type"}},[r("a-select-option",{attrs:{value:1}},[e._v("管理员/部门管理员")]),r("a-select-option",{attrs:{value:2}},[e._v("客户群群主")])],1),r("div",{staticStyle:{"margin-left":"211px",display:"flex"}},[1==t.employee_type?r("div",{staticClass:"choiceAdmin",on:{click:function(t){return e.showMemberPop(a)}}},[0==t.showEmployee.length?r("span",{staticClass:"operationTips"},[e._v("请选择管理员/部门管理员")]):e._e(),r("div",e._l(t.showEmployee,(function(t,a){return r("a-tag",{key:a},[e._v(e._s(t.name))])})),1)]):e._e(),e._v(" 发送行为 ")])],1)])})),0),r("selectMember",{ref:"selectMember",on:{change:e.effectStaff}}),e.ruleArray.length<8?r("div",{staticClass:"addRuleBtn",on:{click:e.addRuleEvent}},[r("a-icon",{staticClass:"addBtnIcon",attrs:{type:"plus-circle"}}),e._v("添加规则 "),r("span",{staticClass:"addLimit"},[e._v("(最多设置8个规则)")])],1):r("div",{staticClass:"addRuleBtn2"},[r("a-icon",{staticClass:"addBtnIcon",attrs:{type:"plus-circle"}}),e._v("添加规则"),r("span",{staticClass:"addLimit"},[e._v("(最多设置8个规则)")])],1)],1)]),r("a-form-model-item",{attrs:{label:"群聊质检白名单"}},[r("a-row",[r("a-switch",{staticStyle:{"margin-right":"10px"},attrs:{defaultChecked:1==e.ruleForm.white_list_status,size:"small"},on:{change:function(){1==t.ruleForm.white_list_status?t.ruleForm.white_list_status=0:t.ruleForm.white_list_status=1}}}),e.ruleForm.white_list_status?r("span",[e._v("已开启")]):r("span",[e._v("已关闭")]),r("span",{staticClass:"whiteTips"},[e._v("（多条关键词，可同时生效）")])],1),e.ruleForm.white_list_status?r("div",{staticClass:"addkeyRow"},[e.inputVisible?r("a-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{maxLength:8},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("a-button",{staticClass:"button-new-tag",on:{click:e.showInput}},[e._v("+ 添加关键词")]),e._l(e.ruleForm.keyword,(function(t){return r("a-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])}))],2):e._e()],1),r("a-form-model-item",{attrs:{"wrapper-col":{span:14}}},[r("a-button",{staticClass:"establishBtn",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("创建")])],1)],1)],1)],1)},r=[],n=a("53ca"),i=(a("d3b7"),a("159b"),a("a434"),a("b0c0"),a("6380")),o=a("0e64"),l=a("4a04"),u={components:{selectGroup:o["a"],selectMember:l["a"]},data:function(){return{customTimeArray:[{week:["周一","周二","周三","周四","周五","周六","周日"],start_time:"",end_time:""}],ruleArray:[{num:30,time_type:1,employee_type:1,employee:[],showEmployee:[]}],indexRuleNum:0,inputVisible:!1,inputValue:"",treeData:[{title:"周一",value:"周一",key:"周一"},{title:"周二",value:"周二",key:"周二"},{title:"周三",value:"周三",key:"周三"},{title:"周四",value:"周四",key:"周四"},{title:"周五",value:"周五",key:"周五"},{title:"周六",value:"周六",key:"周六"},{title:"周日",value:"周日",key:"周日"}],customTimeValue:["周一","周二","周三","周四","周五","周六","周日"],ruleForm:{name:"",rooms:[],quality_type:1,work_cycle:[],rule:[],white_list_status:0,keyword:[]},layout:{labelCol:{span:3},wrapperCol:{span:14}}}},methods:{showMemberPop:function(t){this.indexRuleNum=t,this.$refs.selectMember.show()},receiveGroup:function(t){this.ruleForm.rooms=t},effectStaff:function(t){var e=[];t.forEach((function(t,a){e[a]=t.id})),this.ruleArray[this.indexRuleNum].showEmployee=t,this.ruleArray[this.indexRuleNum].employee=e},handleClose:function(t){this.ruleForm.keyword.splice(this.ruleForm.keyword.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.ruleForm.keyword.push(t),this.inputVisible=!1,this.inputValue=""},submitForm:function(){var t=this;if(""==this.ruleForm.name)return this.$message.error("规则名称不能为空"),!1;if(""==this.ruleForm.rooms)return this.$message.error("群聊不能为空"),!1;if(2==this.ruleForm.quality_type){this.ruleForm.work_cycle=[];for(var e=function(e){var a={week:[],start_time:"",end_time:""};return""==t.customTimeArray[e].week?(t.$message.error("工作周期"+(e+1)+"的工作时间不能为空"),{v:!1}):(t.customTimeArray[e].week.forEach((function(t,e){a.week[e]=e})),""==t.customTimeArray[e].start_time?(t.$message.error("工作周期"+(e+1)+"的开始时间不能为空"),{v:!1}):""==t.customTimeArray[e].end_time?(t.$message.error("工作周期"+(e+1)+"的结束时间不能为空"),{v:!1}):t.customTimeArray[e].start_time>t.customTimeArray[e].end_time?(t.$message.error("工作周期"+(e+1)+"的开始时间不得小于结束时间"),{v:!1}):(a.start_time=t.customTimeArray[e].start_time.format("HH:mm"),a.end_time=t.customTimeArray[e].end_time.format("HH:mm"),void t.ruleForm.work_cycle.push(a)))},a=0;a<this.customTimeArray.length;a++){var s=e(a);if("object"===Object(n["a"])(s))return s.v}}for(var r=0;r<this.ruleArray.length;r++)if(1==this.ruleArray[r].employee_type&&""==this.ruleArray[r].employee)return this.$message.error("规则"+(r+1)+"请选择管理员"),!1;this.ruleForm.rule=this.ruleArray,Object(i["h"])(this.ruleForm).then((function(e){t.$message.success("创建成功"),t.$router.push({path:"/roomQuality/index"})}))},addCycleEvent:function(){var t={week:[],start_time:"",end_time:""};t.week=this.customTimeValue,this.customTimeArray.push(t)},customDelEvent:function(t){this.customTimeArray.splice(t,1)},delRuleEvent:function(t){this.ruleArray.splice(t,1)},addRuleEvent:function(){if(this.ruleArray.length<8){var t={num:30,time_type:1,employee_type:1,employee:[],showEmployee:[]};this.ruleArray.push(t)}}}},c=u,m=(a("35c5"),a("2877")),d=Object(m["a"])(c,s,r,!1,null,null,null);e["default"]=d.exports},8522:function(t,e,a){t.exports=a.p+"assets/avatar-room-default.67bead38.svg"},"9c58":function(t,e,a){},"9d3f":function(t,e,a){},b33c:function(t,e,a){},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var s=a("06c5");function r(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(s["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(l)throw i}}}}},bd56:function(t,e,a){"use strict";a("5620")},db14d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("div",{staticClass:"pageTop"},[s("a-button",{attrs:{type:"primary"},on:{click:function(){t.$router.push({path:"/roomQuality/newRule"})}}},[e._v("新建规则")]),s("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入规则名称搜索","allow-clear":""},on:{search:e.searchRuleName,change:e.emptyRule},model:{value:e.nameRule,callback:function(t){e.nameRule=t},expression:"nameRule"}})],1),s("a-card",{staticClass:"pageContent"},[s("a-table",{attrs:{columns:e.table.columns,"data-source":e.table.data,pagination:e.pagination},scopedSlots:e._u([{key:"rooms",fn:function(t){return s("div",{},e._l(t,(function(t,a){return s("a-tag",{key:a},[e._v(e._s(t.name))])})),1)}},{key:"create_user",fn:function(t){return s("div",{},[s("a-tag",[s("a-icon",{attrs:{type:"user"}}),e._v(e._s(t))],1)],1)}},{key:"status",fn:function(t,a){return s("div",{},[s("a-switch",{attrs:{"default-checked":1==t,size:"small"},on:{change:function(t){return e.statusRule(a)}}})],1)}},{key:"action",fn:function(t,a){return s("div",{},[s("a",{on:{click:function(t){return e.$router.push("/roomQuality/detail?rowId="+a.id)}}},[e._v("详情")]),s("a-divider",{attrs:{type:"vertical"}}),s("a-dropdown",[s("a",{staticClass:"ant-dropdown-link"},[e._v(" 编辑"),s("a-icon",{attrs:{type:"down"}})],1),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",[s("a",{on:{click:function(t){return e.$router.push("/roomQuality/edit?rowId="+a.id)}}},[e._v("修改")])]),s("a-menu-item",[s("a",{on:{click:function(t){return e.delTableRow(a)}}},[e._v("删除")])])],1)],1)],1)}}])})],1)],1)},r=[],n=a("6380"),i={data:function(){return{nameRule:"",table:{columns:[{key:"",dataIndex:"name",title:"规则名称"},{key:"rooms",dataIndex:"rooms",title:"使用群聊",scopedSlots:{customRender:"rooms"}},{key:"create_user",dataIndex:"create_user",title:"创建人",scopedSlots:{customRender:"create_user"}},{key:"created_at",dataIndex:"created_at",title:"创建时间"},{key:"status",dataIndex:"status",title:"开关",scopedSlots:{customRender:"status"}},{key:"action",dataIndex:"action",title:"操作",width:"200px",scopedSlots:{customRender:"action"}}],data:[]},pagination:{total:0,current:1,pageSize:10,showSizeChanger:!0}}},created:function(){this.getTableData()},methods:{statusRule:function(t){var e=0;0==t.status&&(e=1),Object(n["g"])({id:t.id,status:e}).then((function(t){}))},delTableRow:function(t){var e=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(n["b"])({id:t.id}).then((function(t){e.$message.success("删除成功"),e.getTableData()}))}})},getTableData:function(t){var e=this;Object(n["c"])(t).then((function(t){e.table.data=t.data.list}))},searchRuleName:function(){this.getTableData({name:this.nameRule})},emptyRule:function(t){""==this.nameRule&&this.getTableData()}}},o=i,l=(a("fd2e"),a("2877")),u=Object(l["a"])(o,s,r,!1,null,null,null);e["default"]=u.exports},dc38:function(t,e,a){"use strict";a("df1e")},df1e:function(t,e,a){},fd2e:function(t,e,a){"use strict";a("b33c")}}]);