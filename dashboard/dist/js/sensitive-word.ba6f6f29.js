(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sensitive-word"],{"03e5":function(t,e,n){"use strict";n("c2f9")},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f");var o=n("6b75");function r(t,e){if(t){if("string"===typeof t)return Object(o["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(o["a"])(t,e):void 0}}},"28e5":function(t,e,n){"use strict";n("7842")},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("6b75");function r(t){if(Array.isArray(t))return Object(o["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||a(t)||Object(i["a"])(t)||s()}},"59e4":function(t,e,n){"use strict";n.d(e,"C",(function(){return r})),n.d(e,"k",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"x",(function(){return s})),n.d(e,"D",(function(){return c})),n.d(e,"u",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"y",(function(){return l})),n.d(e,"A",(function(){return p})),n.d(e,"l",(function(){return m})),n.d(e,"t",(function(){return h})),n.d(e,"s",(function(){return f})),n.d(e,"B",(function(){return g})),n.d(e,"e",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return y})),n.d(e,"z",(function(){return k})),n.d(e,"b",(function(){return x})),n.d(e,"w",(function(){return I})),n.d(e,"q",(function(){return w})),n.d(e,"o",(function(){return _})),n.d(e,"v",(function(){return D})),n.d(e,"a",(function(){return C})),n.d(e,"n",(function(){return G})),n.d(e,"j",(function(){return S})),n.d(e,"p",(function(){return O})),n.d(e,"g",(function(){return j})),n.d(e,"h",(function(){return W})),n.d(e,"m",(function(){return L})),n.d(e,"r",(function(){return T}));var o=n("b775");function r(t){return Object(o["b"])({url:"/workRoomGroup/index",method:"get",params:t})}function a(t){return Object(o["b"])({url:"/workRoomGroup/destroy",method:"delete",data:t})}function i(t){return Object(o["b"])({url:"/workRoomGroup/store",method:"post",data:t})}function s(t){return Object(o["b"])({url:"/workRoomGroup/update",method:"put",data:t})}function c(t){return Object(o["b"])({url:"/workRoom/index",method:"get",params:t})}function u(t){return Object(o["b"])({url:"/workRoom/syn",method:"put",data:t})}function d(t){return Object(o["b"])({url:"/workRoom/batchUpdate",method:"put",data:t})}function l(t){return Object(o["b"])({url:"/workContactRoom/index",method:"get",params:t})}function p(t){return Object(o["b"])({url:"/workEmployeeDepartment/memberIndex",method:"get",params:t})}function m(t){return Object(o["b"])({url:"/workDepartment/index",method:"get",params:t})}function h(t){return Object(o["b"])({url:"/workRoom/statisticsIndex",method:"get",params:t})}function f(t){return Object(o["b"])({url:"/workRoom/statistics",method:"get",params:t})}function g(t){return Object(o["b"])({url:"/workRoomAutoPull/index",method:"get",params:t})}function v(t){return Object(o["b"])({url:"/workRoomAutoPull/update",method:"put",data:t})}function b(t){return Object(o["b"])({url:"/workRoomAutoPull/store",method:"post",data:t})}function y(t){return Object(o["b"])({url:"/workRoomAutoPull/show",method:"get",params:t})}function k(t){return Object(o["b"])({url:"/workContactTagGroup/index",method:"get",params:t})}function x(t){return Object(o["b"])({url:"/workContactTag/store",method:"post",data:t})}function I(t){return Object(o["b"])({url:"/workContactTag/allTag",method:"get",params:t})}function w(t){return Object(o["b"])({url:"/workRoom/roomIndex",method:"get",params:t})}function _(t){return Object(o["b"])({url:"/roomTagPull/roomList",method:"get",params:t})}function D(t){return Object(o["b"])({url:"/roomTagPull/index",method:"get",params:t})}function C(t){return Object(o["b"])({url:"/roomTagPull/store",method:"POST",data:t})}function G(t){return Object(o["b"])({url:"/roomTagPull/show",method:"GET",params:t})}function S(t){return Object(o["b"])({url:"/roomTagPull/destroy",method:"DELETE",data:t})}function O(t){return Object(o["b"])({url:"/roomTagPull/remindSend",method:"GET",params:t})}function j(t){return Object(o["b"])({url:"/roomTagPull/chooseContact",method:"GET",params:t})}function W(t){return Object(o["b"])({url:"/roomTagPull/filterContact",method:"POST",data:t})}function L(t){return Object(o["b"])({url:"/roomTagPull/showContact",method:"GET",params:t})}function T(t){return Object(o["b"])({url:"/contactMessageBatchSend/showRoom",method:"GET",params:t})}},6323:function(t,e,n){"use strict";n("8492")},"6b75":function(t,e,n){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}n.d(e,"a",(function(){return o}))},7842:function(t,e,n){},8492:function(t,e,n){},"8faf":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"wrapper-box"},[o("div",{staticClass:"lists",attrs:{split:!1}},[o("a-alert",{attrs:{"show-icon":!1,message:"1、当敏感词被不启用时，曾经所触发的内容依然在列表中可见。",banner:""}}),o("a-alert",{attrs:{"show-icon":!1,message:"2、显示历史上开启会话存档的企业成员。若曾经设置过某员工违规提醒，现在对该员工关闭、不再开启会话存档或是该员工离职，那么其历史触发敏感词的监控内容，依然在列表中可见。",banner:""}}),o("a-alert",{attrs:{"show-icon":!1,message:"3、显示历史上设置过违规提醒的群聊。如曾经设置过某群聊违规提醒，现在该群聊不再设置，那么其历史触发敏感词的监控内容，依然在列表中可见。",banner:""}})],1),o("a-card",[o("a-form",{attrs:{"label-col":{span:7},"wrapper-col":{span:14}}},[o("a-row",{attrs:{gutter:16}},[o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:"关键词："}},[o("a-input",{model:{value:e.screentData.keyWords,callback:function(t){e.$set(e.screentData,"keyWords",t)},expression:"screentData.keyWords"}})],1)],1),o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:"选择分组："}},[o("a-select",{on:{change:e.onChange},model:{value:e.screentData.groupId,callback:function(t){e.$set(e.screentData,"groupId",t)},expression:"screentData.groupId"}},e._l(e.searchGroupList,(function(t){return o("a-select-option",{key:t.groupId},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:""}},[o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@search",expression:"'/sensitiveWords/index@search'"}],attrs:{type:"primary"},on:{click:function(){t.pagination.current=1,t.isSearch=!0,t.getTableData()}}},[e._v("查询")]),o("a-button",{staticStyle:{marginLeft:"5px"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),o("div",{staticClass:"btn-box"},[o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@edit",expression:"'/sensitiveWords/index@edit'"}],attrs:{type:"primary"},on:{click:function(){t.editGroupDis=!0}}},[e._v("修改分组")]),o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@add",expression:"'/sensitiveWords/index@add'"}],attrs:{type:"primary"},on:{click:function(){t.addGroupDis=!0}}},[e._v("新建分组")]),o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@addWord",expression:"'/sensitiveWords/index@addWord'"}],attrs:{type:"primary"},on:{click:function(){t.visible=!0}}},[e._v("新建敏感词")])],1),o("a-table",{attrs:{bordered:"",columns:e.columns,"data-source":e.tableData,rowKey:function(t){return t.sensitiveWordId},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t,n){return o("div",{},[1==n.status?o("span",[e._v("开启")]):e._e(),2==n.status?o("span",[e._v("关闭")]):e._e()])}},{key:"action",fn:function(t,n){return o("div",{},[[2==n.status?o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@close",expression:"'/sensitiveWords/index@close'"}],attrs:{type:"link"},on:{click:function(t){return e.changeStatus(1,n.sensitiveWordId)}}},[e._v("开启")]):e._e(),1==n.status?o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@close",expression:"'/sensitiveWords/index@close'"}],attrs:{type:"link"},on:{click:function(t){return e.changeStatus(2,n.sensitiveWordId)}}},[e._v("关闭")]):e._e(),o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@delete",expression:"'/sensitiveWords/index@delete'"}],attrs:{type:"link"},on:{click:function(t){return e.delSensitiveWord(n.sensitiveWordId)}}},[e._v("删除")]),o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWords/index@move",expression:"'/sensitiveWords/index@move'"}],attrs:{type:"link"},on:{click:function(t){return e.moveGroup(n.sensitiveWordId,n.groupId)}}},[e._v("移动")])]],2)}}])})],1),o("a-modal",{attrs:{title:"新建敏感词",visible:e.visible},on:{cancel:function(){t.visible=!1,t.sensitiveWordsData={}}}},[o("a-form-model",{attrs:{"label-col":{span:6},"wrapper-col":{span:14}}},[o("a-form-model-item",{attrs:{label:"选择分组："}},[o("a-select",{model:{value:e.sensitiveWordsData.groupId,callback:function(t){e.$set(e.sensitiveWordsData,"groupId",t)},expression:"sensitiveWordsData.groupId"}},e._l(e.groupList,(function(t){return o("a-select-option",{key:t.groupId},[e._v(" "+e._s(t.name)+" ")])})),1)],1),o("a-form-model-item",{attrs:{label:"敏感词名称："}},[o("p",[e._v("每个敏感词名称最多6个字。同时新建多个敏感词时，请用“空格”隔开")]),o("a-input",{model:{value:e.sensitiveWordsData.name,callback:function(t){e.$set(e.sensitiveWordsData,"name",t)},expression:"sensitiveWordsData.name"}})],1)],1),o("template",{slot:"footer"},[o("a-button",{on:{click:function(){t.visible=!1,t.sensitiveWordsData={}}}},[e._v("取消")]),o("a-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.addSenistive}},[e._v("确定")])],1)],2),o("a-modal",{attrs:{title:"新建分组",visible:e.addGroupDis},on:{cancel:function(){t.addGroupDis=!1,t.newGroupName=""}}},[o("a-form-model",{attrs:{"label-col":{span:6},"wrapper-col":{span:14}}},[o("a-form-model-item",{attrs:{label:"分组名称："}},[o("p",[e._v("每个分组名称最多15个字。同时新建多个分组时，请用“空格”隔开")]),o("a-input",{model:{value:e.newGroupName,callback:function(t){e.newGroupName=t},expression:"newGroupName"}})],1)],1),o("template",{slot:"footer"},[o("a-button",{on:{click:function(){t.addGroupDis=!1,t.newGroupName=""}}},[e._v("取消")]),o("a-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.addGroup}},[e._v("确定")])],1)],2),o("a-modal",{attrs:{title:"修改分组",visible:e.editGroupDis},on:{cancel:function(){t.editGroupDis=!1,t.editGroupData={}}}},[o("a-form-model",{attrs:{"label-col":{span:6},"wrapper-col":{span:14}}},[o("a-form-model-item",{attrs:{label:"选择分组："}},[o("a-select",{model:{value:e.editGroupData.groupId,callback:function(t){e.$set(e.editGroupData,"groupId",t)},expression:"editGroupData.groupId"}},e._l(e.groupList,(function(t){return o("a-select-option",{key:t.groupId},[e._v(" "+e._s(t.name)+" ")])})),1)],1),o("a-form-model-item",{attrs:{label:"修改分组名称："}},[o("a-input",{model:{value:e.editGroupData.name,callback:function(t){e.$set(e.editGroupData,"name",t)},expression:"editGroupData.name"}})],1)],1),o("template",{slot:"footer"},[o("a-button",{on:{click:function(){t.editGroupDis=!1,t.editGroupData={}}}},[e._v("取消")]),o("a-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.editGroup}},[e._v("确定")])],1)],2),o("div",{ref:"mbox",staticClass:"mbox"}),o("a-modal",{staticClass:"move-box",attrs:{getContainer:function(){return e.$refs.mbox},title:"移动分组",visible:e.moveGroupDis},on:{cancel:function(){t.moveGroupDis=!1}}},[o("div",{staticClass:"group-box"},e._l(e.groupList,(function(t){return o("div",{key:t.groupId,class:e.moveGroupId==t.groupId?"active":"",on:{click:function(n){return e.changeGroup(t.groupId)}}},[e._v(" "+e._s(t.name)+" ")])})),0),o("template",{slot:"footer"},[o("a-button",{on:{click:function(){t.moveGroupDis=!1,t.moveGroupId="",t.moveSensitiveId=""}}},[e._v("取消")]),o("a-button",{attrs:{type:"primary"},on:{click:e.moveGroupDefined}},[e._v("确定")])],1)],2)],1)},r=[],a=(n("a9e3"),n("d81d"),n("b0c0"),n("ac1f"),n("1276"),n("5319"),n("a15b"),n("a630"),n("3ca3"),n("d3b7"),n("6062"),n("ddb0"),n("b775"));function i(t){return Object(a["b"])({url:"/sensitiveWord/index",method:"get",params:t})}function s(t){return Object(a["b"])({url:"/sensitiveWord/destroy",method:"delete",data:t})}function c(t){return Object(a["b"])({url:"/sensitiveWord/statusUpdate",method:"put",data:t})}function u(t){return Object(a["b"])({url:"/sensitiveWord/move",method:"put",data:t})}function d(t){return Object(a["b"])({url:"/sensitiveWord/store",method:"post",data:t})}function l(t){return Object(a["b"])({url:"/sensitiveWordGroup/update",method:"put",data:t})}function p(t){return Object(a["b"])({url:"/sensitiveWordGroup/select",method:"get",params:t})}function m(t){return Object(a["b"])({url:"/sensitiveWordGroup/store",method:"post",data:t})}var h={data:function(){return{visible:!1,btnLoading:!1,addGroupDis:!1,editGroupDis:!1,moveGroupDis:!1,columns:[{align:"center",title:"敏感词",dataIndex:"name"},{align:"center",title:"员工触发次数",dataIndex:"employeeNum"},{align:"center",title:"客户触发次数",dataIndex:"contactNum"},{align:"center",title:"创建时间",dataIndex:"createdAt"},{align:"center",title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{align:"center",title:"操作",scopedSlots:{customRender:"action"}}],tableData:[],pagination:{total:0,current:1,pageSize:10,showSizeChanger:!0},screentData:{},groupId:"",groupList:[],sensitiveWordsData:{},newGroupName:"",editGroupData:{},moveSensitiveId:"",moveGroupId:"",searchGroupList:[],isSearch:!1}},created:function(){this.getTableData(),this.getGroupList()},methods:{onChange:function(){this.$forceUpdate()},reset:function(){this.screentData={keyWords:"",groupId:0},this.isSearch=!1},getTableData:function(){var t=this,e={};e=this.isSearch?{keyWords:this.screentData.keyWords,groupId:this.screentData.groupId,page:this.pagination.current,perPage:this.pagination.pageSize}:{keyWords:"",groupId:0,page:this.pagination.current,perPage:this.pagination.pageSize},i(e).then((function(e){t.tableData=e.data.list,t.pagination.total=Number(e.data.page.total)}))},handleTableChange:function(t){var e=t.current,n=t.pageSize;this.pagination.current=e,this.pagination.pageSize=n,this.getTableData()},getGroupList:function(){var t=this,e={name:"全部",groupId:0},n=[];n.push(e),p().then((function(e){t.groupList=e.data,e.data.map((function(t){n.push(t)})),t.searchGroupList=n,t.screentData.groupId=0}))},addSenistive:function(){var t=this;if(void 0!=this.sensitiveWordsData.groupId)if(void 0!=this.sensitiveWordsData.name){var e=/\s+/g,n=this.sensitiveWordsData.name.replace(e," ").split(" "),o=!1,r=!1;if(n.map((function(t){""==t&&(r=!0),t.length>6&&(o=!0)})),o)this.$message.error("每个敏感词最多6个字");else if(r)this.$message.error("请输入敏感词");else{var a={groupId:this.sensitiveWordsData.groupId,name:n.join(",")};this.btnLoading=!0,d(a).then((function(e){t.btnLoading=!1,t.visible=!1,t.sensitiveWordsData={},t.getTableData()}))}}else this.$message.error("请输入敏感词名称");else this.$message.error("请选择分组")},addGroup:function(){var t=this,e=/\s+/g,n=this.newGroupName.replace(e," ").split(" "),o=!1,r=!1,a=!1;if(n.length>1){var i=Array.from(new Set(n)).length;i<n.length&&(o=!0)}n.map((function(e,n){""==e&&(a=!0),e.length>15&&(t.$message.error("分组名称最多15个字"),r=!0)})),r||(a?this.$message.error("请输入正确的分组名称"):o?this.$message.error("分组名称重复"):(this.btnLoading=!0,m({name:n.join(",")}).then((function(e){t.btnLoading=!1,t.addGroupDis=!1,t.newGroupName="",t.getGroupList()})).catch((function(e){t.btnLoading=!1}))))},editGroup:function(){var t=this,e=/\s+/g,n=this.editGroupData.name;void 0!=this.editGroupData.groupId?""!=n&&void 0!=n?e.test(n)?this.$message.error("请输入正确的分组名称"):(this.btnLoading=!0,l(this.editGroupData).then((function(e){t.editGroupDis=!1,t.btnLoading=!1,t.editGroupData={},t.getGroupList()})).catch((function(e){t.btnLoading=!1}))):this.$message.error("请输入分组名称"):this.$message.error("请选择分组")},changeStatus:function(t,e){var n="",o=this;n=1==t?"开启":"关闭",this.$confirm({title:"是否".concat(n,"当前的敏感词"),content:"",okText:"确定",cancelText:"取消",onOk:function(){c({sensitiveWordId:e,status:t}).then((function(t){o.getTableData()}))},onCancel:function(){}})},delSensitiveWord:function(t){var e=this;this.$confirm({title:"是否删除当前的敏感词",content:"",okText:"确定",cancelText:"取消",onOk:function(){s({sensitiveWordId:t}).then((function(t){e.getTableData()}))},onCancel:function(){}})},moveGroup:function(t,e){this.moveGroupDis=!0,this.moveSensitiveId=t,this.moveGroupId=e},changeGroup:function(t){this.moveGroupId=t},moveGroupDefined:function(){var t=this;u({sensitiveWordId:this.moveSensitiveId,groupId:this.moveGroupId}).then((function(e){t.moveGroupDis=!1,t.moveGroupId="",t.moveSensitiveId="",t.getTableData()}))}}},f=h,g=(n("03e5"),n("2877")),v=Object(g["a"])(f,o,r,!1,null,"43482d4c",null);e["default"]=v.exports},c2f9:function(t,e,n){},d68b:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"k",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"h",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return h}));var o=n("b775");function r(t){return Object(o["b"])({url:"/contactFieldPivot/index",method:"get",params:t})}function a(t){return Object(o["b"])({url:"/contactFieldPivot/update",method:"put",data:t})}function i(t){return Object(o["b"])({url:"/workContact/show",method:"get",params:t})}function s(t){return Object(o["b"])({url:"/workContact/update",method:"put",data:t})}function c(t){return Object(o["b"])({url:"/workContact/index",method:"get",params:t})}function u(t){return Object(o["b"])({url:"/workContactTag/allTag",method:"get",params:t})}function d(t){return Object(o["b"])({url:"/workRoom/roomIndex",method:"get",params:t})}function l(t){return Object(o["b"])({url:"/workContact/source",method:"get",params:t})}function p(t){return Object(o["b"])({url:"/contactField/portrait",method:"get",params:t})}function m(t){return Object(o["b"])({url:"/workContact/synContact",method:"put",data:t})}function h(t){return Object(o["b"])({url:"/workContact/track",method:"get",params:t})}},ec0e:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"wrapper"},[o("div",{staticClass:"lists",attrs:{split:!1}},[o("a-alert",{attrs:{"show-icon":!1,message:"1、当敏感词被不启用时，曾经所触发的内容依然在列表中可见。 ",banner:""}}),o("a-alert",{attrs:{"show-icon":!1,message:"2、显示历史上开启会话存档的企业成员。若曾经设置过某员工违规提醒，现在对该员工关闭、不再开启会话存档或是该员工离职，那么其历史触发敏感词的监控内容，依然在列表中可见。",banner:""}}),o("a-alert",{attrs:{"show-icon":!1,message:"3、显示历史上设置过违规提醒的群聊。如曾经设置过某群聊违规提醒，现在该群聊不再设置，那么其历史触发敏感词的监控内容，依然在列表中可见。",banner:""}})],1),o("a-card",[o("a-form",{attrs:{"label-col":{span:7},"wrapper-col":{span:14}}},[o("a-row",{attrs:{gutter:16}},[o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:"选择成员："}},[o("a-button",{on:{click:function(){t.choosePeopleShow=!0}}},[e._v("选择成员")])],1)],1),o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:"选择群聊："}},[o("a-button",{on:{click:function(){t.groupChatModal=!0}}},[e._v("选择群聊")])],1)],1)],1),o("a-row",[o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:"选择分组："}},[o("a-select",{model:{value:e.screentData.intelligentGroupId,callback:function(t){e.$set(e.screentData,"intelligentGroupId",t)},expression:"screentData.intelligentGroupId"}},e._l(e.groupList,(function(t){return o("a-select-option",{key:t.groupId},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:"触发日期："}},[o("a-range-picker",{on:{change:e.onChangeTime},model:{value:e.dataList,callback:function(t){e.dataList=t},expression:"dataList"}})],1)],1),o("a-col",{attrs:{lg:8}},[o("a-form-item",{attrs:{label:""}},[o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWordsMonitor/index@search",expression:"'/sensitiveWordsMonitor/index@search'"}],attrs:{type:"primary"},on:{click:e.getTableData}},[e._v("查询")]),o("a-button",{staticStyle:{marginLeft:"5px"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),o("a-table",{staticStyle:{marginTop:"20px"},attrs:{bordered:"","data-source":e.tableData,rowKey:function(t){return t.sensitiveWordMonitorId},columns:e.columns,pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,n){return o("div",{},[[o("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/sensitiveWordsMonitor/index@detail",expression:"'/sensitiveWordsMonitor/index@detail'"}],attrs:{type:"link"},on:{click:function(t){return e.detailMessage(n.sensitiveWordMonitorId)}}},[e._v("对话详情")])]],2)}}])})],1),o("a-modal",{attrs:{title:"选择企业成员",maskClosable:!1,width:700,visible:e.choosePeopleShow},on:{cancel:function(){t.choosePeopleShow=!1,t.employeeIdList="",t.employees=[],t.searchKey=""}}},[e.choosePeopleShow?o("department",{attrs:{searchKeyEmpty:e.searchKey,checkedKey:e.employees,memberKey:e.employees},on:{change:e.peopleChange,search:e.searchEmp}}):e._e(),o("template",{slot:"footer"},[o("a-button",{on:{click:function(){t.choosePeopleShow=!1,t.employeeIdList="",t.employees=[],t.searchKey=""}}},[e._v("取消")]),o("a-button",{attrs:{type:"primary"},on:{click:function(){t.choosePeopleShow=!1}}},[e._v("确定")])],1)],2),o("a-modal",{attrs:{title:"",width:900,visible:e.detailModal},on:{cancel:function(){t.detailModal=!1}}},[o("a-table",{staticStyle:{width:"800px"},attrs:{bordered:"","data-source":e.detailList,rowKey:function(t,e){return e},columns:e.detailColumns},scopedSlots:e._u([{key:"sender",fn:function(t,n){return o("div",{},[1==n.isTrigger?o("div",{staticStyle:{color:"red"}},[e._v(e._s(n.sender))]):o("div",[e._v(e._s(n.sender))])])}},{key:"sendTime",fn:function(t,n){return o("div",{},[1==n.isTrigger?o("div",{staticStyle:{color:"red"}},[e._v(e._s(n.sendTime))]):o("div",[e._v(e._s(n.sendTime))])])}},{key:"action",fn:function(t,n){return o("div",{},[1==n.isTrigger?o("div",{staticStyle:{color:"red"}},[1==n.msgType?o("div",[e._v(" "+e._s(n.msgContent.content)+" ")]):e._e(),2==n.msgType?o("div",[o("img",{staticStyle:{width:"80px",height:"auto"},attrs:{src:n.msgContent.ossFullPath,alt:""}})]):e._e(),6==n.msgType?o("div",[o("div",{staticClass:"applets-box"},[o("h4",[e._v(e._s(n.msgContent.title))])])]):e._e(),4==n.msgType?o("div",[o("audio",{attrs:{src:n.msgContent.ossFullPath,controls:"controls"}})]):e._e(),n.msgType>7?o("div",[e._v(" "+e._s(n.msgContent.content)+" ")]):e._e()]):o("div",[1==n.msgType?o("div",[e._v(" "+e._s(n.msgContent.content)+" ")]):e._e(),2==n.msgType?o("div",[o("img",{staticStyle:{width:"80px",height:"auto"},attrs:{src:n.msgContent.ossFullPath,alt:""}})]):e._e(),4==n.msgType?o("div",[o("audio",{attrs:{src:n.msgContent.ossFullPath,controls:"controls"}})]):e._e(),5==n.msgType?o("div",[o("video",{staticStyle:{width:"200px",height:"100px"},attrs:{src:n.msgContent.ossFullPath,controls:"controls"}})]):e._e(),6==n.msgType?o("div",[o("div",{staticClass:"applets-box"},[o("h4",[e._v(e._s(n.msgContent.title))])])]):e._e(),n.msgType>7?o("div",[e._v(" "+e._s(n.msgContent.content)+" ")]):e._e()])])}}])}),o("template",{slot:"footer"},[o("a-button",{attrs:{type:"primary"},on:{click:function(){t.detailModal=!1}}},[e._v("确定")])],1)],2),o("div",{ref:"bbox",staticClass:"bbox"},[o("a-modal",{attrs:{getContainer:function(){return e.$refs.bbox},visible:e.groupChatModal,title:"选择群聊"},on:{cancel:function(){t.groupChatModal=!1,t.roomIdList=[],t.groupSearch="",t.getGroupChatList()}}},[o("a-input-search",{attrs:{placeholder:"输入群名称"},on:{search:e.onSearch},model:{value:e.groupSearch,callback:function(t){e.groupSearch=t},expression:"groupSearch"}}),o("div",{staticStyle:{color:"red",marginBottom:"10px"}},[e._v("只显示历史上设置过违规提醒的群聊。如曾经设置过某群聊违规提醒，现在该群聊不再设置，那么其历史触发敏感词的监控内容，依然在列表中可见。")]),o("p",[e._v("全部群聊（"+e._s(e.groupNumber)+"）")]),o("a-table",{attrs:{rowKey:function(t){return t.roomId},columns:e.groupColumns,"data-source":e.groupChatList,"row-selection":{selectedRowKeys:e.roomIdList,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"roomName",fn:function(t,n){return o("div",{},[o("div",{staticClass:"group"},[o("a-icon",{attrs:{type:"user"}}),o("div",[o("span",[e._v(e._s(n.roomName))]),o("span",[e._v(e._s(n.currentNum)+"/"+e._s(n.roomMax))])])],1)])}}])}),o("template",{slot:"footer"},[o("a-button",{on:{click:function(){t.groupChatModal=!1,t.roomIdList=[],t.groupSearch="",t.getGroupChatList()}}},[e._v("取消")]),o("a-button",{attrs:{type:"primary"},on:{click:function(){t.groupChatModal=!1,t.groupSearch="",t.getGroupChatList()}}},[e._v("确定")])],1)],2)],1)],1)},r=[],a=(n("a15b"),n("d81d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"people-wrapper"},[n("div",{staticClass:"people-left"},[n("div",{staticStyle:{color:"red"}},[t._v(" 显示历史上开启会话存档的企业成员。若曾经设置过某员工违规提醒，现在对该员工关闭、不再开启会话存档或是该员工离职，那么其历史触发敏感词的监控内容，依然在列表中可见。 ")]),n("a-input-search",{staticClass:"add-input",attrs:{maxLength:15},on:{search:t.getDepartmentList},model:{value:t.searchKeyWords,callback:function(e){t.searchKeyWords="string"===typeof e?e.trim():e},expression:"searchKeyWords"}}),n("a-tree",{attrs:{"show-icon":"",checkable:"",replaceFields:t.replaceFields,checkStrictly:!1,"expanded-keys":t.expandedKeys,"selected-keys":t.selectedKeys,"tree-data":t.treeData},on:{check:t.onCheck,expand:t.onExpand},model:{value:t.checkedKeys,callback:function(e){t.checkedKeys=e},expression:"checkedKeys"}},[n("a-icon",{attrs:{slot:"folder",type:"folder-open"},slot:"folder"})],1)],1),n("div",{staticClass:"people-right"},[n("div",{staticClass:"total"},[t._v("已选择成员")]),n("ul",t._l(t.choosePeopleKey,(function(e,o){return n("li",{key:o,staticClass:"number"},[n("span",{staticClass:"title"},[t._v(t._s(e.employeeName))]),n("a-icon",{staticClass:"close",attrs:{type:"close"},on:{click:function(n){return t.deletePeople(e,o)}}})],1)})),0)])])}),i=[],s=n("2909"),c=n("1da1"),u=n("5530"),d=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("a434"),n("0481"),n("4069"),n("159b"),n("99af"),n("96cf"),n("59e4")),l=n("5880"),p={name:"Department",props:{memberKey:{type:Array,default:function(){return[]}},checkedKey:{type:Array,default:function(){return[]}},searchKeyEmpty:{type:String,required:!1,default:""}},data:function(){return{searchKeyWords:this.searchKeyEmpty,checkedKeys:[],replaceFields:{title:"name",key:"id",children:"son"},expandedKeys:[],selectedKeys:[],treeData:[],lastCheckdKeys:[],choosePeopleKey:[],departmentIds:[],flatAry:[],unchecked:[]}},watch:{memberKey:function(t){this.choosePeopleKey=t},choosePeopleKey:function(t){this.$emit("change",t)},checkedKey:function(t){this.checkedKeys=t}},computed:Object(u["a"])({},Object(l["mapGetters"])(["corpName"])),created:function(){var t=this;this.choosePeopleKey=this.memberKey,this.checkedKeys=this.checkedKey;var e=this.corpName?0:2e3;setTimeout((function(){t.getDepartmentList()}),e)},methods:{getDepartmentList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={searchKeyWords:t.searchKeyWords},e.prev=1,e.next=4,Object(d["l"])(n);case 4:o=e.sent,r=o.data,a=r.department,i=r.employee,""!==t.searchKeyEmpty&&t.$emit("search",i),t.department=a||[],t.employee=i||[],t.treeData=[{name:t.corpName,nameEn:"company",id:"company",slots:{icon:"folder"},son:a}],e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})))()},onCheck:function(t){var e=this,n=t.length,o=this.lastCheckdKeys.length,r=[],a=[];n>o?(r=t.filter((function(t){return-1==e.lastCheckdKeys.indexOf(t)&&"company"!==t})),this.getWorkDepartmentList(r.join(","))):(a=this.lastCheckdKeys.filter((function(e){return-1==t.indexOf(e)&&"company"!==e})),this.choosePeopleKey=this.choosePeopleKey.filter((function(t){return!a.includes(t.departmentId)}))),this.lastCheckdKeys=t},onExpand:function(t){this.expandedKeys=t},deletePeople:function(t,e){var n=this;this.choosePeopleKey.splice(e,1);var o=this.departmentIds[t.employeeId];o.map((function(t){var e=n.choosePeopleKey.filter((function(e){return e.departmentId==t}));if(0==e.length){var o=n.checkedKeys.indexOf("company");o>-1&&n.checkedKeys.splice(o,1),n.dealDeleteData(t),n.unchecked.map((function(t){var e=n.checkedKeys.indexOf(t);e>-1&&n.checkedKeys.splice(e,1)}))}})),0==this.choosePeopleKey.length&&(this.checkedKeys=[])},dealDeleteData:function(t){var e=this.treeData[0];this.flatAry=[],this.unchecked=[],this.flat(e.son,t);var n=this.unchecked.length;n>1&&this.filterId(this.unchecked[n-1])},filterId:function(t){var e=this;this.flatAry.filter((function(n){if(n.id==t)return e.unchecked.push(t),0!=n.parentId&&e.filterId(n.parentId),!0}))},flat:function(t,e){var n=this;t.forEach((function(t){n.flatAry.push(t),t.id==e&&(0!=t.parentId?n.unchecked=[t.id,t.parentId]:n.unchecked=[t.id]),t.son&&n.flat(t.son,e)}))},getWorkDepartmentList:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var o,r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.departmentIds={},n.prev=1,n.next=4,Object(d["A"])({departmentIds:t});case 4:o=n.sent,r=o.data,r=r||[],e.choosePeopleKey=[].concat(Object(s["a"])(e.choosePeopleKey),Object(s["a"])(r)),a=[],i=[],e.choosePeopleKey.forEach((function(t){var n=i.indexOf(t.employeeId);n>-1?e.departmentIds[t.employeeId].push(t.departmentId):(e.departmentIds[t.employeeId]=[t.departmentId],i.push(t.employeeId),a.push(t))})),e.choosePeopleKey=a,n.next=16;break;case 14:n.prev=14,n.t0=n["catch"](1);case 16:case"end":return n.stop()}}),n,null,[[1,14]])})))()}}},m=p,h=(n("28e5"),n("2877")),f=Object(h["a"])(m,a,i,!1,null,"1e42d988",null),g=f.exports,v=n("d68b"),b=n("b775");function y(t){return Object(b["b"])({url:"/sensitiveWordsMonitor/index",method:"get",params:t})}function k(t){return Object(b["b"])({url:"/sensitiveWordsMonitor/show",method:"get",params:t})}function x(t){return Object(b["b"])({url:"/sensitiveWordGroup/select",method:"get",params:t})}var I={components:{department:g},data:function(){return{searchKey:"",choosePeopleShow:!1,detailModal:!1,groupChatModal:!1,columns:[{align:"center",title:"敏感词",dataIndex:"sensitiveWordName"},{align:"center",title:"触发来源",dataIndex:"sourceText"},{align:"center",title:"触发人",dataIndex:"triggerName"},{align:"center",title:"触发场景",dataIndex:"triggerScenario"},{align:"center",title:"触发时间",dataIndex:"triggerTime"},{align:"center",title:"操作",scopedSlots:{customRender:"action"}}],detailColumns:[{align:"center",title:"发送人",dataIndex:"sender",scopedSlots:{customRender:"sender"}},{align:"center",title:"发送时间",dataIndex:"sendTime",scopedSlots:{customRender:"sendTime"}},{align:"center",title:"发送内容",width:500,scopedSlots:{customRender:"action"}}],groupColumns:[{title:"",dataIndex:"roomName",key:"roomName",align:"center",scopedSlots:{customRender:"roomName"}}],pagination:{total:0,current:1,pageSize:10,showSizeChanger:!0},tableData:[],groupList:[],screentData:{},employeeIdList:"",employees:[],detailList:[],groupChatList:[],groupNumber:"",roomIdList:[],groupSearch:"",dataList:[]}},created:function(){this.getTableData(),this.getGroupList(),this.getGroupChatList()},methods:{getTableData:function(){var t=this,e={employeeId:this.employeeIdList,workRoomId:this.roomIdList.join(","),intelligentGroupId:this.screentData.intelligentGroupId,triggerStart:this.screentData.triggerStart,triggerEnd:this.screentData.triggerEnd,page:this.pagination.current,perPage:this.pagination.pageSize};y(e).then((function(e){t.tableData=e.data.list,t.pagination.total=e.data.page.total}))},handleTableChange:function(t){var e=t.current,n=t.pageSize;this.pagination.current=e,this.pagination.pageSize=n,this.getTableData()},getGroupList:function(){var t=this;x().then((function(e){t.groupList=e.data}))},getGroupChatList:function(){var t=this;Object(v["h"])({name:this.groupSearch}).then((function(e){t.groupChatList=e.data.list,t.groupNumber=e.data.total}))},detailMessage:function(t){var e=this;k({sensitiveWordsMonitorId:t}).then((function(t){e.detailList=t.data,e.detailModal=!0}))},peopleChange:function(t){var e=[];t.map((function(t){e.push(t.employeeId)})),this.employeeIdList=e.join(",")},searchEmp:function(t){0===t.length?this.employeeIdList="空":this.employeeIdList=t[0].id},onChangeTime:function(t,e){this.screentData.triggerStart=e[0],this.screentData.triggerEnd=e[1]},onSearch:function(t){this.groupSearch=t,this.getGroupChatList()},onSelectChange:function(t){this.roomIdList=t},reset:function(){this.screentData={},this.roomIdList=[],this.employeeIdList="",this.employees=[],this.pagination.current=1,this.dataList=[]}}},w=I,_=(n("6323"),Object(h["a"])(w,o,r,!1,null,"40d5c078",null));e["default"]=_.exports}}]);