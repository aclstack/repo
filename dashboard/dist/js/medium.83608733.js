(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["medium"],{"0b67":function(t,e,a){t.exports=a.p+"img/applets.1a8d9ca5.png"},"0da6":function(t,e,a){},"132d":function(t,e,a){"use strict";a("f68e")},"15e2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"material-library"},[n("a-row",[n("a-col",[n("a-modal",{attrs:{title:"新增分组",visible:e.visible},on:{cancel:function(){t.visible=!1,t.groupName=""}}},[n("a-input",{attrs:{maxLength:15,placeholder:"请输入分组名（不得超过15个字符）"},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),n("template",{slot:"footer"},[n("a-button",{key:"back",on:{click:function(){t.visible=!1,t.groupName=""}}},[e._v(" 取消 ")]),n("a-button",{key:"submit",attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.addGroup}},[e._v(" 确定 ")])],1)],2),n("a-modal",{attrs:{title:"修改分组",visible:e.editGroupModal},on:{cancel:function(){t.editGroupModal=!1,t.editGroupId="",t.editGroupName=""}}},[n("a-form-model",{attrs:{"label-col":{span:5},"wrapper-col":{span:14}}},[n("a-form-model-item",{attrs:{label:"选择分组"}},[n("a-select",{model:{value:e.editGroupId,callback:function(t){e.editGroupId=t},expression:"editGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id,attrs:{disabled:0==t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"修改分组名称"}},[n("a-input",{attrs:{maxLength:15,placeholder:"请输入分组名（不得超过15个字符）"},model:{value:e.editGroupName,callback:function(t){e.editGroupName=t},expression:"editGroupName"}})],1)],1),n("template",{slot:"footer"},[n("a-button",{key:"back",on:{click:function(){t.editGroupModal=!1,t.editGroupId="",t.editGroupName=""}}},[e._v(" 取消 ")]),n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.editGroupDefine}},[e._v(" 确定 ")])],1)],2),n("a-card",{staticClass:"tag-box"},[n("a-form-model",{attrs:{"label-col":{span:2},"wrapper-col":{span:5}}},[n("a-form-model-item",{attrs:{label:"选择分组"}},[n("a-select",{on:{change:e.clickGroup},model:{value:e.changeGroupId,callback:function(t){e.changeGroupId=t},expression:"changeGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),n("div",{staticClass:"group-btn"},[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/mediumGroup/index@editGroup",expression:"'/mediumGroup/index@editGroup'"}],staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(){t.editGroupModal=!0}}},[e._v("修改分组")]),n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/mediumGroup/index@add",expression:"'/mediumGroup/index@add'"}],attrs:{type:"primary"},on:{click:function(){t.visible=!0}}},[e._v("新增分组")])],1),n("a-tabs",{on:{change:e.changeTab}},[n("a-tab-pane",{key:0,attrs:{tab:"所有"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("a-row",[n("a-col",{attrs:{span:6}},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),n("a-col",{attrs:{span:1}},[n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1)],1),n("a-table",{staticStyle:{marginTop:"20px"},attrs:{columns:e.allColumns,"data-source":e.allTable,rowKey:function(t){return t.id},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"titles",fn:function(t,a){return n("div",{},["文本"===a.type||"图文"===a.type||"小程序"===a.type?n("span",[e._v(e._s(a.content.title))]):e._e(),"图片"===a.type?n("span",[e._v(e._s(a.content.imageName))]):e._e(),"文件"===a.type?n("span",[e._v(e._s(a.content.fileName))]):e._e(),"音频"===a.type?n("span",[e._v(e._s(a.content.voiceName))]):e._e(),"视频"===a.type?n("span",[e._v(e._s(a.content.videoName))]):e._e()])}},{key:"contents",fn:function(t,a){return n("div",{},["文本"===a.type?n("span",[e._v(" "+e._s(a.content.content)+" ")]):e._e(),"图片"===a.type?n("img",{staticStyle:{height:"80px",width:"80px"},attrs:{src:a.content.imageFullPath}}):e._e(),"图文"===a.type?n("img",{staticStyle:{height:"80px",width:"80px"},attrs:{src:a.content.imageFullPath}}):e._e(),"小程序"===a.type?n("img",{staticStyle:{height:"80px",width:"80px"},attrs:{src:a.content.imageFullPath}}):e._e()])}},{key:"action",fn:function(t,a){return n("div",{},[["文本"==a.type||"图文"==a.type||"小程序"==a.type?n("a-button",{attrs:{type:"link"},on:{click:function(t){return e.edit(a.id,a.type)}}},[e._v("编辑")]):e._e(),n("a-button",{attrs:{type:"link"},on:{click:function(t){return e.moveTagModal(a.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.delMaterial(a.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)]],2)}}])})],1),n("a-tab-pane",{key:"1",attrs:{tab:"文本"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("a-row",[n("a-col",{attrs:{span:6}},[n("a-input-search",{attrs:{placeholder:"输入要搜索的标题或内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),n("a-col",{attrs:{span:1}},[n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("a-col",{attrs:{span:2,offset:12}},[n("a-button",{attrs:{type:"primary"},on:{click:function(){t.textModal=!0}}},[e._v("+添加文本")])],1)],1),n("a-table",{staticStyle:{marginTop:"20px"},attrs:{columns:e.allColumns,"data-source":e.textTablel,rowKey:function(t){return t.id},"row-selection":{onChange:e.onSelectAllChange},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"titles",fn:function(t,a){return n("div",{},[e._v(" "+e._s(a.content.title)+" ")])}},{key:"contents",fn:function(t,a){return n("div",{},[e._v(" "+e._s(a.content.content)+" ")])}},{key:"action",fn:function(t,a){return n("div",{},[[n("a-button",{attrs:{type:"link"},on:{click:function(t){return e.editDetail(a.id,1)}}},[e._v("编辑")]),n("a-button",{attrs:{type:"link"},on:{click:function(t){return e.moveTagModal(a.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.delMaterial(a.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)]],2)}}])})],1),n("a-tab-pane",{key:"2",attrs:{tab:"图片"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("div",{staticClass:"top-btn"},[n("div",{staticClass:"search"},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("div",{staticClass:"btn"},[n("a-button",{staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(t){return e.modalTypeDefine(2)}}},[n("a-icon",{attrs:{type:"upload"}}),e._v("上传图片")],1)],1)]),n("div",{staticClass:"picture"},e._l(e.pictureTableList,(function(t){return n("a-card",{key:t.id,staticStyle:{width:"250px"}},[n("div",{staticClass:"time"},[n("p",[e._v(e._s(t.createdAt))]),n("a-checkbox")],1),n("div",{staticClass:"img-box"},[n("span",[e._v(e._s(t.content.imageName))]),n("img",{attrs:{src:t.content.imageFullPath}})]),n("div",{staticClass:"text-box"},[n("span",[e._v("上传者： "+e._s(t.userName))]),n("span",[e._v("来源："+e._s(t.mediumGroupName))])]),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a-button",{attrs:{type:"link"},on:{click:function(a){return e.moveTagModal(t.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return e.delMaterial(t.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)],1)],2)})),1)]),n("a-tab-pane",{key:"3",attrs:{tab:"图文"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("div",{staticClass:"top-btn"},[n("div",{staticClass:"search"},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("div",{staticClass:"btn"},[n("a-button",{staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(){t.imageTextModal=!0,t.modalType=3}}},[n("a-icon",{attrs:{type:"plus"}}),e._v("添加图文")],1)],1)]),n("div",{staticClass:"picture"},e._l(e.pictrueTextList,(function(t){return n("a-card",{key:t.id,staticStyle:{width:"250px"}},[n("div",{staticClass:"time"},[n("p",[e._v(e._s(t.createdAt))]),n("a-checkbox")],1),n("div",{staticClass:"img-box"},[n("span",[e._v(e._s(t.content.title))]),n("img",{attrs:{src:t.content.imageFullPath}})]),n("div",{staticClass:"text-box"},[n("span",[e._v("上传者： "+e._s(t.userName))]),n("span",[e._v("来源："+e._s(t.mediumGroupName))])]),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/mediumGroup/index@edit",expression:"'/mediumGroup/index@edit'"}],attrs:{type:"link"},on:{click:function(a){return e.editDetail(t.id,3)}}},[e._v("编辑")]),n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/mediumGroup/index@move",expression:"'/mediumGroup/index@move'"}],attrs:{type:"link"},on:{click:function(a){return e.moveTagModal(t.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return e.delMaterial(t.id)}}},[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/mediumGroup/index@delete",expression:"'/mediumGroup/index@delete'"}],attrs:{type:"link"}},[e._v("删除")])],1)],1)],2)})),1)]),n("a-tab-pane",{key:"4",attrs:{tab:"音频"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("div",{staticClass:"top-btn"},[n("div",{staticClass:"search"},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("div",{staticClass:"btn"},[n("a-button",{staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(t){return e.modalTypeDefine(4)}}},[n("a-icon",{attrs:{type:"upload"}}),e._v("上传音频")],1)],1)]),n("div",{staticClass:"picture"},e._l(e.voiceTableList,(function(t){return n("a-card",{key:t.id,staticStyle:{width:"250px"}},[n("div",{staticClass:"time"},[n("p",[e._v(e._s(t.createdAt))]),n("a-checkbox")],1),n("a-icon",{staticStyle:{fontSize:"40px"},attrs:{type:"customer-service",theme:"twoTone"}}),n("div",{staticClass:"text-box"},[n("span",[e._v("上传者： "+e._s(t.userName))]),n("span",[e._v("来源："+e._s(t.mediumGroupName))])]),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a-button",{attrs:{type:"link"},on:{click:function(a){return e.moveTagModal(t.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return e.delMaterial(t.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)],1)],2)})),1)]),n("a-tab-pane",{key:"5",attrs:{tab:"视频"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("div",{staticClass:"top-btn"},[n("div",{staticClass:"search"},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("div",{staticClass:"btn"},[n("a-button",{staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(t){return e.modalTypeDefine(5)}}},[n("a-icon",{attrs:{type:"upload"}}),e._v("上传视频")],1)],1)]),n("div",{staticClass:"picture"},e._l(e.videoList,(function(t){return n("a-card",{key:t.id,staticStyle:{width:"250px"}},[n("div",{staticClass:"time"},[n("p",[e._v(e._s(t.createdAt))]),n("a-checkbox")],1),n("div",{staticClass:"video-box"},[n("video",{staticStyle:{width:"100%"},attrs:{src:t.content.videoFullPath,controls:""}})]),n("div",{staticClass:"text-box"},[n("span",[e._v("上传者： "+e._s(t.userName))]),n("span",[e._v("来源："+e._s(t.mediumGroupName))])]),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a-button",{attrs:{type:"link"},on:{click:function(a){return e.moveTagModal(t.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return e.delMaterial(t.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)],1)],2)})),1)]),n("a-tab-pane",{key:"6",attrs:{tab:"小程序"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("div",{staticClass:"top-btn"},[n("div",{staticClass:"search"},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("div",{staticClass:"btn"},[n("a-button",{staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(){t.appletsModal=!0,t.modalType=6}}},[n("a-icon",{attrs:{type:"plus"}}),e._v("添加小程序")],1)],1)]),n("div",{staticClass:"picture"},e._l(e.appletsTableList,(function(t){return n("a-card",{key:t.id,staticStyle:{width:"250px"}},[n("div",{staticClass:"time"},[n("p",[e._v(e._s(t.createdAt))]),n("a-checkbox")],1),n("div",{staticClass:"img-box"},[n("span",[e._v(e._s(t.content.title))]),n("img",{attrs:{src:t.content.imageFullPath}})]),n("div",{staticClass:"text-box"},[n("span",[e._v("上传者： "+e._s(t.userName))]),n("span",[e._v("来源："+e._s(t.mediumGroupName))])]),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a-button",{attrs:{type:"link"},on:{click:function(a){return e.editDetail(t.id,6)}}},[e._v("编辑")]),n("a-button",{attrs:{type:"link"},on:{click:function(a){return e.moveTagModal(t.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return e.delMaterial(t.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)],1)],2)})),1)]),n("a-tab-pane",{key:"7",attrs:{tab:"文件"}},[n("p",[e._v("共有"+e._s(e.pagination.total)+"个素材")]),n("div",{staticClass:"top-btn"},[n("div",{staticClass:"search"},[n("a-input-search",{attrs:{placeholder:"输入要搜索的内容","enter-button":"搜索"},on:{search:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("a-button",{on:{click:function(){t.searchValue=""}}},[e._v("清空")])],1),n("div",{staticClass:"btn"},[n("a-button",{staticStyle:{marginRight:"10px"},attrs:{type:"primary"},on:{click:function(t){return e.modalTypeDefine(7)}}},[n("a-icon",{attrs:{type:"upload"}}),e._v("上传文件")],1)],1)]),n("div",{staticClass:"picture"},e._l(e.fileTableList,(function(t){return n("a-card",{key:t.id,staticStyle:{width:"250px"}},[n("div",{staticClass:"time"},[n("p",[e._v(e._s(t.createdAt))]),n("a-checkbox")],1),n("div",{staticClass:"file-box"},[n("a-icon",{staticStyle:{fontSize:"46px"},attrs:{type:"file",theme:"twoTone"}}),n("span",[e._v(e._s(t.content.fileName))])],1),n("div",{staticClass:"text-box"},[n("span",[e._v("上传者： "+e._s(t.userName))]),n("span",[e._v("来源："+e._s(t.mediumGroupName))])]),n("template",{staticClass:"ant-card-actions",slot:"actions"},[n("a-button",{attrs:{type:"link"},on:{click:function(a){return e.moveTagModal(t.id)}}},[e._v("移动")]),n("a-popconfirm",{attrs:{title:"确认删除该素材？","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(a){return e.delMaterial(t.id)}}},[n("a-button",{attrs:{type:"link"}},[e._v("删除")])],1)],1)],2)})),1)])],1),n("a-modal",{attrs:{visible:e.textModal,title:"新建文本素材"},on:{cancel:function(){t.textModal=!1,t.addTextData.content.title="",t.addTextData.content.content="",t.materialGroupId=0}}},[n("a-form-model",{ref:"textForm",attrs:{model:e.addTextData.content,rules:e.textRules,"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-model-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"文本标题：",prop:"title"}},[n("a-input",{model:{value:e.addTextData.content.title,callback:function(t){e.$set(e.addTextData.content,"title",t)},expression:"addTextData.content.title"}})],1),n("a-form-model-item",{attrs:{label:"文本内容：",prop:"content"}},[n("a-textarea",{model:{value:e.addTextData.content.content,callback:function(t){e.$set(e.addTextData.content,"content",t)},expression:"addTextData.content.content"}})],1)],1),n("template",{slot:"footer"},[n("a-button",{on:{click:function(){t.textModal=!1,t.addTextData.content.title="",t.addTextData.content.content="",t.materialGroupId=0}}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.addText}},[e._v("确定")])],1)],2),n("a-modal",{attrs:{visible:e.editTextModal,title:"编辑文本"},on:{cancel:function(){t.editTextModal=!1}}},[n("a-form-model",{attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-model-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialDetail.mediumGroupId,callback:function(t){e.$set(e.materialDetail,"mediumGroupId",t)},expression:"materialDetail.mediumGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"文本标题："}},[n("a-input",{model:{value:e.materialDetail.content.title,callback:function(t){e.$set(e.materialDetail.content,"title",t)},expression:"materialDetail.content.title"}})],1),n("a-form-model-item",{attrs:{label:"文本内容："}},[n("a-textarea",{model:{value:e.materialDetail.content.content,callback:function(t){e.$set(e.materialDetail.content,"content",t)},expression:"materialDetail.content.content"}})],1)],1),n("template",{slot:"footer"},[n("a-button",{on:{click:function(){t.editTextModal=!1}}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.addText}},[e._v("确定")])],1)],2),n("a-modal",{attrs:{visible:e.imageTextModal,title:"新建图文"},on:{cancel:function(t){return e.resetTextImg("取消")}}},[n("a-form-model",{ref:"imageForm",attrs:{model:e.imageTextData,rules:e.imageForm,"label-col":{span:5},"wrapper-col":{span:17}}},[n("a-form-model-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"图片封面："}},[""===e.imgUrl?n("upload",{attrs:{imageUrl:e.imgUrl,"file-type":1},on:{success:e.uploadSuccess}}):n("div",[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.imgUrl}})]),n("span",[e._v("图片大小不超过2M，支持JPG、JPEG及PNG格式")])],1),n("a-form-model-item",{attrs:{label:"填写标题：",prop:"title"}},[n("a-input",{model:{value:e.imageTextData.title,callback:function(t){e.$set(e.imageTextData,"title",t)},expression:"imageTextData.title"}})],1),n("a-form-model-item",{attrs:{label:"添加描述："}},[n("a-textarea",{model:{value:e.imageTextData.description,callback:function(t){e.$set(e.imageTextData,"description",t)},expression:"imageTextData.description"}})],1),n("a-form-model-item",{attrs:{label:"点击跳转：",prop:"imageLink"}},[n("a-input",{attrs:{placeholder:"请输入跳转链接，且必须以http://或https://开头"},model:{value:e.imageTextData.imageLink,callback:function(t){e.$set(e.imageTextData,"imageLink",t)},expression:"imageTextData.imageLink"}}),n("a-button",{on:{click:function(t){return e.resetTextImg("重置")}}},[e._v("重置")])],1)],1),n("template",{slot:"footer"},[n("a-button",{on:{click:function(t){return e.resetTextImg("取消")}}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.addImageTextDefine}},[e._v("确定")])],1)],2),n("a-modal",{attrs:{visible:e.editImageTextModal,title:"编辑图文"},on:{cancel:function(){t.editImageTextModal=!1,t.imgUrl="",t.upLoadRes={}}}},[n("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:17}}},[n("a-form-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialDetail.mediumGroupId,callback:function(t){e.$set(e.materialDetail,"mediumGroupId",t)},expression:"materialDetail.mediumGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-item",{attrs:{label:"图片封面："}},[n("div",[n("img",{staticStyle:{height:"80px",width:"80px"},attrs:{src:""!==e.imgUrl?e.imgUrl:e.materialDetail.content.imageFullPath}})]),n("upload",{attrs:{imageUrl:e.imgUrl,btnType:!1,"file-type":1},on:{success:e.uploadSuccess}}),n("span",[e._v("图片大小不超过2M，支持JPG、JPEG及PNG格式")])],1),n("a-form-item",{attrs:{label:"填写标题："}},[n("a-input",{model:{value:e.materialDetail.content.title,callback:function(t){e.$set(e.materialDetail.content,"title",t)},expression:"materialDetail.content.title"}})],1),n("a-form-item",{attrs:{label:"添加描述："}},[n("a-textarea",{model:{value:e.materialDetail.content.description,callback:function(t){e.$set(e.materialDetail.content,"description",t)},expression:"materialDetail.content.description"}})],1),n("a-form-item",{attrs:{label:"点击跳转："}},[n("a-input",{model:{value:e.materialDetail.content.imageLink,callback:function(t){e.$set(e.materialDetail.content,"imageLink",t)},expression:"materialDetail.content.imageLink"}})],1)],1),n("template",{slot:"footer"},[n("a-button",{on:{click:function(){t.editImageTextModal=!1,t.imgUrl="",t.upLoadRes={}}}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.addImageTextDefine}},[e._v("确定")])],1)],2),n("a-modal",{attrs:{visible:e.pictureModal,title:e.allTitle},on:{cancel:function(){t.pictureModal=!1,t.materialGroupId=0,t.uploadDefine=!1}}},[2===e.modalType?n("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-item",{attrs:{label:"上传图片"}},[n("upload",{attrs:{imageUrl:e.imgUrl,"file-type":1},on:{success:e.uploadSuccess}}),n("p",[e._v("(图片大小不超过2M，图片名不能重复，支持JPG，JPEG及PNG格式)")])],1)],1):e._e(),4===e.modalType?n("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-item",{attrs:{label:"上传音频："}},[n("vpload",{attrs:{"file-type":2},on:{successDefine:e.uploadSuccessV}}),n("div",[e._v("(音频上传大小不超过2MB，播放长度不超过60s,支持AMR,MP3格式。)")]),e.uploadDefine?n("div",{staticStyle:{color:"red"}},[e._v("上传成功")]):e._e()],1)],1):e._e(),5===e.modalType?n("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-item",{attrs:{label:"上传视频："}},[n("vpload",{attrs:{"file-type":3},on:{successDefine:e.uploadSuccessV}}),n("div",[e._v("(视频上传大小不超过10M，支持MP4格式)")]),e.uploadDefine?n("div",{staticStyle:{color:"red"}},[e._v("上传成功")]):e._e()],1)],1):e._e(),7===e.modalType?n("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-item",{attrs:{label:"选择分组："}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-item",{attrs:{label:"上传文件："}},[n("vpload",{attrs:{"file-type":4},on:{successDefine:e.uploadSuccessV}}),e.uploadDefine?n("div",{staticStyle:{color:"red"}},[e._v("上传成功")]):e._e(),n("div",[e._v("(上传文件大小不超过20MB，支持DOC、DOCX、XLS、XLSX、CSV、PPT、PPTX、TXT、PDF、ZIP、RAR及Xmind格式。)")])],1)],1):e._e(),n("template",{slot:"footer"},[n("a-button",{on:{click:function(){t.pictureModal=!1,t.imgUrl="",t.upLoadRes={},t.materialGroupId=0,t.uploadDefine=!1}}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.defineModelType}},[e._v("确定")])],1)],2),n("div",{ref:"jbox",staticClass:"jbox"},[n("a-modal",{attrs:{width:"850px",visible:e.appletsModal,title:"新增小程序",getContainer:function(){return e.$refs.jbox}},on:{cancel:e.resetApplets}},[n("div",{staticClass:"applets-box"},[n("div",{staticClass:"left"},[n("div",{staticClass:"msg-box"},[e._v(" 在企业微信里发送小程序（必须在微信公众平台通过审核和发布的），请先将其关联到企业微信，再到本系统添加该小程序，否则发送失败，客户接收不到。如果没有微信小程序，请前往微信小程序进行注册。"),n("a",{attrs:{href:"https://mp.weixin.qq.com/cgi-bin/wx",target:"_blank"}},[n("a-button",{attrs:{type:"link"}},[e._v("立即前往")])],1)]),n("a-form-model",{ref:"appletsForm",attrs:{model:e.appletsData,rules:e.appletsForm,"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-model-item",{attrs:{label:"选择分组"}},[n("a-select",{model:{value:e.materialGroupId,callback:function(t){e.materialGroupId=t},expression:"materialGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"小程序appID：",prop:"appid"}},[n("a-input",{model:{value:e.appletsData.appid,callback:function(t){e.$set(e.appletsData,"appid",t)},expression:"appletsData.appid"}})],1),n("a-form-model-item",{attrs:{label:"小程序路径：",prop:"page"}},[n("a-input",{model:{value:e.appletsData.page,callback:function(t){e.$set(e.appletsData,"page",t)},expression:"appletsData.page"}})],1),n("a-form-model-item",{attrs:{label:"卡片标题：",prop:"title"}},[n("a-input",{model:{value:e.appletsData.title,callback:function(t){e.$set(e.appletsData,"title",t)},expression:"appletsData.title"}})],1),n("a-form-model-item",{attrs:{label:"卡片图片："}},[n("p",[e._v("上传图片不超过1M，尺寸必须为1080*864像素，支持jpg/jpeg/png格式")]),n("upload",{attrs:{imageUrl:e.imgUrl,"file-type":1},on:{success:e.uploadSuccess}})],1)],1)],1),n("div",{staticClass:"right"},[n("img",{attrs:{src:a("0b67")}}),n("span",[e._v("示例")])])]),n("template",{slot:"footer"},[n("a-button",{on:{click:e.resetApplets}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.appletsDefine}},[e._v("确定")])],1)],2),n("a-modal",{attrs:{width:"850px",visible:e.editAppletsModal,title:"编辑小程序",getContainer:function(){return e.$refs.jbox}},on:{cancel:e.resetApplets}},[n("div",{staticClass:"applets-box"},[n("div",{staticClass:"left"},[n("div",{staticClass:"msg-box"},[e._v(" 在企业微信里发送小程序（必须在微信公众平台通过审核和发布的），请先将其关联到企业微信，再到本系统添加该小程序，否则发送失败，客户接收不到。如果没有微信小程序，请前往微信小程序进行注册。"),n("a",{attrs:{href:"https://mp.weixin.qq.com/cgi-bin/wx",target:"_blank"}},[n("a-button",{attrs:{type:"link"}},[e._v("立即前往")])],1)]),n("a-form",{attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[n("a-form-item",{attrs:{label:"选择分组"}},[n("a-select",{model:{value:e.materialDetail.mediumGroupId,callback:function(t){e.$set(e.materialDetail,"mediumGroupId",t)},expression:"materialDetail.mediumGroupId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),n("a-form-item",{attrs:{label:"小程序appID："}},[n("a-input",{attrs:{disabled:""},model:{value:e.materialDetail.content.appid,callback:function(t){e.$set(e.materialDetail.content,"appid",t)},expression:"materialDetail.content.appid"}})],1),n("a-form-item",{attrs:{label:"小程序路径："}},[n("a-input",{model:{value:e.materialDetail.content.page,callback:function(t){e.$set(e.materialDetail.content,"page",t)},expression:"materialDetail.content.page"}})],1),n("a-form-item",{attrs:{label:"卡片标题："}},[n("a-input",{model:{value:e.materialDetail.content.title,callback:function(t){e.$set(e.materialDetail.content,"title",t)},expression:"materialDetail.content.title"}})],1),n("a-form-item",{attrs:{label:"卡片图片："}},[n("p",[e._v("上传图片不超过1M，尺寸必须为1080*864像素，支持jpg/jpeg/png格式")]),n("div",[n("img",{staticStyle:{height:"80px",width:"80px"},attrs:{src:""!==e.imgUrl?e.imgUrl:e.materialDetail.content.imageFullPath}})]),n("upload",{attrs:{imageUrl:e.imgUrl,btnType:!1,"file-type":1},on:{success:e.uploadSuccess}})],1)],1)],1),n("div",{staticClass:"right"},[n("img",{attrs:{src:a("0b67")}}),n("span",[e._v("示例")])])]),n("template",{slot:"footer"},[n("a-button",{on:{click:e.resetApplets}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.appletsDefine}},[e._v("确定")])],1)],2)],1),n("div",{ref:"bbox",staticClass:"bbox"},[n("a-modal",{staticClass:"modal",attrs:{getContainer:function(){return e.$refs.bbox},visible:e.moveModal,title:"选择分组"},on:{cancel:function(){t.moveModal=!1}}},[n("a-select",{staticStyle:{width:"200px",marginBottom:"20px"},on:{change:e.changeGroupMove},model:{value:e.currentId,callback:function(t){e.currentId=t},expression:"currentId"}},e._l(e.groupList,(function(t){return n("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1),n("div",{staticClass:"tag-box"},e._l(e.groupList,(function(t){return n("span",{key:t.id,class:e.classActive===t.id?"active":"box",on:{click:function(a){return e.moveTag(t.id)}}},[e._v(e._s(t.name))])})),0),n("template",{slot:"footer"},[n("a-button",{on:{click:function(){t.moveModal=!1}}},[e._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:e.moveDefine}},[e._v("确定")])],1)],2)],1)],1)],1)],1)],1)},n=[],o=(a("a9e3"),a("498a"),a("b0c0"),a("a4d3"),a("e01a"),a("b64b"),a("8ded")),l=a.n(o),s=a("38b7"),r=a("4b65"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-upload",{attrs:{name:"file",headers:t.headers,multiple:!0,method:"post","show-upload-list":!1,action:t.uploadApi,"before-upload":t.beforeUpload},on:{change:t.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传 ")],1)],1)},p=[],u=(a("ac1f"),a("1276"),a("d81d"),a("99af"),a("caad"),a("2532"),a("a15b"),{props:{fileType:{type:Number||Array,default:1}},data:function(){return{loading:!1,FileTypeArr:["",["jpg","png","jpeg"],["mp3","amr"],["mp4"],["doc","docx","xls","xlsx","csv","ppt","pptx","txt","pdf","Xmind","zip","rar"]],uploadApi:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL+"/dashboard/common/upload"}},computed:{headers:function(){var t=l.a.get("ACCESS_TOKEN");return{Accept:"application/json",Authorization:t}}},created:function(){},methods:{handleChange:function(t){if("done"===t.file.status){var e=t.file.response.data;this.$emit("successDefine",e)}if("error"===t.file.status&&t.file.response){var a=t.file.response;this.$message.error(a.msg)}},beforeUpload:function(t){var e=this,a=this._getFileSuffix(t.name).toLowerCase(),i=t.type.split("/")[0],n=t.size/1024/1024<2,o=t.size/1024/1024<10,l=t.size/1024/1024<20,s=[];this.fileType instanceof Array?this.fileType.map((function(t){s.concat(e.FileTypeArr[t])})):s=this.FileTypeArr[this.fileType];var r=s.includes(a);return r?4===this.fileType?(l||this.$message.error("上传文件过大"),r&&l):"video"===i?(o||this.$message.error("上传文件过大"),r&&o):(n||this.$message.error("上传文件过大"),r&&n):(this.$message.error("您只能上传以下类型： ".concat(s.join(","))),!1)},_getFileSuffix:function(t){return t.substring(t.lastIndexOf(".")+1)}}}),d=u,m=a("2877"),h=Object(m["a"])(d,c,p,!1,null,null,null),f=h.exports,b={components:{upload:r["a"],vpload:f},data:function(){return{btnLoading:!1,searchValue:"",visible:!1,textVisible:!1,editGroupModal:!1,textModal:!1,pictureModal:!1,imageTextModal:!1,moveModal:!1,upLoadPictureModal:!1,appletsModal:!1,changeGroupId:"",allColumns:[{title:"标题",dataIndex:"titles",align:"center",scopedSlots:{customRender:"titles"}},{title:"内容",dataIndex:"contents",align:"center",scopedSlots:{customRender:"contents"}},{title:"上传者",dataIndex:"userName",align:"center"},{title:"素材来源",dataIndex:"mediumGroupName",align:"center"},{title:"类型",dataIndex:"type",align:"center"},{title:"添加时间",dataIndex:"createdAt",align:"center"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],allTable:[],textTablel:[],pictureTableList:[],voiceTableList:[],pictrueTextList:[],videoList:[],fileTableList:[],appletsTableList:[],groupList:[],groupName:"",editGroupId:"",editGroupName:"",tabsNumber:0,allTypeList:[{label:"文本",value:1},{label:"图片",value:2},{label:"图文",value:3},{label:"音频",value:4},{label:"视频",value:5},{label:"小程序",value:6},{label:"文件",value:7}],modalType:0,modelTitle:"",addTextData:{content:{title:"",content:""}},fileObj:{},classActive:0,currentId:null,moveId:null,moveData:{},upLoadRes:{},materialGroupId:0,picTextModalData:[],imgSearchStr:"",imgActive:0,imgPath:"",imageTextData:{},appletsData:{},materialId:"",materialDetail:{content:{title:"",content:""}},editTypeNum:"",editTextModal:!1,editImageTextModal:!1,editModal:!1,editAppletsModal:!1,pagination:{total:0,current:1,pageSize:10,showSizeChanger:!0},allTitle:"",imgUrl:"",textRules:{title:[{required:!0,message:"请输入文本标题",trigger:"blur"}],content:[{required:!0,message:"请输入文本内容",trigger:"blur"}]},imageForm:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],imageLink:[{required:!0,message:"请输入跳转",trigger:"blur"}]},appletsForm:{appid:[{required:!0,message:"请输入小程序appID",trigger:"blur"}],page:[{required:!0,message:"请输入小程序路径",trigger:"blur"}],title:[{required:!0,message:"请输入卡片标题",trigger:"blur"}]},uploadDefine:!1}},created:function(){this.getGroupList(),this.getTableData()},computed:{headers:function(){var t=l.a.get("ACCESS_TOKEN");return{Accept:"application/json",Authorization:t}}},methods:{getTableData:function(){var t=this,e={mediumGroupId:this.changeGroupId,type:Number(this.tabsNumber),searchStr:this.searchValue,page:this.pagination.current,perPage:this.pagination.pageSize};Object(s["h"])(e).then((function(e){t.pagination.total=e.data.page.total,0===t.tabsNumber?t.allTable=e.data.list:"1"===t.tabsNumber?t.textTablel=e.data.list:"2"===t.tabsNumber?t.pictureTableList=e.data.list:"4"===t.tabsNumber?t.voiceTableList=e.data.list:"3"===t.tabsNumber?t.pictrueTextList=e.data.list:"5"===t.tabsNumber?t.videoList=e.data.list:"7"===t.tabsNumber?t.fileTableList=e.data.list:"6"===t.tabsNumber&&(t.appletsTableList=e.data.list)}))},getGroupList:function(){var t=this;Object(s["i"])().then((function(e){t.groupList=e.data,t.changeGroupId=0}))},getMaterialDetail:function(){var t=this;Object(s["g"])({id:this.materialId}).then((function(e){t.materialDetail=e.data}))},addGroup:function(){var t=this;""!=this.groupName.trim()?(this.btnLoading=!0,Object(s["b"])({name:this.groupName}).then((function(e){t.btnLoading=!1,t.visible=!1,t.groupName="",t.getGroupList()})).catch((function(e){t.btnLoading=!1}))):this.$message.error("请输入分组名称")},editGroup:function(t,e){this.editGroupModal=!0,this.editGroupId=t,this.editGroupName=e},editGroupDefine:function(){var t=this;""!=this.editGroupName.trim()?Object(s["f"])({id:this.editGroupId,name:this.editGroupName}).then((function(e){t.editGroupModal=!1,t.editGroupId="",t.editGroupName="",t.getGroupList()})):this.$message.error("请输入修改分组名称")},delGroup:function(t){var e=this;Object(s["d"])({id:t}).then((function(t){e.getGroupList()}))},clickGroup:function(t){this.changeGroupId=t,this.getTableData(),this.pagination.current=1,this.searchValue=""},changeTab:function(t){this.tabsNumber=t,this.pagination.current=1,this.searchValue="",this.getTableData()},onSelectAllChange:function(){},onSearch:function(t){this.searchValue=t,this.getTableData()},edit:function(t,e){this.materialId=t,this.upLoadRes={},this.getMaterialDetail(),"文本"===e?(this.editTypeNum=1,this.editTextModal=!0):"图文"===e?(this.editTypeNum=3,this.editImageTextModal=!0,this.modalType=3):"小程序"===e&&(this.editTypeNum=6,this.modalType=6,this.editAppletsModal=!0)},editDetail:function(t,e){this.editTypeNum=e,this.materialId=t,this.getMaterialDetail(),this.upLoadRes={},1===e?this.editTextModal=!0:3===e?(this.editImageTextModal=!0,this.modalType=3):6===e?(this.modalType=6,this.editAppletsModal=!0):(this.editModal=!0,this.modalType=e)},delMaterial:function(t){var e=this;Object(s["c"])({id:t}).then((function(t){e.getTableData()}))},modalTypeDefine:function(t){this.modalType=t,this.pictureModal=!0,2===t?this.allTitle="新建图片素材":4===t?this.allTitle="新建音频素材":5===t?this.allTitle="新建视频素材":7===t&&(this.allTitle="新建文件素材")},addText:function(){var t=this;if(1===this.editTypeNum){var e={id:this.materialDetail.id,type:this.editTypeNum,content:this.materialDetail.content,mediumGroupId:this.materialDetail.mediumGroupId};Object(s["e"])(e).then((function(e){t.upLoadRes={},t.editTextModal=!1,t.getTableData()}))}else this.$refs.textForm.validate((function(e){if(!e)return!1;var a={type:t.tabsNumber,content:t.addTextData.content,mediumGroupId:t.materialGroupId};Object(s["a"])(a).then((function(e){t.upLoadRes={},t.textModal=!1,t.getTableData(),t.addTextData={content:{title:"",content:""}},t.materialGroupId=0}))}))},pictureModalDis:function(){this.upLoadPictureModal=!0,this.getPictureData()},changeGroup:function(t){this.materialGroupId=t,this.getPictureData()},changeInput:function(t){this.imgSearchStr=t,this.getPictureData()},imgPathDefine:function(t){this.imgUrl=t.content.imageFullPath,this.imgActive=t.id,this.imgPath=t.content.imagePath},getPictureData:function(){var t=this;Object(s["h"])({type:2,mediumGroupId:this.materialGroupId,searchStr:this.imgSearchStr}).then((function(e){t.picTextModalData=e.data.list}))},uploadSuccessV:function(t){if(4===this.modalType){var e=t.path;this.upLoadRes.voicePath=e,this.upLoadRes.voiceName=t.name,this.uploadDefine=!0}else if(5===this.modalType){var a=t.path;this.upLoadRes.videoPath=a,this.upLoadRes.videoName=t.name,this.uploadDefine=!0}else if(7===this.modalType){var i=t.path;this.upLoadRes.filePath=i,this.upLoadRes.fileName=t.name,this.uploadDefine=!0}},uploadSuccess:function(t){if(this.imgUrl=t.fullPath,2===this.modalType||6===this.modalType||3===this.modalType){var e=t.path;this.upLoadRes.imagePath=e,this.upLoadRes.imageName=t.name}},addImageTextDefine:function(){var t=this;if(3===this.editTypeNum){""===this.imgPath&&(this.imgPath=this.upLoadRes.imagePath);var e={title:this.materialDetail.content.title,description:this.materialDetail.content.description,imagePath:this.imgPath||this.materialDetail.content.imagePath,imageLink:this.materialDetail.content.imageLink};Object(s["e"])({id:this.materialDetail.id,type:this.editTypeNum,content:e,mediumGroupId:this.materialDetail.mediumGroupId}).then((function(e){t.upLoadRes={},t.editImageTextModal=!1,t.getTableData(),t.editTypeNum="",t.imgUrl=""}))}else this.$refs.imageForm.validate((function(e){if(!e)return!1;""===t.imgPath&&(t.imgPath=t.upLoadRes.imagePath);var a={title:t.imageTextData.title,description:t.imageTextData.description,imagePath:t.imgPath,imageLink:t.imageTextData.imageLink};void 0!=a.imagePath?Object(s["a"])({type:Number(t.tabsNumber),content:a,mediumGroupId:t.materialGroupId}).then((function(e){t.imgPath="",t.upLoadRes={},t.imageTextModal=!1,t.imageTextData={},t.imgUrl="",t.materialGroupId=0,t.getTableData()})):t.$message.error("请上传")}))},resetApplets:function(){this.appletsData={},this.materialDetail.mediumGroupId=0,this.materialGroupId=0,this.editAppletsModal||this.$refs.appletsForm.resetFields(),this.appletsModal=!1,this.editAppletsModal=!1,this.imgUrl="",this.upLoadRes={}},appletsDefine:function(){var t=this;if(6===this.editTypeNum){var e={appid:this.materialDetail.content.appid,page:this.materialDetail.content.page,imagePath:2===Object.keys(this.upLoadRes).length?this.upLoadRes.imagePath:this.materialDetail.content.imagePath,imageName:2===Object.keys(this.upLoadRes).length?this.upLoadRes.imageName:this.materialDetail.content.imageName,title:this.materialDetail.content.title};Object(s["e"])({id:this.materialDetail.id,type:this.editTypeNum,content:e,mediumGroupId:this.materialDetail.mediumGroupId}).then((function(e){t.editAppletsModal=!1,t.getTableData(),t.editTypeNum="",t.imgUrl=""}))}else this.$refs.appletsForm.validate((function(e){if(!e)return!1;var a={appid:t.appletsData.appid,page:t.appletsData.page,imagePath:t.upLoadRes.imagePath,imageName:t.upLoadRes.imageName,title:t.appletsData.title};void 0!=a.imagePath?Object(s["a"])({type:Number(t.tabsNumber),content:a,mediumGroupId:t.materialGroupId}).then((function(e){t.materialGroupId=0,t.upLoadRes={},t.appletsModal=!1,t.appletsData={},t.getTableData(),t.imgUrl=""})):t.$message.error("请上传")}))},defineModelType:function(){var t=this;2===Object.keys(this.upLoadRes).length?Object(s["a"])({type:Number(this.tabsNumber),content:this.upLoadRes,mediumGroupId:this.materialGroupId}).then((function(e){t.upLoadRes={},t.pictureModal=!1,t.getTableData(),t.imgUrl="",t.uploadDefine=!1,t.materialGroupId=0})):this.$message.error("请上传")},moveTagModal:function(t){this.moveId=t,this.moveModal=!0,this.currentId=this.changeGroupId,this.classActive=this.currentId},moveTag:function(t){this.classActive=t,this.currentId=t},changeGroupMove:function(t){this.currentId=t,this.classActive=t},moveDefine:function(){var t=this;Object(s["j"])({id:this.moveId,mediumGroupId:this.currentId}).then((function(e){t.moveModal=!1,t.getTableData()}))},handleTableChange:function(t){var e=t.current,a=t.pageSize;this.pagination.current=e,this.pagination.pageSize=a,this.getTableData()},resetTextImg:function(t){this.materialGroupId=0,this.imageTextData={},this.upLoadRes={},this.imgUrl="",this.$refs.imageForm.resetFields(),this.imageTextModal="重置"===t},linkJump:function(){window.open="https://mp.weixin.qq.com/cgi-bin/wx"}}},g=b,v=(a("dee0"),Object(m["a"])(g,i,n,!1,null,"a7a45cd2",null));e["default"]=v.exports},"38b7":function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"g",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return s})),a.d(e,"j",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"i",(function(){return p})),a.d(e,"b",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"d",(function(){return m}));var i=a("b775");function n(t){return Object(i["b"])({url:"/medium/index",method:"get",params:t})}function o(t){return Object(i["b"])({url:"/medium/show",method:"get",params:t})}function l(t){return Object(i["b"])({url:"/medium/store",method:"post",data:t})}function s(t){return Object(i["b"])({url:"/medium/destroy",method:"delete",data:t})}function r(t){return Object(i["b"])({url:"/medium/groupUpdate",method:"put",data:t})}function c(t){return Object(i["b"])({url:"/medium/update",method:"put",data:t})}function p(t){return Object(i["b"])({url:"/mediumGroup/index",method:"get",params:t})}function u(t){return Object(i["b"])({url:"/mediumGroup/store",method:"post",data:t})}function d(t){return Object(i["b"])({url:"/mediumGroup/update",method:"put",data:t})}function m(t){return Object(i["b"])({url:"/mediumGroup/destroy",method:"delete",data:t})}},"4b65":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-upload",{class:t.btnType?"avatar-uploader":"btn-type",attrs:{name:"file","list-type":"picture-card",headers:t.headers,method:"post","show-upload-list":!1,action:t.uploadApi,"before-upload":t.beforeUpload},on:{change:t.handleChange}},[t.btnType?a("div",[t.imageUrl?a("div",{staticClass:"img-wrapper"},[a("img",{staticClass:"img",attrs:{src:t.imageUrl,alt:"avatar"}})]):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}})],1)]):a("a-button",{attrs:{type:"link"}},[t._v("重新上传")])],1)},n=[],o=(a("a9e3"),a("b0c0"),a("ac1f"),a("1276"),a("d81d"),a("99af"),a("caad"),a("2532"),a("a15b"),a("8ded")),l=a.n(o),s={props:{imageUrl:{type:String,default:""},fileType:{type:Number||Array,default:1},btnType:{type:Boolean,default:!0}},data:function(){return{loading:!1,FileTypeArr:["",["jpg","png","jpeg"],["mp3","amr"],["mp4"],["doc","docx","xls","xlsx","csv","ppt","pptx","txt","pdf","Xmind","zip","rar"],["zip","rar","tar"]],uploadApi:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL+"/dashboard/common/upload"}},computed:{headers:function(){var t=l.a.get("ACCESS_TOKEN");return{Accept:"application/json",Authorization:t}}},created:function(){},methods:{handleChange:function(t){if("uploading"!==t.file.status){if("done"===t.file.status){var e=t.file.response.data;this.$emit("success",e),this.loading=!1}if("error"===t.file.status&&t.file.response){var a=t.file.response;this.$message.error(a.msg)}}else this.loading=!0},beforeUpload:function(t){var e=this,a=this._getFileSuffix(t.name).toLowerCase(),i=t.type.split("/")[0],n=t.size/1024/1024<2,o=t.size/1024/1024<10,l=t.size/1024/1024<20,s=[];this.fileType instanceof Array?this.fileType.map((function(t){s.concat(e.FileTypeArr[t])})):s=this.FileTypeArr[this.fileType];var r=s.includes(a);return r?4===this.fileType?(l||this.$message.error("上传文件过大"),r&&l):"video"===i?(o||this.$message.error("上传文件过大"),r&&o):(n||this.$message.error("上传文件过大"),r&&n):(this.$message.error("您只能上传以下类型： ".concat(s.join(","))),!1)},_getFileSuffix:function(t){return t.substring(t.lastIndexOf(".")+1)}}},r=s,c=(a("132d"),a("2877")),p=Object(c["a"])(r,i,n,!1,null,null,null);e["a"]=p.exports},dee0:function(t,e,a){"use strict";a("0da6")},f68e:function(t,e,a){}}]);