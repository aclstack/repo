(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["room-remind"],{"06c5":function(t,r,e){"use strict";e.d(r,"a",(function(){return n}));e("fb6a"),e("d3b7"),e("b0c0"),e("a630"),e("3ca3"),e("ac1f");var a=e("6b75");function n(t,r){if(t){if("string"===typeof t)return Object(a["a"])(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(a["a"])(t,r):void 0}}},"0e64":function(t,r,e){"use strict";var a=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"select-group"},[a("a-modal",{attrs:{"on-ok":"handleOk",width:526,footer:!1},model:{value:t.modalShow,callback:function(r){t.modalShow=r},expression:"modalShow"}},[a("template",{slot:"title"},[t._v(" 选择群聊 ")]),a("div",{staticClass:"content"},[a("div",{staticClass:"tips"},[t._v(" 全部群聊（"+t._s(t.groups.length)+"）： ")]),a("div",{staticClass:"groups"},t._l(t.groups,(function(r,n){return t.resetFlag?a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"icon"},[a("img",{attrs:{src:e("8522")}})]),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v(" "+t._s(r.name)+" ")]),a("div",{staticClass:"count"},[t._v(" "+t._s(r.contact_num)+" / "+t._s(r.roomMax)+" ")])]),a("div",[a("div",{staticClass:"select"},[t.resetFlag?a("a-checkbox",{attrs:{checked:r.select},on:{change:function(e){return t.selectChange(e,r)}}}):t._e()],1)])]):t._e()})),0),a("div",{staticClass:"confirm"},[a("a-button",{on:{click:function(r){t.modalShow=!1}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)])],2)],1)},n=[],o=e("b85c"),i=(e("d3b7"),e("159b"),e("4de4"),e("59e4")),s={data:function(){return{modalShow:!1,loading:!1,groups:[],currentData:{},resetFlag:!0}},methods:{setSelect:function(t){var r=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.currentData=e,this.getData((function(e){r.reset(),r.groups.forEach((function(r){t.forEach((function(t){t.wxChatId===r.wxChatId&&(r.select=!0)}))}))})),this.modalShow=!0},selectChange:function(t,r){this.resetFlag=!1,r.select=t.target.checked,this.resetFlag=!0},confirm:function(){this.hide();var t=this.groups.filter((function(t){return!0===t.select}));this.$emit("change",t,this.currentData)},getData:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(i["o"])({roomGroupId:0,page:1,perPage:1e3}).then((function(e){t.groups=e.data,r&&r()}))},show:function(){this.getData(),this.reset(),this.modalShow=!0},hide:function(){this.modalShow=!1},reset:function(){var t,r=Object(o["a"])(this.groups);try{for(r.s();!(t=r.n()).done;){var e=t.value;e.select=!1}}catch(a){r.e(a)}finally{r.f()}}}},c=s,u=(e("2897"),e("2877")),d=Object(u["a"])(c,a,n,!1,null,"b583576e",null);r["a"]=d.exports},"13e0":function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"content"},[a("a-row",[a("a-spin",{attrs:{size:"large",spinning:t.loadShow}},[a("a-col",{attrs:{span:3}},[a("div",{staticClass:"contLeft"},[a("div",{staticClass:"addPlan",on:{click:t.addProgram}},[a("span",{staticClass:"iconStyle"},[a("a-icon",{attrs:{type:"plus"}})],1),t._v("添加方案 ")]),t._l(t.programArray,(function(r,e){return a("div",{key:e,staticClass:"schemeOptions",class:[e==t.programIndex?"activeProgram":""],on:{click:function(a){return t.tabProgram(e,r.id)}}},[t._v(t._s(r.name))])}))],2)]),a("a-col",{attrs:{span:21}},[a("div",{staticClass:"contRight"},[a("a-card",{staticClass:"contRightCard"},[a("div",{staticClass:"contRgtTop"},[a("div",{staticClass:"cr_top_left"},[t._v("选择适用客户群：")]),t.checkdetails?a("div",{staticClass:"cr_top_right"},[a("div",{staticClass:"leftSwitch"},[t.onOffSwitch?a("span",[t._v("已启用")]):a("span",[t._v("已禁用")]),a("a-switch",{attrs:{size:"small"},on:{change:t.enablePlan},model:{value:t.onOffSwitch,callback:function(r){t.onOffSwitch=r},expression:"onOffSwitch"}})],1),0!=t.programIndex?a("a-button",{staticClass:"rightBtn",on:{click:t.delPlanBtn}},[t._v("删除")]):t._e(),a("a-button",{staticClass:"rightBtn",attrs:{type:"primary"},on:{click:t.modifyBtn}},[t._v("修改")])],1):t._e()]),a("div",{staticClass:"applicableClient"},[t.checkdetails?t._e():a("div",{staticClass:"selectGroup",on:{click:function(r){return t.$refs.selectGroup.show()}}},[a("a-icon",{attrs:{type:"plus"}}),t._v("选择群聊")],1),a("selectGroup",{ref:"selectGroup",on:{change:t.acceptGroupData}}),a("div",{staticClass:"chosenGroup"},t._l(t.formAskData.rooms,(function(r,n){return a("div",{key:n,staticClass:"chosenElement"},[a("img",{attrs:{src:e("8522"),alt:""}}),a("div",{staticClass:"chosenRight"},[a("div",{staticClass:"group_name"},[t._v(t._s(r.name))]),a("div",[t._v(t._s(r.contact_num)+" / "+t._s(r.roomMax))])])])})),0)],1),a("div",{staticClass:"contRgtTips"},[a("div",{staticClass:"cr_top_left"},[t._v("设置提醒行为：")])]),a("a-card",{staticClass:"behaviorTips"},[a("div",{staticClass:"behaviorTitle"},[t._v("行为提醒")]),a("div",{staticClass:"selectCheckRow"},[a("a-checkbox",{attrs:{disabled:t.checkdetails},model:{value:t.is_qrcode,callback:function(r){t.is_qrcode=r},expression:"is_qrcode"}},[t._v("发送带二维码图片")]),a("a-checkbox",{attrs:{disabled:t.checkdetails},model:{value:t.is_link,callback:function(r){t.is_link=r},expression:"is_link"}},[t._v("发送链接分享")]),a("a-checkbox",{attrs:{disabled:t.checkdetails},model:{value:t.is_miniprogram,callback:function(r){t.is_miniprogram=r},expression:"is_miniprogram"}},[t._v("发送小程序")]),a("a-checkbox",{attrs:{disabled:t.checkdetails},model:{value:t.is_card,callback:function(r){t.is_card=r},expression:"is_card"}},[t._v("发送名片")]),a("a-checkbox",{attrs:{disabled:t.checkdetails},model:{value:t.is_keyword,callback:function(r){t.is_keyword=r},expression:"is_keyword"}},[t._v("聊天消息中包含以下关键词")])],1),t.is_keyword?a("div",{staticClass:"keyWordRow"},[t.checkdetails?a("div",{staticClass:"addToWord btnStyle"},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加")],1):a("a-button",{staticClass:"addToWord",on:{click:t.addToWordBtn}},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加")],1),t.showKeyInput?a("a-input",{staticStyle:{width:"120px","margin-left":"10px",height:"28px"},attrs:{placeholder:"输入后回车",autoFocus:!0},on:{pressEnter:t.addToWordInput,blur:t.closeInput},model:{value:t.keyWordValue,callback:function(r){t.keyWordValue=r},expression:"keyWordValue"}}):t._e(),t._l(t.formAskData.keyword,(function(r,e){return a("div",{key:e,staticClass:"tagStyle"},[t._v(" "+t._s(r)+" "),t.checkdetails?t._e():a("span",{staticClass:"shufIcon",on:{click:function(r){return t.delSpanBtn(e)}}},[a("a-icon",{attrs:{type:"close"}})],1)])}))],2):t._e()]),t.checkdetails?t._e():a("a-button",{staticClass:"saveSetBtn",on:{click:t.cancelBtn}},[t._v("取消")]),t.checkdetails?t._e():a("a-button",{staticClass:"saveSetBtn",attrs:{type:"primary"},on:{click:t.saveSetup}},[t._v("保存设置")])],1)],1)])],1)],1)],1)},n=[],o=(e("d3b7"),e("159b"),e("b0c0"),e("a434"),e("b775"));function i(t){return Object(o["b"])({url:"/roomRemind/store",method:"post",data:t})}function s(t){return Object(o["b"])({url:"/roomRemind/info",method:"get",params:t})}function c(t){return Object(o["b"])({url:"/roomRemind/update",method:"put",data:t})}function u(t){return Object(o["b"])({url:"/roomRemind/status",method:"get",params:t})}function d(t){return Object(o["b"])({url:"/roomRemind/index",method:"get",params:t})}function l(t){return Object(o["b"])({url:"/roomRemind/destroy",method:"delete",data:t})}var h=e("0e64"),m={components:{selectGroup:h["a"]},data:function(){return{onOffSwitch:!0,loadShow:!1,is_qrcode:!1,is_link:!1,is_miniprogram:!1,is_card:!1,is_keyword:!1,showKeyInput:!1,keyWordValue:"",formAskData:{name:"",rooms:[],keyword:[]},programArray:[],programIndex:0,checkdetails:!0,newBuild:!1}},created:function(){this.getProjectData()},methods:{acceptGroupData:function(t){this.formAskData.rooms=[],this.formAskData.rooms=t},getProjectData:function(){var t=this;d().then((function(r){t.programArray=[],r.data.forEach((function(r,e){var a={id:"",name:""};a.id=r.id,a.name=r.name,t.programArray.push(a)})),t.getPlanData(t.programArray[0].id)}))},getPlanData:function(t){var r=this;s({id:t}).then((function(t){r.formAskData.name=t.data.name,r.formAskData.rooms=t.data.rooms,t.data.keyword?r.formAskData.keyword=t.data.keyword:r.formAskData.keyword=[],r.showActionTips(t.data)}))},addProgram:function(){var t=this;if(this.newBuild)return this.$message.error("请保存操作"),!1;var r={name:"方案"+this.programArray.length};this.programArray.forEach((function(e,a){r.name==e.name&&(r.name="方案"+(t.programArray.length+1))})),this.programArray.push(r),this.programIndex=this.programArray.length-1,this.addToNews()},addToNews:function(){this.onOffSwitch=!0,this.checkdetails=!1,this.formAskData.name="",this.formAskData.rooms=[],this.formAskData.keyword=[],this.is_qrcode=!1,this.is_link=!1,this.is_miniprogram=!1,this.is_card=!1,this.is_keyword=!1,this.newBuild=!0},cancelBtn:function(){this.newBuild?(this.programArray.splice(this.programIndex,1),this.programIndex=0,this.checkdetails=!0,this.newBuild=!1,this.getPlanData(this.programArray[this.programIndex].id)):this.checkdetails||(this.checkdetails=!0)},modifyBtn:function(){this.checkdetails=!1},delPlanBtn:function(){var t=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){l({id:t.programArray[t.programIndex].id}).then((function(r){t.programArray.splice(t.programIndex,1),t.$message.success("删除成功"),t.programIndex=0,t.getPlanData(t.programArray[t.programIndex].id)}))}})},enablePlan:function(){this.onOffSwitch?this.formAskData.status=1:this.formAskData.status=0,u({id:this.programArray[this.programIndex].id,status:this.formAskData.status}).then((function(t){}))},tabProgram:function(t,r){var e=this;this.newBuild=!1,this.checkdetails=!0,this.loadShow=!0,this.programIndex=t,d().then((function(t){e.programArray=[],t.data.forEach((function(t,r){var a={id:"",name:""};a.id=t.id,a.name=t.name,e.programArray.push(a)}))})),setTimeout((function(){e.getPlanData(r),e.loadShow=!1}),500)},saveSetup:function(){var t=this;return this.handleActionData(),""==this.formAskData.rooms?(this.$message.error("未选择群聊"),!1):1==this.formAskData.is_keyword&&""==this.formAskData.keyword?(this.$message.error("未选择消息关键词"),!1):void(this.newBuild&&!this.checkdetails?(this.formAskData.name=this.programArray[this.programIndex].name,i(this.formAskData).then((function(r){t.$message.success("创建成功"),t.newBuild=!1,t.checkdetails=!0}))):this.checkdetails||(this.formAskData.id=this.programArray[this.programIndex].id,c(this.formAskData).then((function(r){t.$message.success("修改成功"),t.checkdetails=!0}))))},handleActionData:function(){this.is_qrcode?this.formAskData.is_qrcode=1:this.formAskData.is_qrcode=0,this.is_link?this.formAskData.is_link=1:this.formAskData.is_link=0,this.is_miniprogram?this.formAskData.is_miniprogram=1:this.formAskData.is_miniprogram=0,this.is_card?this.formAskData.is_card=1:this.formAskData.is_card=0,this.is_keyword?this.formAskData.is_keyword=1:this.formAskData.is_keyword=0},showActionTips:function(t){t.status?this.onOffSwitch=!0:this.onOffSwitch=!1,t.isQrcode?this.is_qrcode=!0:this.is_qrcode=!1,t.isLink?this.is_link=!0:this.is_link=!1,t.isMiniprogram?this.is_miniprogram=!0:this.is_miniprogram=!1,t.isCard?this.is_card=!0:this.is_card=!1,t.isKeyword?this.is_keyword=!0:this.is_keyword=!1},addToWordBtn:function(){this.showKeyInput=!0},delSpanBtn:function(t){this.formAskData.keyword.splice(t,1)},addToWordInput:function(){this.keyWordValue&&this.formAskData.keyword.push(this.keyWordValue),this.showKeyInput=!1,this.keyWordValue=""},closeInput:function(){this.showKeyInput=!1,this.keyWordValue=""}}},f=m,p=(e("b92a"),e("2877")),k=Object(p["a"])(f,a,n,!1,null,null,null);r["default"]=k.exports},2897:function(t,r,e){"use strict";e("9d3f")},"59e4":function(t,r,e){"use strict";e.d(r,"C",(function(){return n})),e.d(r,"k",(function(){return o})),e.d(r,"i",(function(){return i})),e.d(r,"x",(function(){return s})),e.d(r,"D",(function(){return c})),e.d(r,"u",(function(){return u})),e.d(r,"f",(function(){return d})),e.d(r,"y",(function(){return l})),e.d(r,"A",(function(){return h})),e.d(r,"l",(function(){return m})),e.d(r,"t",(function(){return f})),e.d(r,"s",(function(){return p})),e.d(r,"B",(function(){return k})),e.d(r,"e",(function(){return g})),e.d(r,"c",(function(){return b})),e.d(r,"d",(function(){return v})),e.d(r,"z",(function(){return _})),e.d(r,"b",(function(){return w})),e.d(r,"w",(function(){return y})),e.d(r,"q",(function(){return A})),e.d(r,"o",(function(){return C})),e.d(r,"v",(function(){return O})),e.d(r,"a",(function(){return D})),e.d(r,"n",(function(){return x})),e.d(r,"j",(function(){return j})),e.d(r,"p",(function(){return S})),e.d(r,"g",(function(){return T})),e.d(r,"h",(function(){return I})),e.d(r,"m",(function(){return P})),e.d(r,"r",(function(){return R}));var a=e("b775");function n(t){return Object(a["b"])({url:"/workRoomGroup/index",method:"get",params:t})}function o(t){return Object(a["b"])({url:"/workRoomGroup/destroy",method:"delete",data:t})}function i(t){return Object(a["b"])({url:"/workRoomGroup/store",method:"post",data:t})}function s(t){return Object(a["b"])({url:"/workRoomGroup/update",method:"put",data:t})}function c(t){return Object(a["b"])({url:"/workRoom/index",method:"get",params:t})}function u(t){return Object(a["b"])({url:"/workRoom/syn",method:"put",data:t})}function d(t){return Object(a["b"])({url:"/workRoom/batchUpdate",method:"put",data:t})}function l(t){return Object(a["b"])({url:"/workContactRoom/index",method:"get",params:t})}function h(t){return Object(a["b"])({url:"/workEmployeeDepartment/memberIndex",method:"get",params:t})}function m(t){return Object(a["b"])({url:"/workDepartment/index",method:"get",params:t})}function f(t){return Object(a["b"])({url:"/workRoom/statisticsIndex",method:"get",params:t})}function p(t){return Object(a["b"])({url:"/workRoom/statistics",method:"get",params:t})}function k(t){return Object(a["b"])({url:"/workRoomAutoPull/index",method:"get",params:t})}function g(t){return Object(a["b"])({url:"/workRoomAutoPull/update",method:"put",data:t})}function b(t){return Object(a["b"])({url:"/workRoomAutoPull/store",method:"post",data:t})}function v(t){return Object(a["b"])({url:"/workRoomAutoPull/show",method:"get",params:t})}function _(t){return Object(a["b"])({url:"/workContactTagGroup/index",method:"get",params:t})}function w(t){return Object(a["b"])({url:"/workContactTag/store",method:"post",data:t})}function y(t){return Object(a["b"])({url:"/workContactTag/allTag",method:"get",params:t})}function A(t){return Object(a["b"])({url:"/workRoom/roomIndex",method:"get",params:t})}function C(t){return Object(a["b"])({url:"/roomTagPull/roomList",method:"get",params:t})}function O(t){return Object(a["b"])({url:"/roomTagPull/index",method:"get",params:t})}function D(t){return Object(a["b"])({url:"/roomTagPull/store",method:"POST",data:t})}function x(t){return Object(a["b"])({url:"/roomTagPull/show",method:"GET",params:t})}function j(t){return Object(a["b"])({url:"/roomTagPull/destroy",method:"DELETE",data:t})}function S(t){return Object(a["b"])({url:"/roomTagPull/remindSend",method:"GET",params:t})}function T(t){return Object(a["b"])({url:"/roomTagPull/chooseContact",method:"GET",params:t})}function I(t){return Object(a["b"])({url:"/roomTagPull/filterContact",method:"POST",data:t})}function P(t){return Object(a["b"])({url:"/roomTagPull/showContact",method:"GET",params:t})}function R(t){return Object(a["b"])({url:"/contactMessageBatchSend/showRoom",method:"GET",params:t})}},"6b75":function(t,r,e){"use strict";function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,a=new Array(r);e<r;e++)a[e]=t[e];return a}e.d(r,"a",(function(){return a}))},8522:function(t,r,e){t.exports=e.p+"assets/avatar-room-default.67bead38.svg"},"9d3f":function(t,r,e){},b85c:function(t,r,e){"use strict";e.d(r,"a",(function(){return n}));e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0");var a=e("06c5");function n(t,r){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Object(a["a"])(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==e["return"]||e["return"]()}finally{if(c)throw i}}}}},b92a:function(t,r,e){"use strict";e("c650")},c650:function(t,r,e){}}]);