(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["room-tag-pull"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f");var n=a("6b75");function s(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(t,e):void 0}}},"0e45":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},s=[],o=a("2877"),r={},i=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=i.exports},"0e64":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select-group"},[n("a-modal",{attrs:{"on-ok":"handleOk",width:526,footer:!1},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[n("template",{slot:"title"},[t._v(" 选择群聊 ")]),n("div",{staticClass:"content"},[n("div",{staticClass:"tips"},[t._v(" 全部群聊（"+t._s(t.groups.length)+"）： ")]),n("div",{staticClass:"groups"},t._l(t.groups,(function(e,s){return t.resetFlag?n("div",{key:s,staticClass:"item"},[n("div",{staticClass:"icon"},[n("img",{attrs:{src:a("8522")}})]),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"count"},[t._v(" "+t._s(e.contact_num)+" / "+t._s(e.roomMax)+" ")])]),n("div",[n("div",{staticClass:"select"},[t.resetFlag?n("a-checkbox",{attrs:{checked:e.select},on:{change:function(a){return t.selectChange(a,e)}}}):t._e()],1)])]):t._e()})),0),n("div",{staticClass:"confirm"},[n("a-button",{on:{click:function(e){t.modalShow=!1}}},[t._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)])],2)],1)},s=[],o=a("b85c"),r=(a("d3b7"),a("159b"),a("4de4"),a("59e4")),i={data:function(){return{modalShow:!1,loading:!1,groups:[],currentData:{},resetFlag:!0}},methods:{setSelect:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.currentData=a,this.getData((function(a){e.reset(),e.groups.forEach((function(e){t.forEach((function(t){t.wxChatId===e.wxChatId&&(e.select=!0)}))}))})),this.modalShow=!0},selectChange:function(t,e){this.resetFlag=!1,e.select=t.target.checked,this.resetFlag=!0},confirm:function(){this.hide();var t=this.groups.filter((function(t){return!0===t.select}));this.$emit("change",t,this.currentData)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(r["o"])({roomGroupId:0,page:1,perPage:1e3}).then((function(a){t.groups=a.data,e&&e()}))},show:function(){this.getData(),this.reset(),this.modalShow=!0},hide:function(){this.modalShow=!1},reset:function(){var t,e=Object(o["a"])(this.groups);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.select=!1}}catch(n){e.e(n)}finally{e.f()}}}},c=i,l=(a("2897"),a("2877")),u=Object(l["a"])(c,n,s,!1,null,"b583576e",null);e["a"]=u.exports},2263:function(t,e,a){"use strict";a("9c58")},2897:function(t,e,a){"use strict";a("9d3f")},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("6b75");function s(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=a("06c5");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return s(t)||o(t)||Object(r["a"])(t)||i()}},"2e79":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-pull"},[n("div",{staticClass:"content"},[n("div",{staticClass:"right-wrapper"},[n("div",{staticClass:"right"},[n("div",{staticClass:"rightTop"},[n("a-alert",{staticClass:"rightTips",attrs:{message:"每位客户每周最多收到来自客户群发管理员的1条群发消息，如选择的客户本周已收到过群发消息本条邀请将不会成功发送",banner:""}})],1),n("a-form",{staticClass:"form-two",attrs:{"label-col":{span:2},"wrapper-col":{span:15}}},[n("a-row",{staticClass:"titleName"},[t._v("基础信息")]),n("a-divider"),n("a-form-item",{staticClass:"form-item",attrs:{label:"任务名称"}},[n("a-col",{attrs:{span:8}},[n("a-input",{attrs:{maxLength:30,placeholder:"请输入任务名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),n("a-form-item",{staticClass:"form-item",attrs:{label:"选择群发账号"}},[n("a-button",{on:{click:function(e){return t.$refs.selectMember.setSelect(t.employees)}}},[t._v(" 选择成员 ")]),n("div",{staticClass:"tags"},t._l(t.employees,(function(e,a){return n("a-tag",{key:a},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("a-form-item",{staticClass:"form-item",attrs:{label:"筛选客户"}},[n("a-radio-group",{model:{value:t.form.choose_contact.is_all,callback:function(e){t.$set(t.form.choose_contact,"is_all",e)},expression:"form.choose_contact.is_all"}},[n("a-radio",{attrs:{value:1}},[t._v(" 筛选客户 ")]),n("a-radio",{attrs:{value:0}},[t._v(" 全部客户 ")])],1),n("div",{staticClass:"filterPanel"},[1==t.form.choose_contact.is_all?n("a-card",{attrs:{title:"筛选客户",bordered:!0}},[n("a-row",{staticClass:"filterRow"},[n("a-col",{staticClass:"lableName",attrs:{span:2}},[t._v("性别：")]),n("a-col",{attrs:{span:15}},[n("a-radio-group",{model:{value:t.form.choose_contact.gender,callback:function(e){t.$set(t.form.choose_contact,"gender",e)},expression:"form.choose_contact.gender"}},[n("a-radio",{attrs:{value:""}},[t._v("全部性别")]),n("a-radio",{attrs:{value:1}},[t._v("仅男性粉丝")]),n("a-radio",{attrs:{value:2}},[t._v("仅女性粉丝")]),n("a-radio",{attrs:{value:0}},[t._v("未知性别")])],1)],1)],1),n("a-row",{staticClass:"filterRow"},[n("a-col",{staticClass:"lableName",attrs:{span:2}},[t._v("添加时间：")]),n("a-col",{attrs:{span:15}},[n("a-range-picker",{model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1)],1),n("a-row",{staticClass:"filterRow"},[n("a-col",{staticClass:"lableName",attrs:{span:2}},[t._v("标签：")]),n("a-col",{attrs:{span:15}},[n("a-row",{staticClass:"filterRow flex"},[n("a-button",{on:{click:function(e){return t.$refs.labelGroup.show()}}},[t._v("选择标签")]),n("div",{staticClass:"ml16"},t._l(t.tags,(function(e,a){return n("a-tag",{key:a},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1)],1),0!=t.fansConditionArray.length?n("div",[n("a-divider",{attrs:{dashed:""}}),n("a-row",{staticClass:"filterRow"},[t._v(" 将发送消息给 "),t._l(t.fansConditionArray,(function(e,a){return a<=2?n("span",{key:a},[t._v("["+t._s(e)+"]")]):t._e()})),t._v(" 符合"+t._s(t.fansConditionArray.length)+"标签 "),t.fansConditionArray.length>3?n("span",[t._v("等")]):t._e(),t._v(" 条件的粉丝 ")],2)],1):t._e()],1):t._e(),1==t.isVerified?n("a-row",[n("div",{staticClass:"estimateNum"},[n("span",[n("a-icon",{attrs:{type:"file-search"}}),t._v("查看该消息预计送达人数：")],1),t.estimateBtnshow?n("span",{staticClass:"estimateBtn",on:{click:t.estimateSee}},[t._v("查看")]):t._e(),t.estimateBtnshow||t.estimateShowNum?t._e():n("a-spin"),t.estimateShowNum?n("span",{staticClass:"estimateBtn"},[t._v(" "+t._s(t.chooseCustomerNum)+" ")]):t._e()],1),t.estimateBtnshow||t.estimateShowNum?t._e():n("span",{staticClass:"estimateRightTips"},[t._v("人数计算中，请稍后（可能需要数分钟）")])]):t._e()],1)],1),n("a-row",{staticClass:"titleName"},[t._v("设置群信息")]),n("a-divider"),n("a-form-item",{staticClass:"form-item",attrs:{label:"入群引导语"}},[n("div",{staticClass:"leading"},[n("a-row",[n("a-textarea",{attrs:{id:"textarea",maxLength:1e3,rows:4,placeholder:"请输入回复内容"},model:{value:t.form.guide,callback:function(e){t.$set(t.form,"guide",e)},expression:"form.guide"}})],1),n("a-row",{staticClass:"tipsContent"},[n("a-col",{staticClass:"leftTips",attrs:{span:1}},[t._v("提示：")]),n("a-col",{staticClass:"rightTips",attrs:{span:23}},[n("a-alert",{attrs:{"show-icon":!1,message:"1、群人数上限为200人，超过200人时请 【添加多个群聊】，否则可能会导致部分用户 【无法入群】，添加多个群聊时，客户只会收到一条群发邀请",banner:""}}),n("a-alert",{attrs:{"show-icon":!1,message:"2、上传群二维码时请【仔细核对】，群二维码和群聊【对应错误】将导致【数据异常】",banner:""}}),n("a-alert",{attrs:{"show-icon":!1,message:"3、如果客户添加了多个客服，只会收到一位客服的入群邀请",banner:""}})],1)],1)],1)]),n("a-form-item",{staticClass:"form-item",attrs:{label:"添加群聊"}},[n("a-row",[n("a-button",{on:{click:function(e){return t.$refs.selectGroup.setSelect(t.rooms)}}},[t._v(" 选择群聊 ")]),n("div",{staticClass:"groups mt16"},t._l(t.rooms,(function(e,s){return n("div",{key:s,staticClass:"item flex"},[n("div",{staticClass:"group-card"},[n("img",{attrs:{src:a("8522")}}),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"count"},[t._v(t._s(e.contact_num)+" / "+t._s(e.roomMax)+"人")])]),n("div",{staticClass:"icon"},[n("a-icon",{attrs:{type:"delete"},on:{click:function(e){return t.rooms.splice(s,1)}}})],1)]),n("div",{staticClass:"mt16 ml16"},[n("m-upload",{model:{value:e.image,callback:function(a){t.$set(e,"image",a)},expression:"v.image"}})],1)])})),0)],1)],1),n("a-divider"),n("a-form-item",{staticClass:"form-item",attrs:{label:"过滤客户"}},[n("a-switch",{model:{value:t.form.filter_contact,callback:function(e){t.$set(t.form,"filter_contact",e)},expression:"form.filter_contact"}}),n("span",{staticClass:"switchPartTips"},[t._v("开启后已在群聊中的客户将不会收到邀请")]),n("a-row",[n("div",{staticClass:"estimateNum"},[n("span",[n("a-icon",{attrs:{type:"file-search"}}),t._v("查看过滤后预计送达人数：")],1),t.filterEstimateBtnshow?n("span",{staticClass:"estimateBtn",on:{click:t.filterEstimateSee}},[t._v("查看")]):t._e(),t.filterEstimateBtnshow||t.filterEstimateShowNum?t._e():n("a-spin"),t.filterEstimateShowNum?n("span",{staticClass:"estimateBtn"},[t._v(t._s(t.filterCustomerNum))]):t._e()],1),t.filterEstimateBtnshow||t.filterEstimateShowNum?t._e():n("span",{staticClass:"estimateRightTips"},[t._v("人数计算中，请稍后（可能需要数分钟）")])]),n("div",{staticClass:"btn-wrapper"},[n("a-button",{staticClass:"submitBtn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("通知成员发送邀请")]),n("span",{staticClass:"footBtnTips"},[t._v("发送后需要员工确认发送后才会将群二维码发送给对应的客户")])],1)],1)],1)],1),n("selectGroup",{ref:"selectGroup",on:{change:function(e){return t.rooms=e}}}),n("selectMember",{ref:"selectMember",on:{change:function(e){return t.employees=e}}}),n("labelGroup",{ref:"labelGroup",on:{choiceTagsArr:function(e){return t.tags=e}}})],1)])])},s=[],o=a("b85c"),r=a("5530"),i=(a("b0c0"),a("d81d"),a("a15b"),a("ac1f"),a("5319"),a("a434"),a("c297")),c=a("5880"),l=a("0e64"),u=a("4a04"),d=a("6010"),m=a("59e4"),f=a("c1df"),h=a.n(f),p={components:{Department:i["a"],selectGroup:l["a"],selectMember:u["a"],labelGroup:d["a"]},watch:{employees:function(t){this.filterEstimateBtnshow=!0,this.filterEstimateShowNum=!1,this.estimateBtnshow=!0,this.estimateShowNum=!1},rooms:function(t){this.filterEstimateBtnshow=!0,this.filterEstimateShowNum=!1},tags:function(t){this.filterEstimateBtnshow=!0,this.filterEstimateShowNum=!1,this.estimateBtnshow=!0,this.estimateShowNum=!1},"form.choose_contact.is_all":{handler:function(){this.filterEstimateBtnshow=!0,this.filterEstimateShowNum=!1,this.estimateBtnshow=!0,this.estimateShowNum=!1},deep:!0},"form.choose_contact.gender":{handler:function(){this.filterEstimateBtnshow=!0,this.filterEstimateShowNum=!1,this.estimateBtnshow=!0,this.estimateShowNum=!1},deep:!0},"form.time":{handler:function(){this.filterEstimateBtnshow=!0,this.filterEstimateShowNum=!1,this.estimateBtnshow=!0,this.estimateShowNum=!1},deep:!0}},data:function(){return{employees:[],tags:[],rooms:[],employeeNum:0,qrcodeName:"",isVerified:1,customerGender:1,chooseCustomerNum:-1,filterCustomerNum:-1,fansCondition:"",fansConditionArray:[],estimateBtnshow:!0,estimateShowNum:!1,selectSwitch:!1,filterEstimateBtnshow:!0,filterEstimateShowNum:!1,leadingWords:"",form:{name:"",employees:"",choose_contact:{is_all:1,gender:"",tag_ids:"",start_time:"",end_time:""},guide:"",filter_contact:!0,time:[]}}},computed:Object(r["a"])({},Object(c["mapGetters"])(["corpId"])),methods:{getParams:function(){return{name:this.form.name,employees:this.form.employees,choose_contact:this.form.choose_contact,guide:this.form.guide,filter_contact:this.form.filter_contact}},peopleChange:function(t){var e=[];t.map((function(t){e.push(t.employeeId)})),this.employeeNum=e.length,this.employeeIdList=e.join(",")},filterEstimateSee:function(){var t=this;if(!this.employees.length)return this.$message.error("未选择成员"),!1;if(!this.rooms.length)return this.$message.error("未选择群聊"),!1;if(""==this.form.time)return this.$message.error("请设置添加时间"),!1;this.filterEstimateBtnshow=!1;var e={choose_contact:{is_all:this.form.choose_contact.is_all,gender:this.form.choose_contact.gender,start_time:h()(this.form.time[0]).format("YYYY-MM-DD"),end_time:h()(this.form.time[1]).format("YYYY-MM-DD")}};e.rooms=this.rooms.map((function(t){return{id:t.id}})),e.employees=this.employees.map((function(t){return t.id})),e.choose_contact.tag_ids=this.tags.map((function(t){return t.id})),Object(m["h"])(e).then((function(e){t.filterCustomerNum=e.data[0],t.filterEstimateShowNum=!0}))},submit:function(){var t=this;if(!this.form.name)return this.$message.error("名称未填写"),!1;if(!this.employees.length)return this.$message.error("未选择成员"),!1;if(!this.rooms.length)return this.$message.error("未选择群聊"),!1;if(!this.form.guide)return this.$message.error("未输入引导语"),!1;var e,a=Object(o["a"])(this.rooms);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(!n.image)return this.$message.error("".concat(n.name,"未上传群二维码")),!1}}catch(r){a.e(r)}finally{a.f()}var s={name:this.form.name,guide:this.form.guide,rooms:this.rooms,filter_contact:+this.form.filter_contact,choose_contact:{is_all:this.form.choose_contact.is_all,gender:this.form.choose_contact.gender,start_time:h()(this.form.time[0]).format("YYYY-MM-DD"),end_time:h()(this.form.time[1]).format("YYYY-MM-DD")}};s.choose_contact.tag_ids=this.tags.map((function(t){return t.id})),s.employees=this.employees.map((function(t){return t.id})),Object(m["a"])(s).then((function(e){t.$message.success("添加成功"),t.$router.push("/roomTagPull/index")}))},estimateSee:function(){var t=this;if(!this.employees.length)return this.$message.error("未选择成员"),!1;this.estimateBtnshow=!1;var e={is_all:this.form.choose_contact.is_all,gender:this.form.choose_contact.gender};""!=this.form.time&&(e.start_time=h()(this.form.time[0]).format("YYYY-MM-DD"),e.end_time=h()(this.form.time[1]).format("YYYY-MM-DD")),e.employees=this.employees.map((function(t){return t.id})),e.tag_ids=this.tags.map((function(t){return t.id})),Object(m["g"])(e).then((function(e){t.chooseCustomerNum=e.data[0],t.estimateShowNum=!0}))},clickLable:function(t){-1==t.target.className.indexOf("lableSelect")?t.target.className=t.target.className+" lableSelect":t.target.className=t.target.className.replace("lableSelect","");var e=t.currentTarget.innerHTML,a=this.fansConditionArray.indexOf(e);-1==a?this.fansConditionArray.unshift(e):this.fansConditionArray.splice(a,1)}}},b=p,_=(a("6510"),a("2877")),v=Object(_["a"])(b,n,s,!1,null,null,null);e["default"]=v.exports},"2ee5":function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"g",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"h",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"c",(function(){return m})),a.d(e,"l",(function(){return f})),a.d(e,"k",(function(){return h})),a.d(e,"j",(function(){return p}));var n=a("b775");function s(t){return Object(n["b"])({url:"/channelCodeGroup/index",method:"get",params:t})}function o(t){return Object(n["b"])({url:"/channelCodeGroup/update",method:"put",data:t})}function r(t){return Object(n["b"])({url:"/channelCodeGroup/store",method:"post",data:t})}function i(t){return Object(n["b"])({url:"/channelCodeGroup/move",method:"put",data:t})}function c(t){return Object(n["b"])({url:"/channelCode/store",method:"post",data:t})}function l(t){return Object(n["b"])({url:"/channelCode/update",method:"put",data:t})}function u(t){return Object(n["b"])({url:"/channelCode/index",method:"get",params:t})}function d(t){return Object(n["b"])({url:"/channelCode/contact",method:"get",params:t})}function m(t){return Object(n["b"])({url:"/channelCode/show",method:"get",params:t})}function f(t){return Object(n["b"])({url:"/channelCode/statisticsIndex",method:"get",params:t})}function h(t){return Object(n["b"])({url:"/channelCode/statistics",method:"get",params:t})}function p(t){return Object(n["b"])({url:"/workDepartment/index",method:"get",params:t})}},3978:function(t,e,a){},4873:function(t,e,a){},"4a04":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[a("a-modal",{attrs:{"on-ok":"handleOk",width:636,footer:!1,centered:"",maskClosable:!1},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("template",{slot:"title"},[t._v(" 选择成员 ")]),a("div",{staticClass:"content"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"tips"},[t._v(" 没有想要添加的成员？ "),a("a",{attrs:{href:"#"}},[t._v("添加成员教程")])]),a("div",{staticClass:"search"},[a("a-input-search",{attrs:{placeholder:"请输入成员昵称"},on:{search:t.search}})],1),a("div",{staticClass:"member"},t._l(t.members,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])]),a("div",{staticClass:"radio"},[a("a-checkbox",{on:{change:function(a){return t.selectChange(e)}},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"v.select"}})],1)])})),0)]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"tips"},[t._v(" 已选成员：（"+t._s(t.selectedMembers.length)+"） ")]),a("div",{staticClass:"member"},t._l(t.selectedMembers,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.avatar}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])])])})),0)])]),a("div",{staticClass:"confirm"},[a("a-button",{on:{click:function(e){t.modalShow=!1}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:t.go}},[t._v("确定")])],1)],2)],1)},s=[],o=a("b85c"),r=(a("d3b7"),a("159b"),a("4de4"),a("a434"),a("2ee5")),i={data:function(){return{modalShow:!1,loading:!1,members:[],selectedMembers:[],currentData:{}}},methods:{setSelect:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.selectedMembers=[],t.forEach((function(t,a){e.selectedMembers[a]=t})),this.currentData=a,this.getData("",(function(t){e.selectedMembers.forEach((function(t){e.members.forEach((function(e){t.wxUserId===e.wxUserId&&(t.avatar||(t.avatar=e.avatar),e.select=!0)}))}))})),this.reset(),this.modalShow=!0},search:function(t){this.getData(t)},selectChange:function(t){var e=-1,a=this.selectedMembers.filter((function(a,n){if(a.id===t.id)return e=n,a}));if(a.length)return this.selectedMembers.splice(e,1),!1;this.selectedMembers.push(t)},reset:function(){var t,e=Object(o["a"])(this.members);try{for(e.s();!(t=e.n()).done;){var a=t.value;a.select=!1}}catch(n){e.e(n)}finally{e.f()}},go:function(){this.hide(),this.$emit("change",this.selectedMembers)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r["j"])({searchKeyWords:e}).then((function(e){t.members=e.data.employee,a&&a()}))},show:function(){this.getData(),this.reset(),this.selectedMembers=[],this.modalShow=!0},hide:function(){this.modalShow=!1}}},c=i,l=(a("2263"),a("2877")),u=Object(l["a"])(c,n,s,!1,null,"24741dee",null);e["a"]=u.exports},"4f1c":function(t,e,a){"use strict";a("4873")},"59e4":function(t,e,a){"use strict";a.d(e,"C",(function(){return s})),a.d(e,"k",(function(){return o})),a.d(e,"i",(function(){return r})),a.d(e,"x",(function(){return i})),a.d(e,"D",(function(){return c})),a.d(e,"u",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"y",(function(){return d})),a.d(e,"A",(function(){return m})),a.d(e,"l",(function(){return f})),a.d(e,"t",(function(){return h})),a.d(e,"s",(function(){return p})),a.d(e,"B",(function(){return b})),a.d(e,"e",(function(){return _})),a.d(e,"c",(function(){return v})),a.d(e,"d",(function(){return g})),a.d(e,"z",(function(){return y})),a.d(e,"b",(function(){return C})),a.d(e,"w",(function(){return w})),a.d(e,"q",(function(){return k})),a.d(e,"o",(function(){return j})),a.d(e,"v",(function(){return x})),a.d(e,"a",(function(){return O})),a.d(e,"n",(function(){return S})),a.d(e,"j",(function(){return T})),a.d(e,"p",(function(){return D})),a.d(e,"g",(function(){return I})),a.d(e,"h",(function(){return N})),a.d(e,"m",(function(){return $})),a.d(e,"r",(function(){return E}));var n=a("b775");function s(t){return Object(n["b"])({url:"/workRoomGroup/index",method:"get",params:t})}function o(t){return Object(n["b"])({url:"/workRoomGroup/destroy",method:"delete",data:t})}function r(t){return Object(n["b"])({url:"/workRoomGroup/store",method:"post",data:t})}function i(t){return Object(n["b"])({url:"/workRoomGroup/update",method:"put",data:t})}function c(t){return Object(n["b"])({url:"/workRoom/index",method:"get",params:t})}function l(t){return Object(n["b"])({url:"/workRoom/syn",method:"put",data:t})}function u(t){return Object(n["b"])({url:"/workRoom/batchUpdate",method:"put",data:t})}function d(t){return Object(n["b"])({url:"/workContactRoom/index",method:"get",params:t})}function m(t){return Object(n["b"])({url:"/workEmployeeDepartment/memberIndex",method:"get",params:t})}function f(t){return Object(n["b"])({url:"/workDepartment/index",method:"get",params:t})}function h(t){return Object(n["b"])({url:"/workRoom/statisticsIndex",method:"get",params:t})}function p(t){return Object(n["b"])({url:"/workRoom/statistics",method:"get",params:t})}function b(t){return Object(n["b"])({url:"/workRoomAutoPull/index",method:"get",params:t})}function _(t){return Object(n["b"])({url:"/workRoomAutoPull/update",method:"put",data:t})}function v(t){return Object(n["b"])({url:"/workRoomAutoPull/store",method:"post",data:t})}function g(t){return Object(n["b"])({url:"/workRoomAutoPull/show",method:"get",params:t})}function y(t){return Object(n["b"])({url:"/workContactTagGroup/index",method:"get",params:t})}function C(t){return Object(n["b"])({url:"/workContactTag/store",method:"post",data:t})}function w(t){return Object(n["b"])({url:"/workContactTag/allTag",method:"get",params:t})}function k(t){return Object(n["b"])({url:"/workRoom/roomIndex",method:"get",params:t})}function j(t){return Object(n["b"])({url:"/roomTagPull/roomList",method:"get",params:t})}function x(t){return Object(n["b"])({url:"/roomTagPull/index",method:"get",params:t})}function O(t){return Object(n["b"])({url:"/roomTagPull/store",method:"POST",data:t})}function S(t){return Object(n["b"])({url:"/roomTagPull/show",method:"GET",params:t})}function T(t){return Object(n["b"])({url:"/roomTagPull/destroy",method:"DELETE",data:t})}function D(t){return Object(n["b"])({url:"/roomTagPull/remindSend",method:"GET",params:t})}function I(t){return Object(n["b"])({url:"/roomTagPull/chooseContact",method:"GET",params:t})}function N(t){return Object(n["b"])({url:"/roomTagPull/filterContact",method:"POST",data:t})}function $(t){return Object(n["b"])({url:"/roomTagPull/showContact",method:"GET",params:t})}function E(t){return Object(n["b"])({url:"/contactMessageBatchSend/showRoom",method:"GET",params:t})}},6010:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tagsModal"},[a("a-modal",{staticClass:"modelCard",attrs:{title:"选择标签",maskClosable:!1},on:{ok:t.handleOk},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[t._l(t.lableArr,(function(e,n){return a("div",{key:n,staticClass:"labelRow"},[a("div",{staticClass:"labelTitle"},[t._v(t._s(e.groupName))]),a("div",{staticClass:"labelContent"},[a("div",{staticClass:"labeladdBtn",on:{click:function(a){t.showInput=e.id}}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加 ")],1),t.showInput==e.id?a("a-input",{staticClass:"lable_input",attrs:{placeholder:"输入后回车"},on:{blur:t.closeInput,pressEnter:function(a){return t.inputLable(e.id,n)}},model:{value:t.addlableCont,callback:function(e){t.addlableCont=e},expression:"addlableCont"}}):t._e(),t._l(e.tags,(function(e,n){return a("div",{key:n,ref:"hello",refInFor:!0,staticClass:"labelSub",class:[-1!=t.choiceTagsArr.indexOf(e)?"lableSelect":""],on:{click:function(a){return t.selectTags(e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)])})),a("span",{staticClass:"add_tags",on:{click:t.addNametags}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" 新建标签组 ")],1)],2),a("a-modal",{attrs:{title:"新建标签组"},on:{ok:t.handleNewTags},model:{value:t.addNewTags,callback:function(e){t.addNewTags=e},expression:"addNewTags"}},[a("div",{staticClass:"add_tigs"},[a("a-icon",{attrs:{type:"bell",theme:"filled"}}),t._v(" 管理员可根据不同部门选择展示不同的标签组，部门管理员可创建部门可见的标签 ")],1),a("a-form-model",{attrs:{model:t.tagsform,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"标签组名称"}},[a("a-input",{attrs:{placeholder:"请输入标签组名称"},model:{value:t.tagsform.name,callback:function(e){t.$set(t.tagsform,"name",e)},expression:"tagsform.name"}})],1)],1)],1)],1)},s=[],o=a("1da1"),r=(a("96cf"),a("a434"),a("d3b7"),a("159b"),a("b0c0"),a("7728")),i={data:function(){return{modalShow:!1,addNewTags:!1,showInput:0,addlableCont:"",lableArr:[],labelCol:{span:5},wrapperCol:{span:18},tagsform:{name:"",resource:1,selectSection:[]},tipsWarn:!0,choiceTagsArr:[]}},created:function(){this.getClientTags()},methods:{getClientTags:function(){var t=this;Object(r["d"])({page:1,perPage:10}).then((function(e){t.lableArr=e.data}))},selectTags:function(t){var e=this.choiceTagsArr.indexOf(t);-1==e?this.choiceTagsArr.push(t):this.choiceTagsArr.splice(e,1)},memberSelectChange:function(t){this.tagsform.selectSection=t},show:function(t){var e=this;this.choiceTagsArr=[],void 0!=t&&t.forEach((function(t,a){e.choiceTagsArr[a]=t})),this.modalShow=!0},delSelect:function(t){this.tagsform.selectSection.splice(t,1)},handleOk:function(t){this.modalShow=!1,this.$emit("choiceTagsArr",this.choiceTagsArr)},handleNewTags:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.tagsform.name){e.next=3;break}return t.$message.warning("标签组名称不能为空"),e.abrupt("return");case 3:Object(r["j"])({groupName:t.tagsform.name}).then((function(e){t.getClientTags(),t.tagsform.name="",t.$message.success("创建成功"),t.addNewTags=!1}));case 4:case"end":return e.stop()}}),e)})))()},closeInput:function(){this.showInput=!1},inputLable:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var s,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=[],s.push(a.addlableCont),o={groupId:t,tagName:s},n.next=5,Object(r["l"])(o).then((function(t){}));case 5:i={name:a.addlableCont},a.lableArr[e].tags.push(i),a.showInput=!1,a.addlableCont="";case 9:case"end":return n.stop()}}),n)})))()},addNametags:function(){this.addNewTags=!0}}},c=i,l=(a("981e"),a("2877")),u=Object(l["a"])(c,n,s,!1,null,null,null);e["a"]=u.exports},6510:function(t,e,a){"use strict";a("3978")},"6b75":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,"a",(function(){return n}))},"75af":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"automatic-pulling"},[a("a-card",[a("a-row",[a("a-button",{staticClass:"batch",attrs:{type:"primary"},on:{click:t.establishGroup}},[t._v("创建群邀请")])],1),a("div",{staticClass:"table-wrapper"},[a("a-table",{attrs:{columns:t.columns,"data-source":t.tableData},scopedSlots:t._u([{key:"name",fn:function(e){return a("div",{},[t._v(" "+t._s(e.name)+" ")])}},{key:"rooms",fn:function(e){return a("div",{},t._l(e.rooms,(function(e){return a("a-tag",{key:e.id,staticClass:"mb6"},[t._v(" "+t._s(e)+" ")])})),1)}},{key:"employees",fn:function(e){return a("div",{},t._l(e.employees,(function(e){return a("a-tag",{key:e.memberid,staticClass:"mb6"},[t._v(" "+t._s(e)+" ")])})),1)}},{key:"action",fn:function(e,n){return a("div",{},[[a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.send(n.id)}}},[t._v("提醒发送")]),a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.detail(n.id)}}},[t._v("详情")]),a("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteRow(n.id)}}},[t._v("删除")])]],2)}}])})],1)],1)],1)},s=[],o=a("1da1"),r=(a("96cf"),a("59e4")),i={data:function(){return{abc:!0,columns:[{title:"任务名称",dataIndex:"name"},{title:"群名称",scopedSlots:{customRender:"rooms"}},{title:"发送邀请成员",scopedSlots:{customRender:"employees"}},{title:"创建时间",dataIndex:"created_at"},{title:"已邀请客户",dataIndex:"invite_num"},{title:"已入群客户",dataIndex:"join_room_num"},{title:"未发送成员",dataIndex:"no_send_num"},{title:"未邀请客户",dataIndex:"no_invite_num"},{title:"操作",width:"150px",scopedSlots:{customRender:"action"}}],tableData:[{}],selectedRowKeys:[],workRoomAutoPullId:""}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;Object(r["v"])({name:""}).then((function(e){t.tableData=e.data.list}))},handleTableChange:function(t){var e=t.current,a=t.pageSize;this.pagination.current=e,this.pagination.pageSize=a},establishGroup:function(){this.$router.push({path:"/roomTagPull/create"})},detail:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$router.push({path:"/roomTagPull/detail",query:{id:t}});case 1:case"end":return a.stop()}}),a)})))()},deleteRow:function(t){var e=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(r["j"])({id:t}).then((function(t){e.$message.success("删除成功"),e.getList()}))}})},send:function(t){var e=this;Object(r["p"])({id:t}).then((function(t){e.$message.success("提醒成功"),e.getList()}))}}},c=i,l=(a("f458"),a("2877")),u=Object(l["a"])(c,n,s,!1,null,"32bae3f2",null);e["default"]=u.exports},7728:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"m",(function(){return o})),a.d(e,"f",(function(){return r})),a.d(e,"h",(function(){return i})),a.d(e,"g",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"i",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"d",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"j",(function(){return h})),a.d(e,"b",(function(){return p})),a.d(e,"k",(function(){return b}));var n=a("b775");function s(t){return Object(n["b"])({url:"/roomClockIn/store",method:"post",data:t})}function o(t){return Object(n["b"])({url:"/roomClockIn/update",method:"put",data:t})}function r(t){return Object(n["b"])({url:"/roomClockIn/destroy",method:"delete",data:t})}function i(t){return Object(n["b"])({url:"/roomClockIn/index",method:"get",params:t})}function c(t){return Object(n["b"])({url:"/roomClockIn/show",method:"get",params:t})}function l(t){return Object(n["b"])({url:"/roomClockIn/showContact",method:"get",params:t})}function u(t){return Object(n["b"])({url:"/roomClockIn/info",method:"get",params:t})}function d(t){return Object(n["b"])({url:"/workContactTag/store",method:"post",data:t})}function m(t){return Object(n["b"])({url:"/workContactTag/contactTagList",method:"get",params:t})}function f(t){return Object(n["b"])({url:"/roomClockIn/dayDetail",method:"get",params:t})}function h(t){return Object(n["b"])({url:"/workContactTagGroup/store",method:"post",data:t})}function p(t){return Object(n["b"])({url:"/roomClockIn/batchContactTags",method:"put",data:t})}function b(t){return Object(n["b"])({url:"/officialAccount/index",method:"GET",params:t})}},7798:function(t,e,a){},"78f4":function(t,e,a){},"79a5":function(t,e,a){},8522:function(t,e,a){t.exports=a.p+"assets/avatar-room-default.67bead38.svg"},"981e":function(t,e,a){"use strict";a("78f4")},"9c58":function(t,e,a){},"9d3f":function(t,e,a){},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var n=a("06c5");function s(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(c)throw r}}}}},c297:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"people-wrapper"},[a("div",{staticClass:"people-left"},[a("a-input-search",{staticClass:"add-input",attrs:{maxLength:15},on:{search:t.getDepartmentList},model:{value:t.searchKeyWords,callback:function(e){t.searchKeyWords="string"===typeof e?e.trim():e},expression:"searchKeyWords"}}),a("a-tree",{attrs:{"show-icon":"",checkable:"",replaceFields:t.replaceFields,checkStrictly:!1,"expanded-keys":t.expandedKeys,"selected-keys":t.selectedKeys,"tree-data":t.treeData},on:{check:t.onCheck,expand:t.onExpand},model:{value:t.checkedKeys,callback:function(e){t.checkedKeys=e},expression:"checkedKeys"}},[a("a-icon",{attrs:{slot:"folder",type:"folder-open"},slot:"folder"})],1)],1),a("div",{staticClass:"people-right"},[a("div",{staticClass:"total"},[t._v("已选择成员")]),a("ul",t._l(t.choosePeopleKey,(function(e,n){return a("li",{key:n,staticClass:"number"},[a("span",{staticClass:"title"},[t._v(t._s(e.employeeName))]),a("a-icon",{staticClass:"close",attrs:{type:"close"},on:{click:function(a){return t.deletePeople(e,n)}}})],1)})),0)])])},s=[],o=a("2909"),r=a("1da1"),i=a("5530"),c=(a("4de4"),a("d3b7"),a("a15b"),a("caad"),a("2532"),a("a434"),a("d81d"),a("0481"),a("4069"),a("159b"),a("99af"),a("96cf"),a("59e4")),l=a("5880"),u={name:"Department",props:{memberKey:{type:Array,default:function(){return[]}},isChecked:{type:Array,default:function(){return[]}}},data:function(){return{searchKeyWords:"",checkedKeys:[],replaceFields:{title:"name",key:"id",children:"son"},expandedKeys:[],selectedKeys:[],treeData:[],lastCheckdKeys:[],choosePeopleKey:[],departmentIds:[],flatAry:[],unchecked:[]}},watch:{memberKey:function(t){this.choosePeopleKey=t},choosePeopleKey:function(t){this.$emit("change",t)},isChecked:function(t){this.checkedKeys=t}},computed:Object(i["a"])({},Object(l["mapGetters"])(["corpName"])),created:function(){var t=this;this.choosePeopleKey=this.memberKey,this.checkedKeys=this.isChecked;var e=this.corpName?0:2e3;setTimeout((function(){t.getDepartmentList()}),e)},methods:{getDepartmentList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={searchKeyWords:t.searchKeyWords},e.prev=1,e.next=4,Object(c["l"])(a);case 4:n=e.sent,s=n.data,o=s.department,r=s.employee,""!==t.searchKeyWords&&t.$emit("search",r),t.department=o||[],t.employee=r||[],t.treeData=[{name:t.corpName,nameEn:"company",id:"company",slots:{icon:"folder"},son:o}],e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})))()},onCheck:function(t){var e=this,a=t.length,n=this.lastCheckdKeys.length,s=[],o=[];a>n?(s=t.filter((function(t){return-1==e.lastCheckdKeys.indexOf(t)&&"company"!==t})),this.getWorkDepartmentList(s.join(","))):(o=this.lastCheckdKeys.filter((function(e){return-1==t.indexOf(e)&&"company"!==e})),this.choosePeopleKey=this.choosePeopleKey.filter((function(t){return!o.includes(t.departmentId)}))),this.lastCheckdKeys=t},onExpand:function(t){this.expandedKeys=t},deletePeople:function(t,e){var a=this;this.choosePeopleKey.splice(e,1);var n=this.departmentIds[t.employeeId];n.map((function(t){var e=a.choosePeopleKey.filter((function(e){return e.departmentId==t}));if(0==e.length){var n=a.checkedKeys.indexOf("company");n>-1&&a.checkedKeys.splice(n,1),a.dealDeleteData(t),a.unchecked.map((function(t){var e=a.checkedKeys.indexOf(t);e>-1&&a.checkedKeys.splice(e,1)}))}})),0==this.choosePeopleKey.length&&(this.checkedKeys=[])},dealDeleteData:function(t){var e=this.treeData[0];this.flatAry=[],this.unchecked=[],this.flat(e.son,t);var a=this.unchecked.length;a>1&&this.filterId(this.unchecked[a-1])},filterId:function(t){var e=this;this.flatAry.filter((function(a){if(a.id==t)return e.unchecked.push(t),0!=a.parentId&&e.filterId(a.parentId),!0}))},flat:function(t,e){var a=this;t.forEach((function(t){a.flatAry.push(t),t.id==e&&(0!=t.parentId?a.unchecked=[t.id,t.parentId]:a.unchecked=[t.id]),t.son&&a.flat(t.son,e)}))},getWorkDepartmentList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,s,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.departmentIds={},a.prev=1,a.next=4,Object(c["A"])({departmentIds:t});case 4:n=a.sent,s=n.data,s=s||[],e.choosePeopleKey=[].concat(Object(o["a"])(e.choosePeopleKey),Object(o["a"])(s)),r=[],i=[],e.choosePeopleKey.forEach((function(t){var a=i.indexOf(t.employeeId);a>-1?e.departmentIds[t.employeeId].push(t.departmentId):(e.departmentIds[t.employeeId]=[t.departmentId],i.push(t.employeeId),r.push(t))})),e.choosePeopleKey=r,a.next=16;break;case 14:a.prev=14,a.t0=a["catch"](1);case 16:case"end":return a.stop()}}),a,null,[[1,14]])})))()}}},d=u,m=(a("4f1c"),a("2877")),f=Object(m["a"])(d,n,s,!1,null,"393e889a",null);e["a"]=f.exports},f458:function(t,e,a){"use strict";a("79a5")},f6af:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{staticClass:"pageTop"},[n("a-card",{staticClass:"topleft",staticStyle:{width:"373px"}},[n("a-row",[n("a-col",{attrs:{span:8}},[n("div",{staticClass:"conditionTitle"},[t._v("邀请入群条件")])]),n("a-col",{attrs:{span:1}},[t._v("|")]),n("a-col",{attrs:{span:15}},[n("span",[t._v("已有"+t._s(t.showData.join_room_num)+"人入群")])])],1),n("div",{staticClass:"tl_bottom mt20"},t._l(t.showData.rooms,(function(e,s){return n("div",{key:s,staticClass:"tlbRight mb6"},[n("div",{staticClass:"tlbr_left"},[n("img",{staticClass:"groupImg mr6",attrs:{src:a("8522")}}),n("div",{staticClass:"tlbrl_left"},[n("div",[t._v(t._s(e.name))]),n("div",{staticClass:"tlbrl_left_bottom"},[n("span",[t._v(t._s(e.contact_num)+"/"+t._s(e.room_max))]),n("span",[t._v("|")]),n("span",[t._v("本次入群："+t._s(e.contact_num)+"人")])])])])])})),0)],1),n("a-card",{staticClass:"topright"},[n("div",{staticClass:"conditionTitle"},[t._v("客户统计")]),n("a-row",{attrs:{type:"flex",justify:"space-between"}},[n("a-col",{attrs:{span:7}},[n("a-row",{staticClass:"tr_content"},[n("a-col",{staticClass:"trc_content",attrs:{span:11}},[n("div",{staticClass:"typeQuantity"},[t._v(t._s(t.showData.join_room_num))]),n("div",{staticClass:"trc_type"},[t._v("已入群客户")])]),n("a-col",{attrs:{span:2}},[n("div",{staticClass:"trc_middle"})]),n("a-col",{staticClass:"trc_content",attrs:{span:11}},[n("div",{staticClass:"typeQuantity"},[t._v(t._s(t.showData.no_join_room_num))]),n("div",{staticClass:"trc_type"},[t._v("未入群客户")])])],1)],1),n("a-col",{attrs:{span:7}},[n("a-row",{staticClass:"tr_content"},[n("a-col",{staticClass:"trc_content",attrs:{span:11}},[n("div",{staticClass:"typeQuantity"},[t._v(t._s(t.showData.invite_num))]),n("div",{staticClass:"trc_type"},[t._v(" 已邀请客户 ")])]),n("a-col",{attrs:{span:2}},[n("div",{staticClass:"trc_middle"})]),n("a-col",{staticClass:"trc_content",attrs:{span:11}},[n("div",{staticClass:"typeQuantity"},[t._v(t._s(t.showData.no_invite_num))]),n("div",{staticClass:"trc_type"},[t._v(" 未邀请客户 ")])])],1)],1),n("a-col",{attrs:{span:7}},[n("a-row",{staticClass:"tr_content"},[n("a-col",{staticClass:"trc_content",attrs:{span:11}},[n("div",{staticClass:"typeQuantity"},[t._v(t._s(t.showData.send_num))]),n("div",{staticClass:"trc_type"},[t._v(" 完成发送成员 ")])]),n("a-col",{attrs:{span:2}},[n("div",{staticClass:"trc_middle"})]),n("a-col",{staticClass:"trc_content",attrs:{span:11}},[n("div",{staticClass:"typeQuantity"},[t._v(t._s(t.showData.no_send_num))]),n("div",{staticClass:"trc_type"},[t._v(" 未完成发送成员 ")])])],1)],1)],1)],1)],1),n("div",{staticClass:"pageContent"},[n("a-card",[n("a-tabs",{attrs:{"default-active-key":"1",size:"large"},on:{change:t.callback}},[n("a-tab-pane",{key:"1",attrs:{tab:"客户详情"}}),n("a-tab-pane",{key:"2",attrs:{tab:"成员详情","force-render":""}})],1),n("div",{staticClass:"formStyle"},[n("a-form-model",{attrs:{model:t.form,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[t.clientTable?[n("a-form-model-item",{attrs:{label:"搜索客户"}},[n("a-input",{attrs:{placeholder:"请输入要搜索的客户"},model:{value:t.filter.contact.contact_name,callback:function(e){t.$set(t.filter.contact,"contact_name",e)},expression:"filter.contact.contact_name"}})],1),n("a-form-model-item",{attrs:{label:"所属客服"}},[n("a-select",{attrs:{placeholder:"请选择客服"},model:{value:t.filter.contact.wx_user_id,callback:function(e){t.$set(t.filter.contact,"wx_user_id",e)},expression:"filter.contact.wx_user_id"}},t._l(t.showData.employees,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.wxUserId}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:"送达状态"}},[n("a-select",{attrs:{placeholder:"请选择送达状态"},model:{value:t.filter.contact.send_status,callback:function(e){t.$set(t.filter.contact,"send_status",e)},expression:"filter.contact.send_status"}},[n("a-select-option",{attrs:{value:"0"}},[t._v(" 未收到邀请 ")]),n("a-select-option",{attrs:{value:"1"}},[t._v(" 已收到邀请 ")]),n("a-select-option",{attrs:{value:"2"}},[t._v(" 客户已不是好友 ")]),n("a-select-option",{attrs:{value:"3"}},[t._v(" 客户接受已达上限 ")])],1)],1),n("a-form-model-item",{attrs:{label:"是否入群"}},[n("a-select",{attrs:{placeholder:"客户是否入群"},model:{value:t.filter.contact.is_join_room,callback:function(e){t.$set(t.filter.contact,"is_join_room",e)},expression:"filter.contact.is_join_room"}},[n("a-select-option",{attrs:{value:"0"}},[t._v(" 已入群 ")]),n("a-select-option",{attrs:{value:"1"}},[t._v(" 未入群 ")])],1)],1),n("a-form-model-item",{attrs:{label:"邀请群聊"}},[n("a-select",{attrs:{placeholder:"请选择群聊"},model:{value:t.filter.contact.room_id,callback:function(e){t.$set(t.filter.contact,"room_id",e)},expression:"filter.contact.room_id"}},t._l(t.showData.rooms,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("a-button",{staticClass:"ml16 mt4",on:{click:t.resetContact}},[t._v("重置")])]:[t.clientTable?t._e():n("a-form-model-item",{attrs:{label:"搜索成员"}},[n("a-select",{attrs:{placeholder:"请选择客服"},model:{value:t.filter.staff.wx_user_id,callback:function(e){t.$set(t.filter.staff,"wx_user_id",e)},expression:"filter.staff.wx_user_id"}},t._l(t.showData.employees,(function(e,a){return n("a-select-option",{key:a,attrs:{value:e.wxUserId}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("a-form-model-item",{staticClass:"tasksNum",attrs:{label:"收到任务条数"}},[n("a-select",{attrs:{placeholder:"请选择收到任务条数"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[n("a-select-option",{attrs:{value:"0"}},[t._v(" 1条 ")]),n("a-select-option",{attrs:{value:"1"}},[t._v(" 多条 ")])],1)],1),n("a-form-model-item",{attrs:{label:"发送状态"}},[n("a-select",{attrs:{placeholder:"请选择送达状态"},model:{value:t.filter.staff.task_type,callback:function(e){t.$set(t.filter.staff,"task_type",e)},expression:"filter.staff.task_type"}},[n("a-select-option",{attrs:{value:"0"}},[t._v(" 未完成发送 ")]),n("a-select-option",{attrs:{value:"1"}},[t._v(" 已完成发送 ")])],1)],1),n("a-button",{staticClass:"ml16 mt4",on:{click:t.resetStaff}},[t._v("重置")])]],2)],1),n("div",{staticClass:"tableStyle"},[t.clientTable?n("a-table",{attrs:{rowKey:"workRoomAutoPullId",columns:t.one.columns,"data-source":t.one.tableData},scopedSlots:t._u([{key:"contact_name",fn:function(e){return n("div",{},[n("img",{staticStyle:{width:"35px"},attrs:{src:e.avatar}}),t._v(" "+t._s(e.contact_name)+" ")])}},{key:"employee_name",fn:function(e){return n("div",{},[n("div",{staticClass:"belongTo"},[n("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(e.employee_name)+" ")],1)])}},{key:"send_status",fn:function(e){return n("div",{},[n("span",[t._v(" "+t._s(t.sendStatusMap[e.send_status])+" ")])])}},{key:"room_name",fn:function(e){return n("div",{},[t._v(" "+t._s(e.room_name)+" ")])}},{key:"is_join_room",fn:function(e){return n("div",{},[t._v(" "+t._s(0===e.is_join_room?"未入群":"已入群")+" ")])}}],null,!1,902061085)},[n("div",{attrs:{slot:"action"},slot:"action"},[[n("a-button",{attrs:{type:"link"},on:{click:t.detail}},[t._v("详情")])]],2)]):n("a-table",{attrs:{columns:t.memberColumns,"data-source":t.memberTable},scopedSlots:t._u([{key:"name",fn:function(e){return n("div",{staticClass:"clientColumn flex"},[n("img",{staticClass:"clientImg mr6",attrs:{src:e.avatar}}),t._v(" "+t._s(e.name)+" ")])}},{key:"contact_num",fn:function(e){return n("div",{},[t._v(" "+t._s(e.contact_num)+" ")])}}])},[n("div",{attrs:{slot:""},slot:"default"}),n("div",{attrs:{slot:"action"},slot:"action"},[n("a-popover",{attrs:{placement:"topLeft"}},[n("template",{slot:"content"},[t._v("该员工已发送该消息，无法提醒发送")]),n("span",{staticClass:"warn_send"},[t._v("提醒发送")])],2)],1)])],1)],1)],1)])},s=[],o=a("5530"),r=(a("4de4"),a("d3b7"),a("59e4")),i={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},clientTable:!0,form:{type:""},filter:{contact:{contact_name:"",wx_user_id:"",send_status:"",is_join_room:"",room_id:""},staff:{wx_user_id:"",is_send:"",task_type:""}},one:{columns:[{title:"客户",scopedSlots:{customRender:"contact_name"}},{title:"所属成员",scopedSlots:{customRender:"employee_name"}},{title:"送达状态",scopedSlots:{customRender:"send_status"}},{title:"邀请群聊",scopedSlots:{customRender:"room_name"}},{title:"是否入群",scopedSlots:{customRender:"is_join_room"}},{title:"操作",scopedSlots:{customRender:"action"}}],tableData:[]},memberColumns:[{title:"成员",scopedSlots:{customRender:"name"}},{title:"客户数",scopedSlots:{customRender:"contact_num"}},{title:"已邀请",scopedSlots:{customRender:"invite_num"}},{title:"收到任务条数",scopedSlots:{customRender:"member"}},{title:"发送状态",scopedSlots:{customRender:"member"}},{key:"action",dataIndex:"action",title:"操作",width:"200px",scopedSlots:{customRender:"action"}}],memberTable:[],showData:{employees:{},rooms:[{name:"",id:"",room_max:"",contact_num:""}],join_room_num:0,no_join_room_num:0,invite_num:0,no_invite_num:0,send_num:0,no_send_num:0},sendStatusMap:{0:"未收到",1:"已收到",2:"客户已不是好友",3:"客户接受已达上限"}}},mounted:function(){this.getListData(),this.getData()},methods:{getData:function(){var t=this;Object(r["n"])({id:this.$route.query.id}).then((function(e){t.showData.employees=e.data.employees,t.showData.rooms=e.data.rooms}))},getListData:function(){var t=this;Object(r["m"])({page:"",perPage:"",id:this.$route.query.id,type:1}).then((function(e){t.one.tableData=e.data.list})),Object(r["m"])({page:"",perPage:"",id:this.$route.query.id,type:2}).then((function(e){t.memberTable=e.data.list}))},resetContact:function(){this.filter.contact={contact_name:"",wx_user_id:"",send_status:"",is_join_room:"",room_id:""}},resetStaff:function(){this.filter.staff={wx_user_id:"",is_send:"",task_type:""}},callback:function(t){this.clientTable=2!=t},detail:function(){this.$router.push({path:"/roomTagPull/clientDetails"})}},watch:{"filter.contact":{handler:function(){var t=this;Object(r["m"])(Object(o["a"])(Object(o["a"])({id:this.$route.query.id,type:1},this.filter.contact),{},{page:"",perPage:""})).then((function(e){t.one.tableData=e.data.list}))},deep:!0},"filter.staff":{handler:function(){var t=this;Object(r["m"])(Object(o["a"])(Object(o["a"])({id:this.$route.query.id,type:2},this.filter.staff),{},{page:"",perPage:""})).then((function(e){t.memberTable=e.data.list}))},deep:!0}}},c=i,l=(a("fc00"),a("2877")),u=Object(l["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports},fc00:function(t,e,a){"use strict";a("7798")}}]);