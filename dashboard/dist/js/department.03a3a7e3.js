(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["department"],{"00b5":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return c}));var n=a("b775");function r(e){return Object(n["b"])({url:"/workEmployee/index",method:"get",params:e})}function i(e){return Object(n["b"])({url:"/workEmployee/synEmployee",method:"put",data:e})}function c(e){return Object(n["b"])({url:"/workEmployee/searchCondition",method:"get",data:e})}},3300:function(e,t,a){},5422:function(e,t,a){"use strict";a("3300")},"6edd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("a-card",[a("div",{staticClass:"syn"},[a("p",{staticClass:"time"},[e._v("最后一次同步时间："+e._s(e.syncTime))]),a("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/department/index@sync",expression:"'/department/index@sync'"}],on:{click:e.syncEmployeeDefine}},[e._v("同步企业微信通讯录")])],1),a("a-form",{attrs:{"label-col":{span:7},"wrapper-col":{span:14}}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{lg:8}},[a("a-form-item",{attrs:{label:"组织名称"}},[a("a-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),a("a-col",{attrs:{lg:8}},[a("a-form-item",{attrs:{label:"上级组织名称"}},[a("a-input",{model:{value:e.parentName,callback:function(t){e.parentName=t},expression:"parentName"}})],1)],1),a("a-col",{attrs:{lg:8}},[a("a-form-item",{attrs:{label:""}},[a("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/department/index@search",expression:"'/department/index@search'"}],attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("a-button",{staticStyle:{marginLeft:"5px"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),a("a-table",{staticStyle:{marginTop:"20px"},attrs:{bordered:"",rowKey:"departmentId",columns:e.columns,"data-source":e.tableData,pagination:e.pagination,indentSize:0,expandIconColumnIndex:3,expandIcon:e.expandIcon},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("div",{staticClass:"action"},[[a("a-button",{directives:[{name:"permission",rawName:"v-permission",value:"/department/index@check",expression:"'/department/index@check'"}],attrs:{type:"link"},on:{click:function(t){return e.checkMember(n.departmentId)}}},[e._v("查看成员")])]],2)}}])})],1),a("a-modal",{attrs:{title:"查看人员",maskClosable:!1,width:600,visible:e.memberShow,footer:null},on:{cancel:function(t){e.memberShow=!1}}},[a("a-table",{attrs:{bordered:"",rowKey:"employeeId",columns:e.memberColumns,"data-source":e.memberData,pagination:e.memberPagination},on:{change:e.handleMemberChange}})],1)],1)},r=[],i=a("1da1"),c=(a("96cf"),a("b0c0"),a("00b5")),o=a("b775");function s(e){return Object(o["b"])({url:"/workDepartment/pageIndex",method:"get",params:e})}function m(e){return Object(o["b"])({url:"/workDepartment/showEmployee",method:"get",params:e})}var l=[{align:"center",title:"序号",dataIndex:"departmentPath"},{align:"center",title:"组织架构名称",dataIndex:"name"},{align:"center",title:"部门级别",dataIndex:"level"},{align:"center",title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],p=[{title:"姓名",dataIndex:"employeeName"},{title:"手机号码",dataIndex:"phone"},{title:"角色",dataIndex:"roleName"}],u={data:function(){return{columns:l,memberColumns:p,pagination:{total:0,current:1,pageSize:10,showSizeChanger:!0},name:"",parentName:"",syncTime:"",tableData:[],memberShow:!1,memberData:[],memberPagination:{total:0,current:1,pageSize:10},departmentId:""}},created:function(){this.getSyncTime(),this.getTableData()},methods:{getTableData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={name:e.name,parentName:e.parentName,page:e.pagination.current,perPage:e.pagination.pageSize},t.prev=1,t.next=4,s(a);case 4:n=t.sent,r=n.data,i=r.page.total,c=r.list,e.pagination.total=i,e.tableData=c,t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](1);case 14:case"end":return t.stop()}}),t,null,[[1,12]])})))()},syncEmployeeDefine:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["b"])();case 3:e.getTableData(),e.getSyncTime(),e.$message.success("同步成功"),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getSyncTime:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])();case 2:a=t.sent,n=a.data,e.syncTime=n.syncTime;case 5:case"end":return t.stop()}}),t)})))()},search:function(){this.pagination.current=1,this.getTableData()},reset:function(){this.name="",this.parentName=""},expandIcon:function(e){var t=this.$createElement;if(e.record.children)return e.record.children.length>0?e.expanded?t("a",{class:"expand-wrapper",on:{click:function(t){e.onExpand(e.record,t)}}},[t("span",{class:"expand"},["收起"])]):t("a",{class:"expand-wrapper",on:{click:function(t){e.onExpand(e.record,t)}}},[t("span",{class:"expand"},["展开"])]):void 0},handleTableChange:function(e){var t=e.current,a=e.pageSize;this.pagination.current=t,this.pagination.pageSize=a,this.getTableData()},checkMember:function(e){this.departmentId=e,this.getMemberData(),this.memberShow=!0},handleMemberChange:function(e){var t=e.current,a=e.pageSize;this.memberPagination.current=t,this.memberPagination.pageSize=a,this.getMemberData()},getMemberData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={departmentId:t.departmentId,page:t.memberPagination.current,perPage:t.memberPagination.pageSize},e.prev=1,e.next=4,m(a);case 4:n=e.sent,r=n.data,i=r.page.total,c=r.list,t.memberPagination.total=i,t.memberData=c,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}},d=u,b=(a("5422"),a("2877")),g=Object(b["a"])(d,n,r,!1,null,"3ca975ca",null);t["default"]=g.exports}}]);