(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["work-fission"],{"0510":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-card",[s("a-tabs",{attrs:{type:"card"},on:{change:t.switchPage},model:{value:t.tabPage,callback:function(e){t.tabPage=e},expression:"tabPage"}},[s("a-tab-pane",{key:1,attrs:{tab:"企微任务宝"}},[s("workFissionIndex")],1),s("a-tab-pane",{key:2,attrs:{tab:"数据详情","force-render":""}},[s("workFissionDataShow")],1)],1)],1)},i=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"room-fission-index"},[s("div",{staticClass:"add-row"},[s("div",{staticClass:"btn"},[s("router-link",{attrs:{to:{path:"/workFission/create"}}},[s("a-button",{attrs:{type:"primary"}},[t._v("创建活动")])],1)],1),s("div",{staticClass:"search"},[s("a-input-search",{attrs:{placeholder:"请输入要搜索的活动"},on:{search:t.search}})],1)]),s("a-card",[s("a-table",{attrs:{columns:t.table.columns,"data-source":t.table.data},scopedSlots:t._u([{key:"operating",fn:function(e){return s("div",{staticClass:"btn-group"},[s("a",{on:{click:function(s){return t.goInvite(e)}}},[t._v("邀请客户参与")]),s("a-divider",{attrs:{type:"vertical"}}),s("a",{on:{click:function(s){return t.$refs.details.show(e.id)}}},[t._v("详情")]),s("a-divider",{attrs:{type:"vertical"}}),s("a-popover",{attrs:{trigger:"click",placement:"bottomRight"}},[s("template",{slot:"content"},[s("div",{staticClass:"divider-btn",on:{click:function(s){return t.goUpdate(e)}}},[t._v("修改")]),s("div",{staticClass:"divider-btn",on:{click:function(s){return t.del(e)}}},[t._v("删除")])]),s("a",[t._v("编辑")]),s("a-icon",{style:{color:"#1890ff"},attrs:{type:"caret-down"}})],2)],1)}},{key:"member_use",fn:function(e){return s("div",{},t._l(e.service_employees,(function(e){return s("a-tag",{key:e.id},[s("a-icon",{style:{color:"#7da3d1"},attrs:{type:"user","two-tone-color":"#7da3d1"}}),t._v(" "+t._s(e.name)+" ")],1)})),1)}},{key:"client_tag",fn:function(e){return s("div",{},t._l(e.contact_tags,(function(e){return s("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)}}])})],1),s("Details",{ref:"details"})],1)},r=[],n=s("b85c"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"word-fission-details"},[a("a-modal",{attrs:{"on-ok":"handleOk",width:760,footer:!1,centered:""},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("template",{slot:"title"},[t._v("活动详情")]),a("div",{staticClass:"content"},[a("div",{staticClass:"left-content"},[a("div",{ref:"qrCode",staticClass:"qr-code"}),a("div",{staticClass:"name"},[t._v(t._s(t.data.active_name))]),a("div",{staticClass:"btn"},[a("a-button",{attrs:{type:"primary",block:""},on:{click:t.downQrcode}},[t._v("下载二维码")])],1),a("div",{staticClass:"btn"},[a("a-button",{attrs:{block:""},on:{click:t.goUpdate}},[t._v("修改")])],1)]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"block",staticStyle:{"align-items":"end"}},[a("span",{staticClass:"title"},[t._v("链接详情：")]),a("div",{staticClass:"block-content"},[a("div",{staticClass:"flex"},[a("span",{staticClass:"ellipses link-text"},[t._v(" "+t._s(t.data.link)+" ")]),a("span",{staticClass:"copy-text",on:{click:t.copyLink}},[t._v("复制")])]),a("p",{staticClass:"link-desc"},[a("span",[t._v(" 提示：因企业微信限制，如果客户修改了微信昵称，可能无法通过邀请链接参与活动 ")])])])]),a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 活动时间： ")]),a("div",{staticClass:"block-content"},[a("div",{staticClass:"time"},[t._v(" "+t._s(t.data.active_time)+" ")])])]),a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 使用成员： ")]),a("div",{staticClass:"block-content"},[a("div",{staticClass:"member flex"},t._l(t.data.service_employees,(function(e){return a("div",{key:e.id,staticClass:"item flex"},[a("img",{attrs:{src:e.avatar}}),a("span",[t._v(t._s(e.name))])])})),0)])]),t.data.contact_tags?a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 客户标签： ")]),a("div",{staticClass:"block-content"},[a("div",{staticClass:"member flex"},t._l(t.data.contact_tags,(function(e){return a("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)])]):t._e(),a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 欢迎语： ")]),a("div",{staticClass:"block-content"},[a("pre",{staticClass:"welcome-text"},[t._v("              "+t._s(t.data.welcome_text)+"\n            ")])])]),a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 欢迎语链接： ")]),a("div",{staticClass:"block-content"},[a("div",{staticClass:"link-card"},[a("div",{staticClass:"link-title"},[t._v(" "+t._s(t.data.welcome_title)+" ")]),a("div",{staticClass:"info flex"},[a("div",{staticClass:"desc"},[t._v(" "+t._s(t.data.welcome_desc)+" ")]),a("div",{staticClass:"img"},[a("img",{attrs:{src:s("f0cd")}})])])])])])])])],2),a("input",{ref:"copyInput",staticClass:"copy-input",attrs:{type:"text"}})],1)},c=[],m=(s("9911"),s("c2bc")),d=s("d044"),u=s.n(d),v={data:function(){return{modalShow:!1,loading:!1,data:{},id:""}},methods:{goUpdate:function(){this.$router.push({path:"/workFission/edit",query:{id:this.id}})},getData:function(t){var e=this;Object(m["d"])({id:t}).then((function(t){t.data.service_employees&&(t.data.service_employees=JSON.parse(t.data.service_employees)),t.data.contact_tags&&(t.data.contact_tags=JSON.parse(t.data.contact_tags)),e.data=t.data,e.initQrcode()}))},copyLink:function(){var t=this.$refs.copyInput;t.value=this.data.link,t.select(),document.execCommand("Copy"),this.$message.success("复制成功")},downQrcode:function(){var t=this.$refs.qrCode.childNodes[1],e=document.createElement("a"),s=new MouseEvent("click");e.download="qrcode",e.href=t.src,e.dispatchEvent(s)},initQrcode:function(){this.$refs.qrCode.innerHTML="",new u.a(this.$refs.qrCode,{text:this.data.link,width:122,height:122})},show:function(t){this.getData(t),this.id=t,this.modalShow=!0},hide:function(){this.modalShow=!1}}},p=v,f=(s("abaa"),s("2877")),h=Object(f["a"])(p,o,c,!1,null,"23afc7a1",null),g=h.exports,C={data:function(){return{table:{columns:[{title:"活动名称",dataIndex:"active_name"},{title:"使用成员",scopedSlots:{customRender:"member_use"}},{title:"扫码添加人数",dataIndex:"employeeNum"},{title:"创建时间",dataIndex:"created_at"},{title:"活动状态",dataIndex:"status"},{title:"操作",scopedSlots:{customRender:"operating"}}],data:[]}}},mounted:function(){this.getData()},methods:{goInvite:function(t){this.$router.push({path:"/workFission/invite",query:{id:t.id}})},goUpdate:function(t){this.$router.push({path:"/workFission/edit",query:{id:t.id}})},search:function(t){this.getData(t)},del:function(t){var e=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(m["c"])({id:t.id}).then((function(t){200===t.code&&(e.getData(),e.$message.success("删除成功"))}))}})},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(m["g"])({active_name:e}).then((function(e){var s,a=Object(n["a"])(e.data.list);try{for(a.s();!(s=a.n()).done;){var i=s.value;i.service_employees&&(i.service_employees=JSON.parse(i.service_employees)),i.contact_tags&&(i.contact_tags=JSON.parse(i.contact_tags))}}catch(l){a.e(l)}finally{a.f()}t.table.data=e.data.list}))}},components:{Details:g}},b=C,_=(s("fd16"),Object(f["a"])(b,l,r,!1,null,"23ad34b9",null)),k=_.exports,x=s("6610"),w={components:{workFissionIndex:k,workFissionDataShow:x["default"]},data:function(){return{tabPage:1}},methods:{switchPage:function(){}}},y=w,T=Object(f["a"])(y,a,i,!1,null,null,null);e["default"]=T.exports},"06c5":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("fb6a"),s("d3b7"),s("b0c0"),s("a630"),s("3ca3"),s("ac1f");var a=s("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Object(a["a"])(t,e):void 0}}},"0d6d":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-applets"},[s("a-modal",{attrs:{"on-ok":"handleOk",width:637},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[s("template",{slot:"title"},[t._v(" 添加小程序 ")]),s("div",{staticClass:"form"},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[s("span",{staticClass:"required"},[t._v("*")]),t._v(" 小程序标题： ")]),s("div",{staticClass:"input"},[s("a-input",{attrs:{placeholder:"请输入小程序标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[s("span",{staticClass:"required"},[t._v("*")]),t._v(" 小程序APPID： ")]),s("div",{staticClass:"input"},[s("a-input",{attrs:{placeholder:"请输入小程序APPID"},model:{value:t.form.appid,callback:function(e){t.$set(t.form,"appid",e)},expression:"form.appid"}}),s("div",{staticClass:"tips"},[s("a",{attrs:{href:"#"}},[t._v("如何获取小程序APPID？")])])],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[s("span",{staticClass:"required"},[t._v("*")]),t._v(" 小程序路径： ")]),s("div",{staticClass:"input"},[s("a-input",{attrs:{placeholder:"请输入小程序路径"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}}),s("div",{staticClass:"tips"},[s("a",{attrs:{href:"#"}},[t._v("如何获取小程序路径？")])])],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[s("span",{staticClass:"required"},[t._v("*")]),t._v(" 小程序封面： ")]),s("div",{staticClass:"input"},[s("m-upload",{ref:"upload"})],1)])]),s("template",{slot:"footer"},[s("a-button",{key:"back",on:{click:t.hide}},[t._v(" 取消 ")]),s("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.addClick}},[t._v(" 添加 ")])],1)],2)],1)},i=[],l=s("5530"),r={data:function(){return{modalShow:!1,loading:!1,form:{title:"",appid:"",path:""}}},methods:{show:function(){this.modalShow=!0},hide:function(){this.modalShow=!1},addClick:function(){var t=this;return this.form.title?this.form.appid?this.form.path?this.$refs.upload.url?(this.loading=!0,void setTimeout((function(){t.loading=!1,t.hide(),t.$message.success("添加成功"),t.$emit("change",Object(l["a"])(Object(l["a"])({},t.form),{},{image:t.$refs.upload.url}))}),2e3)):(this.$message.warning("图片未上传"),!1):(this.$message.warning("路径未填写"),!1):(this.$message.warning("APPID未填写"),!1):(this.$message.warning("标题未填写"),!1)}}},n=r,o=(s("7fab"),s("2877")),c=Object(o["a"])(n,a,i,!1,null,"437d892a",null);e["a"]=c.exports},"17de":function(t,e,s){},"17f7":function(t,e,s){"use strict";s("32b6")},"1a0b":function(t,e,s){},"1a29":function(t,e,s){"use strict";s("572a")},"220c":function(t,e,s){},2263:function(t,e,s){"use strict";s("9c58")},"292e":function(t,e,s){},"29dc":function(t,e,s){},"2a22":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-public"},[s("a-dropdown",{staticClass:"add-account-select"},[s("a-button",[t._v(" 选择公众号 "),s("a-icon",{attrs:{type:"down"}})],1),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",{on:{click:function(e){return t.$router.push("/officialAccount/create")}}},[s("div",{staticClass:"add-account"},[s("a-icon",{attrs:{type:"plus"}}),t._v(" 添加公众号 ")],1)]),s("a-menu-item",[s("div",{staticClass:"account-item"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:"https://wx.qlogo.cn/mmopen/9YAYFgu8QC3ibLZ708eUjyWa9hfweLnLfhGB5mGJ0pibq9IWfndUy6WFAwy0w0n58fvgH4iaapFlDROeKHfcL7gPhmXEvr0E9Km/64"}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v("MoChat科技")]),s("div",{staticClass:"type"},[t._v(" 服务号 "),s("a-tag",{attrs:{color:"green"}},[t._v(" 已认证 ")])],1)])])]),s("a-menu-item",[s("div",{staticClass:"account-item"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:"https://wx.qlogo.cn/mmopen/9YAYFgu8QC3ibLZ708eUjyWa9hfweLnLfhGB5mGJ0pibq9IWfndUy6WFAwy0w0n58fvgH4iaapFlDROeKHfcL7gPhmXEvr0E9Km/64"}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v("MoChat科技")]),s("div",{staticClass:"type"},[t._v(" 服务号 "),s("a-tag",{attrs:{color:"green"}},[t._v(" 已认证 ")])],1)])])])],1)],1)],1)},i=[],l={name:"Public"},r=l,n=(s("1a29"),s("2877")),o=Object(n["a"])(r,a,i,!1,null,"1e3b2e0f",null);e["a"]=o.exports},"2ee5":function(t,e,s){"use strict";s.d(e,"d",(function(){return i})),s.d(e,"g",(function(){return l})),s.d(e,"e",(function(){return r})),s.d(e,"f",(function(){return n})),s.d(e,"a",(function(){return o})),s.d(e,"i",(function(){return c})),s.d(e,"h",(function(){return m})),s.d(e,"b",(function(){return d})),s.d(e,"c",(function(){return u})),s.d(e,"l",(function(){return v})),s.d(e,"k",(function(){return p})),s.d(e,"j",(function(){return f}));var a=s("b775");function i(t){return Object(a["b"])({url:"/channelCodeGroup/index",method:"get",params:t})}function l(t){return Object(a["b"])({url:"/channelCodeGroup/update",method:"put",data:t})}function r(t){return Object(a["b"])({url:"/channelCodeGroup/store",method:"post",data:t})}function n(t){return Object(a["b"])({url:"/channelCodeGroup/move",method:"put",data:t})}function o(t){return Object(a["b"])({url:"/channelCode/store",method:"post",data:t})}function c(t){return Object(a["b"])({url:"/channelCode/update",method:"put",data:t})}function m(t){return Object(a["b"])({url:"/channelCode/index",method:"get",params:t})}function d(t){return Object(a["b"])({url:"/channelCode/contact",method:"get",params:t})}function u(t){return Object(a["b"])({url:"/channelCode/show",method:"get",params:t})}function v(t){return Object(a["b"])({url:"/channelCode/statisticsIndex",method:"get",params:t})}function p(t){return Object(a["b"])({url:"/channelCode/statistics",method:"get",params:t})}function f(t){return Object(a["b"])({url:"/workDepartment/index",method:"get",params:t})}},"313e":function(t,e,s){t.exports=s("310f")(570)},"313f":function(t,e,s){"use strict";s("292e")},"32b6":function(t,e,s){},"36f3":function(t,e,s){"use strict";s("da58")},"3eae":function(t,e,s){"use strict";s("f465")},"4a04":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"details"},[s("a-modal",{attrs:{"on-ok":"handleOk",width:636,footer:!1,centered:"",maskClosable:!1},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[s("template",{slot:"title"},[t._v(" 选择成员 ")]),s("div",{staticClass:"content"},[s("div",{staticClass:"left-content"},[s("div",{staticClass:"tips"},[t._v(" 没有想要添加的成员？ "),s("a",{attrs:{href:"#"}},[t._v("添加成员教程")])]),s("div",{staticClass:"search"},[s("a-input-search",{attrs:{placeholder:"请输入成员昵称"},on:{search:t.search}})],1),s("div",{staticClass:"member"},t._l(t.members,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar}})]),s("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])]),s("div",{staticClass:"radio"},[s("a-checkbox",{on:{change:function(s){return t.selectChange(e)}},model:{value:e.select,callback:function(s){t.$set(e,"select",s)},expression:"v.select"}})],1)])})),0)]),s("div",{staticClass:"right-content"},[s("div",{staticClass:"tips"},[t._v(" 已选成员：（"+t._s(t.selectedMembers.length)+"） ")]),s("div",{staticClass:"member"},t._l(t.selectedMembers,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar}})]),s("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")])])])})),0)])]),s("div",{staticClass:"confirm"},[s("a-button",{on:{click:function(e){t.modalShow=!1}}},[t._v("取消")]),s("a-button",{attrs:{type:"primary"},on:{click:t.go}},[t._v("确定")])],1)],2)],1)},i=[],l=s("b85c"),r=(s("d3b7"),s("159b"),s("4de4"),s("a434"),s("2ee5")),n={data:function(){return{modalShow:!1,loading:!1,members:[],selectedMembers:[],currentData:{}}},methods:{setSelect:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.selectedMembers=[],t.forEach((function(t,s){e.selectedMembers[s]=t})),this.currentData=s,this.getData("",(function(t){e.selectedMembers.forEach((function(t){e.members.forEach((function(e){t.wxUserId===e.wxUserId&&(t.avatar||(t.avatar=e.avatar),e.select=!0)}))}))})),this.reset(),this.modalShow=!0},search:function(t){this.getData(t)},selectChange:function(t){var e=-1,s=this.selectedMembers.filter((function(s,a){if(s.id===t.id)return e=a,s}));if(s.length)return this.selectedMembers.splice(e,1),!1;this.selectedMembers.push(t)},reset:function(){var t,e=Object(l["a"])(this.members);try{for(e.s();!(t=e.n()).done;){var s=t.value;s.select=!1}}catch(a){e.e(a)}finally{e.f()}},go:function(){this.hide(),this.$emit("change",this.selectedMembers)},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r["j"])({searchKeyWords:e}).then((function(e){t.members=e.data.employee,s&&s()}))},show:function(){this.getData(),this.reset(),this.selectedMembers=[],this.modalShow=!0},hide:function(){this.modalShow=!1}}},o=n,c=(s("2263"),s("2877")),m=Object(c["a"])(o,a,i,!1,null,"24741dee",null);e["a"]=m.exports},"572a":function(t,e,s){},"591b":function(t,e,s){"use strict";s("17de")},6479:function(t,e,s){},6610:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"word-fission-data-show"},[s("div",{staticClass:"select-fission flex mb20"},[s("span",{staticClass:"label"},[t._v(" 选择活动： ")]),s("div",{staticClass:"select"},[s("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择活动"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},t._l(t.activitys,(function(e){return s("a-select-option",{key:e.id},[t._v(" "+t._s(e.active_name)+" ")])})),1)],1)]),s("a-card",{staticClass:"mb20",attrs:{title:"活动实时数据"}},[s("div",{staticClass:"data-panel"},[s("div",{staticClass:"data"},[s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.user_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 参与客户总数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 1.点击链接进入活动页面生成专属海报的客户 2.通过此裂变活动总添加企业微信客服的客户总数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.loss_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 流失客户总数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 参加的活动的客户中，流失掉的全部客户数（包括新老客户） ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.insert_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 净增客户总数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 参与客户总数-流失客户数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.today_increase_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 今日新增客户数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 今日参加活动的客户数，是指全部客户数，不单指新客户数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)])])]),s("div",{staticClass:"data-panel"},[s("div",{staticClass:"data"},[s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.new_increase_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 参与新客户数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 扫码的新客户，是指客户从来没有加过企业的任何一个员工，这样算是新客户 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.new_loss_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 新增客户流失数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 扫码的新客户数中，流失的新客户数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.net_increase)+" ")]),s("div",{staticClass:"desc"},[t._v(" 净增新客户数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 参与新客户数-新增客户流失数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)])]),s("div",{staticClass:"data"},[s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.fission_rate)+" ")]),s("div",{staticClass:"desc"},[t._v(" 裂变率 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 裂变率=（参与客户总数-一级客户）/参数客户总数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.insert_rate)+" ")]),s("div",{staticClass:"desc"},[t._v(" 留存率 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 留存率=（参与客户总数-流失客户总数）/参与客户总数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.data.user.share_rate)+" ")]),s("div",{staticClass:"desc"},[t._v(" 分享率 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 分享率=助力人数/参与客户总数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)])])])]),s("a-card",{staticClass:"mb20",attrs:{title:"客户裂变数据"}},[s("div",{staticClass:"client-data"},[s("div",{staticClass:"table"},[s("a-table",{attrs:{columns:t.table.clientFission.col,"data-source":t.table.clientFission.data,pagination:!1,bordered:""}})],1),s("div",{staticClass:"chart"},[s("div",{attrs:{id:"echarts"}})])])]),s("a-card",{attrs:{title:"客户数据"}},[s("div",{staticClass:"count-box flex fz14"},[s("div",{staticClass:"count"},[t._v(" 共"+t._s(t.table.clientData.total)+"个客户 ")]),s("span"),s("div",{staticClass:"update fz13",on:{click:t.resetFilter}},[s("a-icon",{attrs:{type:"redo"}}),t._v(" 更新数据 ")],1)]),s("div",{staticClass:"filter"},[s("div",{staticClass:"filter-input-row"},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("搜索客户：")]),s("a-input-search",{attrs:{placeholder:"请输入客户名称"},model:{value:t.filterFormData.nickname,callback:function(e){t.$set(t.filterFormData,"nickname",e)},expression:"filterFormData.nickname"}})],1),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("所属成员：")]),s("a-dropdown",[s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},t._l(t.members,(function(e){return s("a-menu-item",{key:e.id,on:{click:function(){t.filterFormData.employee.id=e.id,t.filterFormData.employee.wxUserId=e.wxUserId,t.filterFormData.employee.name=e.name}}},[t._v(" "+t._s(e.name)+" ")])})),1),s("a-button",{staticStyle:{"margin-left":"8px"}},[t._v(" "+t._s(t.filterFormData.employee.name?t.filterFormData.employee.name:"请选择成员")+" "),s("a-icon",{attrs:{type:"down"}})],1)],1)],1),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("添加时间：")]),s("a-range-picker",{model:{value:t.filterFormData.time,callback:function(e){t.$set(t.filterFormData,"time",e)},expression:"filterFormData.time"}})],1),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("完成状态：")]),s("a-dropdown",[s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",{on:{click:function(e){t.filterFormData.status=1}}},[t._v(" 已完成 ")]),s("a-menu-item",{on:{click:function(e){t.filterFormData.status=0}}},[t._v(" 未完成 ")])],1),s("a-button",{staticStyle:{"margin-left":"8px"}},[""===t.filterFormData.status?s("span",[t._v(" 请选择 ")]):s("span",[t._v(" "+t._s(0===t.filterFormData.status?"未完成":"已完成")+" ")]),s("a-icon",{attrs:{type:"down"}})],1)],1)],1),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("流失状态：")]),s("a-dropdown",[s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",{on:{click:function(e){t.filterFormData.loss=1}}},[t._v(" 已流失 ")]),s("a-menu-item",{on:{click:function(e){t.filterFormData.loss=0}}},[t._v(" 未流失 ")])],1),s("a-button",{staticStyle:{"margin-left":"8px"}},[""===t.filterFormData.loss?s("span",[t._v(" 请选择 ")]):s("span",[t._v(" "+t._s(0===t.filterFormData.loss?"未流失":"已流失")+" ")]),s("a-icon",{attrs:{type:"down"}})],1)],1)],1),s("div",{staticClass:"reset",on:{click:t.resetFilter}},[s("a-button",[t._v(" 重置 ")])],1)])]),s("div",{staticClass:"table"},[s("a-table",{attrs:{columns:t.table.clientData.col,"data-source":t.table.clientData.data},on:{change:t.switchClientDataPage},scopedSlots:t._u([{key:"operating",fn:function(e){return s("div",{staticClass:"btn-group"},[0==e.contact_id||0==e.employee_id?s("span",{staticStyle:{color:"gray"}},[t._v("客户详情")]):s("a",{on:{click:function(s){return t.$router.push({path:"/workContact/contactFieldPivot?contactId="+e.contact_id+"&employeeId="+e.employee_id+"&isContact=2"})}}},[t._v("客户详情")]),s("a-divider",{attrs:{type:"vertical"}}),s("a",{on:{click:function(s){return t.$refs.inviteDetails.show(e.id)}}},[t._v("邀请详情")])],1)}}])})],1)]),s("inviteDetails",{ref:"inviteDetails"})],1)},i=[],l=s("5530"),r=(s("99af"),s("b0c0"),s("313e")),n=s.n(r),o=s("c2bc"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"word-fission-details"},[s("a-modal",{attrs:{"on-ok":"handleOk",width:760,footer:!1,centered:""},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[s("template",{slot:"title"},[t._v(" 邀请详情 ")]),s("div",{staticClass:"content"},[s("div",{staticClass:"data-panel"},[s("div",{staticClass:"data"},[s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.statistics.total_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 邀请总客户数 ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.statistics.new_count)+" ")]),s("div",{staticClass:"desc"},[t._v(" 邀请新客户数 "),s("a-popover",[s("template",{slot:"content"},[t._v(" 新客户数为邀请好友中所有未添加企业任意员工的人数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.statistics.loss)+" ")]),s("div",{staticClass:"desc"},[t._v(" 流失客户数 ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"count"},[t._v(" "+t._s(t.statistics.insert)+" ")]),s("div",{staticClass:"desc"},[t._v(" 净增客户总数 ")])])])]),s("div",{staticClass:"table"},[s("a-table",{attrs:{bordered:"",align:"center",columns:t.table.col,"data-source":t.table.data},scopedSlots:t._u([{key:"status",fn:function(e){return s("div",{},[t._v(" "+t._s(0===e.loss?"未流失":"已流失")+" ")])}}])})],1)])],2)],1)},m=[],d={data:function(){return{modalShow:!1,table:{col:[{title:"客户",dataIndex:"nickname"},{title:"状态",scopedSlots:{customRender:"status"}},{title:"添加时间",dataIndex:"createdAt"}],data:[]},statistics:{total_count:0,new_count:0,loss:0,insert:0}}},methods:{getData:function(t){var e=this;Object(o["f"])({id:t}).then((function(t){e.statistics.total_count=t.data.total_count,e.statistics.new_count=t.data.new_count,e.statistics.loss=t.data.loss,e.statistics.insert=t.data.insert,e.table.data=t.data.user_list}))},show:function(t){this.getData(t),this.modalShow=!0},hide:function(){this.modalShow=!1}}},u=d,v=(s("17f7"),s("2877")),p=Object(v["a"])(u,c,m,!1,null,"6d734acc",null),f=p.exports,h={data:function(){return{table:{clientFission:{col:[{title:"裂变等级",dataIndex:"level"},{title:"裂变客户数",dataIndex:"clientCount"}],data:[{level:"一级裂变",clientCount:0},{level:"二级裂变",clientCount:0},{level:"三级裂变",clientCount:0}]},clientData:{col:[{title:"客户",dataIndex:"nickname"},{title:"活动名称",dataIndex:"active_name"},{title:"所属成员",dataIndex:"employees"},{title:"添加时间",dataIndex:"created_at"},{title:"流失状态",dataIndex:"loss"},{title:"达成阶梯等级",dataIndex:"level"},{title:"完成情况",dataIndex:"status"},{title:"邀请好友数",dataIndex:"invite_count"},{title:"操作",scopedSlots:{customRender:"operating"}}],data:[],total:0,page:1}},filterFormData:{nickname:"",employee:{id:"",name:""},time:[],status:"",loss:""},activitys:[],select:[],data:{user:{user_count:0,loss_count:0,today_increase_count:0,new_increase_count:0,new_loss_count:0,invite_count:0,insert_count:0,net_increase:0,fission_rate:0,insert_rate:0,share_rate:0},level:{first_level:0,second_level:0,third_level:0}},members:[]}},mounted:function(){this.getActivityList()},methods:{resetFilter:function(){this.filterFormData={nickname:"",employee:{id:"",name:""},time:[],status:"",loss:""}},switchClientDataPage:function(t){this.getUserList({},t.current),this.table.clientData.page=t},getUserList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(o["i"])(Object(l["a"])({fission_ids:JSON.stringify(this.select),page:s},e)).then((function(e){t.table.clientData.data=e.data.list,t.table.clientData.total=e.data.page.total}))},getStatisticsData:function(){var t=this;Object(o["h"])({fission_ids:JSON.stringify(this.select)}).then((function(e){t.data=e.data,t.members=e.data.employee,t.table.clientFission.data[0].clientCount=t.data.level.first_level,t.table.clientFission.data[1].clientCount=t.data.level.second_level,t.table.clientFission.data[2].clientCount=t.data.level.third_level,t.getUserList(),t.initChart()}))},getActivityList:function(){var t=this;Object(o["g"])().then((function(e){t.activitys=e.data.list,t.select[0]=t.activitys[0].id,t.getStatisticsData()}))},initChart:function(){var t=n.a.init(document.getElementById("echarts")),e=this.table.clientFission.data,s=[e[0].clientCount,e[1].clientCount,e[2].clientCount];t.setOption({grid:{left:"5%",right:"5%",bottom:"5%",top:"10%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:function(t){return"\n            ".concat(t[0].name,'\n            <br/>\n            <span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(36,207,233,0.9)"></span>\n            ').concat(t[0].seriesName,":").concat(t[0].value,"\n          ")}},backgroundColor:"#fff",xAxis:{show:!1,type:"value"},yAxis:[{type:"category",inverse:!0,axisLabel:{show:!0,textStyle:{color:"#000"}},splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},data:["一级裂变客户","二级裂变客户","三级裂变客户"]},{type:"category",inverse:!0,axisTick:"none",axisLine:"none",show:!0,axisLabel:{textStyle:{color:"#000",fontSize:"13"},formatter:function(t){return t>=1e4?(t/1e4).toLocaleString():t.toLocaleString()}},data:s}],series:[{name:"客户数量",type:"bar",zlevel:1,itemStyle:{normal:{barBorderRadius:30,color:new n.a.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#1789db"},{offset:1,color:"rgb(46,200,207,1)"}])}},barWidth:20,data:s},{name:"背景",type:"bar",barWidth:20,barGap:"-100%",data:s,itemStyle:{normal:{color:"#f5f5f5",barBorderRadius:30}}}]})}},watch:{filterFormData:{handler:function(){var t={};t.nickname=this.filterFormData.nickname,t.employee=this.filterFormData.employee.wxUserId,t.status=this.filterFormData.status,t.loss=this.filterFormData.loss,this.filterFormData.time.length?(t.start_time=this.filterFormData.time[0].format("YYYY-MM-DD hh:ss"),t.end_time=this.filterFormData.time[1].format("YYYY-MM-DD hh:ss")):(t.start_time="",t.end_time=""),this.table.clientData.page=1,this.getUserList(t)},deep:!0},select:function(){this.getStatisticsData()}},components:{inviteDetails:f}},g=h,C=(s("3eae"),Object(v["a"])(g,a,i,!1,null,"6a892061",null));e["default"]=C.exports},"6b75":function(t,e,s){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}s.d(e,"a",(function(){return a}))},"7cce":function(t,e,s){"use strict";s("bf2f")},"7fab":function(t,e,s){"use strict";s("6479")},"86f9":function(t,e,s){},9728:function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABIAEkDASIAAhEBAxEB/8QAHQABAAICAwEBAAAAAAAAAAAAAAYIBQcCBAkBA//EADEQAAEDAwIDBwMDBQAAAAAAAAEAAgMEBREGIQcSMQgTIkFRYXEUgZEWUqEyQrHB0f/EABoBAAIDAQEAAAAAAAAAAAAAAAQGAAIDBwX/xAAuEQABAwMCBAUCBwAAAAAAAAABAAIDBAURITEGEkFRE0NhkcEUcSOBgqHC0eH/2gAMAwEAAhEDEQA/APStERELJERVy408XLlPf6myWatfR0NI7u5pqdxa+WQf1DmG4AO2B1IPXZelQUEtwl8KPTqT2QdVVMpGc71Y1FRJ1bUPkMjp5XSHcuLyT+VJ9LcU9SaUq45Ke5TVFO05dS1TzJG8eYwenyMFMsnC8rW5jlBPYjHyV4zL2wnD2YH3yrjIsTpTUdNq3T1FdqUFsVSzm5CcljgcOafggj7LLJLex0bixwwRomNrg8BzdiilCi6lCwetGqLoiLRVRaX4K6Eo7jatRVl7o46uorKuWkkbMM4a05dj0JcTuN/CFuaQlsbiOoC/CgpIaSF3cxtj717pX8oxzPPU/JRDax9PDJEzQvxqPTVUFM2aVsj9Q3On3WkdQdmNslQ+Sy3YRROJIgrGE8vsHt6/j8qO37s9XHT2m7jdJrnBUPpIjL9PBE48wBHN4jjGBk9PJWZXCWJk0T45Gh7HtLXNcMgg9QUfFxHcI+UOfkDHQZI7Zx/qwks1G/JDcE+pWs+zqXnh00PzyirlDM+m3+8rZ6w+k7DSaZskNtoWGOlhLuQOOTuS45PnuVmEHVztqah8zNnElXgiMETY3bgIpQoupQgHolqi6Ii0VUXFrQwYHRHPaxpc4hrR1JOAutNUNf3bonhwxkOacggrOQZblaxHDl21wkeGgAnBccBdGW4zRN2hEnuDj+Fj4q6SS4RSTnABxjGA3KFA11RZOmiz7GCNoaOi5L4DkL6jl56KQYk9FH1KFRysFC7td6OxW+aur6hlLSQjmfLIdh/0+w3K0BrftG19bK+m03EKGmGR9XOwOlf7gHZo+cn4US4rcTanX94cyJ7orNTuIpoOnN5d44fuP8Db1zBF0y12GOJglqxlx6dB/Z/ZJlddHvcWQHDe/Urv3bUFzv0xluNfU1ryc5nlL8fAPT7KzHCbXNJqvTVJT981tzpImxTwOd4jygAPA8wdvg7KrC/SColpZmSwyPhlYctfG4tcD7EL1rnaorjAIs8pbsQPjsgaKvfRymTcHdXcWPvt9odN2yavuE7aeniGSXHdx9APMn0VVIeJWqYI+7bfq4txjxSlx/J3WGud5r71MJbhW1FbIOjqiVzyPjJ2SlFwnJzjxpRy+m6YJL+zl/DYc+qztZxGvf6muF2t1wqbeamZ0gijkPKG58ILehwMdQtj6P7SlTA9kGo6MVMWw+rpGhrx7uZ0P2x8FaPROs9spKhgjewaDAPX3SxHWzxOL2u39vZXhsGo7bqi3srbXWR1lO7+5h3afRwO7T7FTpef+kdYXLRV3jr7bOY3AgSRE+CVv7XDzH+PJegC5lebYbbI3DstdnHfTG/unS3Vv1jDkYI3XnIiIuwrnyIiKKIiIooiIiiiL0bRFz3izyP1fxTZYfN/L5X/2Q=="},"9c58":function(t,e,s){},a86c:function(t,e,s){"use strict";s("f0de")},a9e0:function(t,e,s){},abaa:function(t,e,s){"use strict";s("ceb8")},b5d0:function(t,e,s){"use strict";s("b636a")},b636a:function(t,e,s){},b85c:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");var a=s("06c5");function i(t,e){var s="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var i=0,l=function(){};return{s:l,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){o=!0,r=t},f:function(){try{n||null==s["return"]||s["return"]()}finally{if(o)throw r}}}}},bf2f:function(t,e,s){},c2bc:function(t,e,s){"use strict";s.d(e,"g",(function(){return i})),s.d(e,"c",(function(){return l})),s.d(e,"d",(function(){return r})),s.d(e,"e",(function(){return n})),s.d(e,"k",(function(){return o})),s.d(e,"a",(function(){return c})),s.d(e,"h",(function(){return m})),s.d(e,"i",(function(){return d})),s.d(e,"f",(function(){return u})),s.d(e,"b",(function(){return v})),s.d(e,"j",(function(){return p}));var a=s("b775");function i(t){return Object(a["b"])({url:"/workFission/index",method:"GET",params:t})}function l(t){return Object(a["b"])({url:"/workFission/destroy",method:"DELETE",data:t})}function r(t){return Object(a["b"])({url:"/workFission/show",method:"GET",params:t})}function n(t){return Object(a["b"])({url:"/workFission/info",method:"GET",params:t})}function o(t){return Object(a["b"])({url:"/workFission/update",method:"PUT",data:t})}function c(t){return Object(a["b"])({url:"/workFission/store",method:"POST",data:t})}function m(t){return Object(a["b"])({url:"/workFission/statistics",method:"GET",params:t})}function d(t){return Object(a["b"])({url:"/workFission/inviteData",method:"GET",params:t})}function u(t){return Object(a["b"])({url:"/workFission/inviteDetail",method:"GET",params:t})}function v(t){return Object(a["b"])({url:"/workFission/chooseContact",method:"GET",params:t})}function p(t){return Object(a["b"])({url:"/workFission/invite",method:"POST",data:t})}},c909:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"work-fission-invite"},[s("a-card",[s("div",{staticClass:"block qr-code"},[s("div",{staticClass:"title"},[t._v(" 选择客户 ")]),s("div",{staticClass:"content"},[s("div",{staticClass:"option"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("所属员工：")]),s("a-button",{on:{click:t.selectMemberShow}},[t._v("选择员工")]),s("div",{staticClass:"ml16"},t._l(t.filterSendForm.services,(function(e){return s("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("选择客服：")]),s("a-radio-group",{attrs:{options:t.serviceOptions,"default-value":"0"},on:{change:t.resetSendCount},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1),s("div",{staticClass:"item"},["1"===t.filterValue?s("div",{staticClass:"filter"},[s("div",{staticClass:"client-info"},[s("span",{staticClass:"client-title"},[t._v("性别：")]),s("a-radio-group",{attrs:{options:t.genderOptions,"default-value":"-1"},on:{change:t.resetSendCount},model:{value:t.genderValue,callback:function(e){t.genderValue=e},expression:"genderValue"}})],1),s("div",{staticClass:"client-info"},[s("span",{staticClass:"client-title"},[t._v("添加时间：")]),s("a-range-picker",{model:{value:t.filterSendForm.time,callback:function(e){t.$set(t.filterSendForm,"time",e)},expression:"filterSendForm.time"}})],1)]):t._e()]),s("div",{staticClass:"select-all"},[t._v(" 将群发消息给全部账号的 "),-1===t.sendCount?s("a",{on:{click:t.getSendCount}},[t._v("获取")]):s("span",[t._v(" "+t._s(t.sendCount)+" ")]),t._v(" 个客户 ")])])])]),s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 邀请信息 ")]),s("div",{staticClass:"welcome-box"},[s("div",{staticClass:"content welcome-text"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("邀请文案：")]),s("div",{staticClass:"content text-1"},[s("div",{staticClass:"input"},[s("m-enter-text",{ref:"text",model:{value:t.form.msg.text,callback:function(e){t.$set(t.form.msg,"text",e)},expression:"form.msg.text"}})],1)])]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("邀请链接：")]),s("div",{staticClass:"content text-2"},[s("div",{staticClass:"link-form"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("链接标题：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msg.link.title,callback:function(e){t.$set(t.form.msg.link,"title",e)},expression:"form.msg.link.title"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("链接摘要：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msg.link.desc,callback:function(e){t.$set(t.form.msg.link,"desc",e)},expression:"form.msg.link.desc"}})],1)]),s("div",{staticClass:"item"},[s("span",[t._v("链接封面：")]),s("div",{staticClass:"input"},[s("m-upload",{model:{value:t.form.msg.link.image,callback:function(e){t.$set(t.form.msg.link,"image",e)},expression:"form.msg.link.image"}})],1)])])])])]),s("div",{staticClass:"preview"},[s("div",{staticClass:"tips"},[t._v(" 企业微信邀请客户参与预览 ")]),s("m-preview",{ref:"preview"})],1)])]),s("a-button",{attrs:{type:"primary",size:"large"},on:{click:t.sendInvite}},[t._v(" 通知成员发送 ")])],1),s("selectMember",{ref:"selectMember",on:{change:t.selectMemberChange}})],1)},i=[],l=(s("9911"),s("d81d"),s("4a04")),r=s("c2bc"),n={data:function(){return{form:{msg:{text:"",link:{title:"",desc:"",image:""}}},serviceOptions:[{label:"全部客户",value:"0"},{label:"筛选客户",value:"1"}],genderOptions:[{label:"全部性别",value:"-1"},{label:"仅男性粉丝",value:"1"},{label:"仅女性粉丝",value:"2"},{label:"未知性别",value:"0"}],filterValue:"0",genderValue:"-1",filterSendForm:{time:[],services:[]},sendCount:-1}},mounted:function(){var t="你好，我们正在进行xxx活动，只要邀请x位好友添加我的微信就可以获得奖品\n\n参与流程：\n①点击下面链接，生成专属海报\n②进入链接后长按保存海报，将海报发给好友或朋友圈\n③邀请x位好友扫码添加，即可成功获得奖品\n④进入链接点击查看进度，完成任务后点击「领取奖励」即可领取哦\n\n注意事项：请不要直接转发活动链接给好友，是无法成功记录数据的哦~";this.$refs.text.addUserName(t),this.form.msg.text=t,this.form.msg.link.title="点击这里，完成任务领取奖品吧👇",this.form.msg.link.desc="快来参加活动吧"},methods:{selectMemberShow:function(){this.$refs.selectMember.setSelect(this.filterSendForm.services)},sendInvite:function(){var t=this,e=this.getVerify();if(e)return this.$message.error(e),!1;var s=this.$message.loading("发送中",1.5);Object(r["j"])(this.getInviteMsgFormData()).then((function(e){200===e.code&&s.then((function(){t.$message.success("发送成功",2.5)})).then((function(){t.$router.push("/workFission/taskpage")}))}))},getVerify:function(){return this.form.msg.text?this.form.msg.link.title?this.form.msg.link.desc?this.form.msg.link.image?this.filterSendForm.time.length||"0"===this.filterValue?this.filterSendForm.services.length?void 0:"请选择员工":"请选择时间":"邀请链接封面未上传":"邀请链接描述未填写":"邀请链接标题未填写":"邀请文案未填写"},getInviteMsgFormData:function(){return{fission_id:this.$route.query.id,text:this.form.msg.text,link_title:this.form.msg.link.title,link_desc:this.form.msg.link.desc,link_pic:this.form.msg.link.image,filter:this.getSendFilterParams()}},selectMemberChange:function(t){this.filterSendForm.services=t},resetSendCount:function(){this.sendCount=-1},getSendFilterParams:function(){var t={};return t.employee_ids=JSON.stringify(this.filterSendForm.services.map((function(t){return t.id}))),t.is_all=this.filterValue,"0"===this.filterValue?(t.start_time="",t.end_time=""):(t.start_time=this.filterSendForm.time[0].format("YYYY-MM-DD hh:ss"),t.end_time=this.filterSendForm.time[1].format("YYYY-MM-DD hh:ss")),"-1"!==this.genderValue&&(t.gender=this.genderValue),t},getSendCount:function(){var t=this;if(!this.filterSendForm.time.length&&"0"!==this.filterValue)return this.$message.error("请选择时间"),!1;if(!this.filterSendForm.services.length)return this.$message.error("请选择员工"),!1;var e=this.getSendFilterParams();Object(r["b"])(e).then((function(e){t.sendCount=e.data}))}},watch:{"form.msg":{handler:function(){this.$refs.preview.setText(this.form.msg.text),this.$refs.preview.setLink(this.form.msg.link.title,this.form.msg.link.desc,this.form.msg.link.image)},deep:!0}},components:{selectMember:l["a"]}},o=n,c=(s("a86c"),s("2877")),m=Object(c["a"])(o,a,i,!1,null,"22795400",null);e["default"]=m.exports},cd1a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"work-fission-create"},[s("div",{staticClass:"steps mb20"},[s("a-card",[s("a-steps",{attrs:{current:t.step}},[s("a-step",{attrs:{title:"活动基本信息"}}),s("a-step",{attrs:{title:"设置欢迎语和海报"}}),s("a-step",{attrs:{title:"设置推送消息"}})],1)],1)],1),s("a-card",[s("div",{staticClass:"mb20"},[s("step1",{directives:[{name:"show",rawName:"v-show",value:0===t.step,expression:"step === 0"}],ref:"step1"}),s("step2",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],ref:"step2"}),s("step3",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],ref:"step3"})],1),0!==t.step?s("a-button",{staticClass:"mr",attrs:{size:"large"},on:{click:function(e){t.step--}}},[t._v(" 上一步 ")]):t._e(),2!==t.step?s("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.step++}}},[t._v(" 下一步 ")]):t._e(),2===t.step?s("a-button",{attrs:{type:"primary",size:"large"},on:{click:t.update}},[t._v(" 修改 ")]):t._e()],1)],1)},i=[],l=s("5530"),r=(s("b0c0"),s("9911"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step1"},[s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 基本信息 ")]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("活动名称：")]),s("div",{staticClass:"input"},[s("a-input",{attrs:{disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("客服成员：")]),s("div",{staticClass:"input"},[s("div",{staticClass:"add-member mb10 mr16"},[s("a-button",{on:{click:t.memberSelectShow}},[t._v("选择成员")])],1),s("div",{staticClass:"members"},[t.form.services.length?s("div",{staticClass:"item"},t._l(t.form.services,(function(e){return s("a-tag",{key:e.id},[t._v(t._s(e.name))])})),1):t._e()])])]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v(" 自动通过好友 "),s("a-tooltip",[s("template",{slot:"title"},[t._v(" 开启后，客户添加该企业微信时，无需好友验证，将会自动添加成功 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2),t._v(" ：")],1),s("div",{staticClass:"input"},[s("a-switch",{attrs:{size:"small","default-checked":""},model:{value:t.form.autoPass,callback:function(e){t.$set(t.form,"autoPass",e)},expression:"form.autoPass"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v(" 客户标签 "),s("a-tooltip",[s("template",{slot:"title"},[t._v(" 给通过本次活动添加的客户自动打标签 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2),t._v(" ：")],1),s("div",{staticClass:"input"},[s("a-switch",{attrs:{size:"small"},model:{value:t.form.autoAddTag,callback:function(e){t.$set(t.form,"autoAddTag",e)},expression:"form.autoAddTag"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("活动结束时间：")]),s("div",{staticClass:"input"},[s("a-date-picker",{attrs:{placeholder:"请选择结束时间",format:"YYYY-MM-DD hh:ss"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("二维码有效期：")]),s("div",{staticClass:"input"},[s("a-radio-group",{attrs:{options:t.radio.qrcodeTime.list},model:{value:t.radio.qrcodeTime.value,callback:function(e){t.$set(t.radio.qrcodeTime,"value",e)},expression:"radio.qrcodeTime.value"}})],1)]),s("div",{staticClass:"item ml100 desc-text"},[t._v(" * 失效后二维码不可再扫码添加 ")]),"1"===t.radio.qrcodeTime.value?s("div",{staticClass:"item ml30"},[s("div",{staticClass:"input flex"},[s("a-input-number",{staticClass:"mr10",attrs:{min:1,max:60},model:{value:t.form.expireDay,callback:function(e){t.$set(t.form,"expireDay",e)},expression:"form.expireDay"}}),t._v(" 天后过期 ")],1)]):t._e()]),s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 任务设置 ")]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("裂变任务设置：")]),s("div",{staticClass:"input"},[s("a-table",{attrs:{columns:t.taskTable.col,"data-source":t.taskTable.data,rowKey:function(t){return t.id},pagination:!1,bordered:""},scopedSlots:t._u([{key:"taskTitle",fn:function(e,a,i){return s("span",{},[t._v(" "+t._s(i+1)+"级裂变任务 ")])}},{key:"userCount",fn:function(e){return s("span",{},[s("a-input",{attrs:{placeholder:"请输入人数",disabled:""},model:{value:e.count,callback:function(s){t.$set(e,"count",s)},expression:"item.count"}})],1)}}])},[s("span",{attrs:{slot:"tags"},slot:"tags"},[s("a-tag",[t._v("11")])],1)])],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("领奖方式：")]),s("div",{staticClass:"input"},[s("a-radio-group",{attrs:{options:t.radio.rewardMethod.list},model:{value:t.radio.rewardMethod.value,callback:function(e){t.$set(t.radio.rewardMethod,"value",e)},expression:"radio.rewardMethod.value"}})],1)]),"0"===t.radio.rewardMethod.value?s("div",{staticClass:"item"},[s("div",{staticClass:"input"},[s("a-button",{on:{click:t.prizeMemberShow}},[t._v("选择成员")]),s("div",{staticClass:"mt10"},t._l(t.form.receivePrizeServices,(function(e){return t.form.receivePrizeServices.length?s("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")]):t._e()})),1)],1)]):t._e(),"1"===t.radio.rewardMethod.value?s("div",{staticClass:"item"},[s("div",{staticClass:"input"},[s("span",{staticClass:"desc-text"},[t._v(" * 输入兑奖链接，客户完成任务后会跳转到新的链接领取 ")]),s("a-alert",{staticClass:"mt10",attrs:{message:"提示：不建议填写直接领奖页面的链接，若客户复制领奖链接发给其他好友，其他未完成任务的客户也可以领取到奖励哦。为避免此行为，建议填写表单等无风险链接~",banner:"",closable:""}}),t._l(t.taskTable.data,(function(e,a){return s("div",{key:a,staticClass:"flex mt16"},[s("span",[t._v("完成"+t._s(a+1)+"级任务：")]),s("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入链接"},model:{value:e.prizeLink,callback:function(s){t.$set(e,"prizeLink",s)},expression:"v.prizeLink"}})],1)}))],2)]):t._e()]),s("selectMember",{ref:"selectMember",on:{change:t.memberSelectChange}}),s("selectMember",{ref:"selectPrizeMember",on:{change:t.prizeMemberChange}})],1)}),n=[],o=(s("d81d"),s("4a04")),c=s("2a22"),m=s("c1df"),d=s.n(m),u={data:function(){return{form:{name:"",services:[],autoPass:!1,autoAddTag:!1,endTime:"",expireDay:0,newFriend:!1,deleteInvalid:!1,receivePrizeServices:[],receivePrizeLinks:[]},radio:{qrcodeTime:{list:[{label:"立即失效",value:"0"},{label:"自定义日期",value:"1"}],value:"0"},rewardMethod:{list:[{label:"联系客服",value:"0"},{label:"兑换链接",value:"1"}],value:"0"}},taskTable:{col:[{title:"任务阶梯",scopedSlots:{customRender:"taskTitle"}},{title:"任务目标人数",scopedSlots:{customRender:"userCount"}}],data:[]}}},methods:{memberSelectShow:function(){this.$refs.selectMember.setSelect(this.form.services)},prizeMemberShow:function(){this.$refs.selectPrizeMember.setSelect(this.form.receivePrizeServices)},setOrgData:function(t){this.form.name=t.fission.active_name,this.form.services=JSON.parse(t.fission.service_employees),this.form.autoPass="true"===t.fission.auto_pass,this.form.autoAddTag="true"===t.fission.auto_add_tag,this.form.endTime=d()(t.fission.end_time),t.fission.qr_code_invalid>=1&&(this.radio.qrcodeTime.value="1",this.form.expireDay=t.fission.qr_code_invalid),0===t.fission.receive_prize&&(this.radio.rewardMethod.value="0",this.form.receivePrizeServices=JSON.parse(t.fission.receive_prize_employees)),this.taskTable.data=JSON.parse(t.fission.tasks).map((function(t,e){return t.id=e,t}))},getFormData:function(){var t=Object(l["a"])(Object(l["a"])({},this.form),{},{tasks:this.taskTable.data,receivePrizeType:this.radio.rewardMethod.value});return"1"===this.radio.rewardMethod.value&&(t.receivePrizeLinks=this.taskTable.data.map((function(t){return t.prizeLink}))),t},prizeMemberChange:function(t){this.form.receivePrizeServices=t},memberSelectChange:function(t){this.form.services=t}},components:{selectMember:o["a"],selectPublic:c["a"]}},v=u,p=(s("ee75"),s("2877")),f=Object(p["a"])(v,r,n,!1,null,"44ae03ea",null),h=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"word-fission-step2"},[a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 裂变海报设置 ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("裂变海报：")]),a("div",{staticClass:"input"},[a("a-radio-group",{attrs:{options:t.posterRadio.list},model:{value:t.posterRadio.value,callback:function(e){t.$set(t.posterRadio,"value",e)},expression:"posterRadio.value"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"0"===t.posterRadio.value,expression:"posterRadio.value === '0'"}],staticClass:"content"},[a("div",{staticClass:"poster-preview"},[a("img",{staticClass:"bg",attrs:{src:t.form.poster.imageUrl}}),a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[t.form.poster.avatar?a("img",{attrs:{src:s("9728")}}):t._e()]),t.form.poster.nickname?a("div",{staticClass:"name",style:{color:t.form.poster.nicknameColor}},[t._v(" 用户昵称 ")]):t._e()]),a("vue-drag-resize",{attrs:{w:82,h:82,x:120,y:300,sticks:["br","tl","tr","bl"],aspectRatio:!0},on:{resizing:t.qrcodeZoom,dragging:t.qrcodeZoom}},[a("div",{staticClass:"qr-code"},[a("img",{attrs:{src:s("e5a2")}})])])],1),a("div",{staticClass:"setup"},[a("div",{staticClass:"setup-title"},[t._v(" 海报设置： ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"switch"},[a("span",[t._v("用户头像")]),a("a-switch",{attrs:{size:"small","default-checked":""},model:{value:t.form.poster.avatar,callback:function(e){t.$set(t.form.poster,"avatar",e)},expression:"form.poster.avatar"}})],1),a("div",{staticClass:"switch"},[a("span",[t._v("用户昵称")]),a("a-switch",{attrs:{size:"small","default-checked":""},model:{value:t.form.poster.nickname,callback:function(e){t.$set(t.form.poster,"nickname",e)},expression:"form.poster.nickname"}})],1)]),a("div",{staticClass:"row"},[t._v(" 昵称颜色： "),a("colorPicker",{model:{value:t.form.poster.nicknameColor,callback:function(e){t.$set(t.form.poster,"nicknameColor",e)},expression:"form.poster.nicknameColor"}})],1),a("div",{staticClass:"row"},[a("m-upload",{ref:"posterImage",attrs:{type:"btn",preview:!1},model:{value:t.form.poster.imageUrl,callback:function(e){t.$set(t.form.poster,"imageUrl",e)},expression:"form.poster.imageUrl"}})],1),t._m(0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.posterRadio.value,expression:"posterRadio.value === '1'"}],staticClass:"content"},[a("div",{staticClass:"card-preview"},[a("div",{staticClass:"company-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.form.card.logoUrl}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(t.form.card.nickname)+" "),a("div",{staticClass:"desc"},[t._v(" "+t._s(t.form.card.name)+" ")])])]),a("div",{staticClass:"qrcode"},[a("img",{attrs:{src:s("e5a2")}}),a("img",{staticClass:"logo",attrs:{src:t.form.card.logoUrl}})]),t._m(1)]),a("div",{staticClass:"setup"},[a("div",{staticClass:"mb20"},[a("div",{staticClass:"mb5"},[t._v("企业形象名称：")]),a("a-input",{attrs:{placeholder:"请输入"},model:{value:t.form.card.nickname,callback:function(e){t.$set(t.form.card,"nickname",e)},expression:"form.card.nickname"}})],1),a("div",{staticClass:"mb20"},[a("div",{staticClass:"mb5"},[t._v("企业名称：")]),a("a-input",{attrs:{placeholder:"请输入"},model:{value:t.form.card.name,callback:function(e){t.$set(t.form.card,"name",e)},expression:"form.card.name"}})],1),a("div",[a("div",{staticClass:"mb5"},[t._v("上传企业LOGO：")]),a("m-upload",{ref:"cardLogo",attrs:{type:"btn",preview:!1},model:{value:t.form.card.logoUrl,callback:function(e){t.$set(t.form.card,"logoUrl",e)},expression:"form.card.logoUrl"}})],1)])]),a("div",{staticClass:"item mt20"},[a("span",{staticClass:"label"},[t._v("裂变海报：")]),a("div",{staticClass:"input flex"},[a("a-switch",{attrs:{size:"small"},model:{value:t.posterTextSwitch,callback:function(e){t.posterTextSwitch=e},expression:"posterTextSwitch"}}),a("span",{staticClass:"ml6"},[t._v(" 设置海报转发话术，开启后客户可直接复制文案分享 ")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.posterTextSwitch,expression:"posterTextSwitch"}],staticClass:"item",staticStyle:{width:"800px"}},[a("m-enter-text",{ref:"fissionText",model:{value:t.form.shareText,callback:function(e){t.$set(t.form,"shareText",e)},expression:"form.shareText"}})],1)]),a("div",{staticClass:"welcome-form-box flex"},[a("div",{staticClass:"form mr70",staticStyle:{width:"63%"}},[a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 欢迎语设置 ")]),a("div",{staticClass:"welcome-box ml30"},[a("div",{staticClass:"welcome-text"},[a("div",{staticClass:"item mb0"},[a("span",{staticClass:"label required"},[t._v("欢迎语：")]),a("div",{staticClass:"text-1"},[a("div",{staticClass:"input"},[a("div",{staticClass:"insert-btn-group",on:{click:function(e){return t.$refs.welcomeText.addUserName("[用户昵称]")}}},[a("span",[t._v("[插入客户名称]")])]),a("m-enter-text",{ref:"welcomeText",model:{value:t.form.welcome.text,callback:function(e){t.$set(t.form.welcome,"text",e)},expression:"form.welcome.text"}})],1)])])])])]),a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 链接设置 ")]),a("div",{staticClass:"text-2 ml30"},[a("div",{staticClass:"link-form"},[a("div",{staticClass:"item"},[a("span",{staticClass:"label required"},[t._v("链接标题：")]),a("div",{staticClass:"input"},[a("a-input",{model:{value:t.form.welcome.link.title,callback:function(e){t.$set(t.form.welcome.link,"title",e)},expression:"form.welcome.link.title"}})],1)]),a("div",{staticClass:"item"},[a("span",{staticClass:"label required"},[t._v("链接摘要：")]),a("div",{staticClass:"input"},[a("a-input",{model:{value:t.form.welcome.link.desc,callback:function(e){t.$set(t.form.welcome.link,"desc",e)},expression:"form.welcome.link.desc"}})],1)]),a("div",{staticClass:"item"},[a("span",[t._v("链接封面：")]),a("div",{staticClass:"input"},[a("m-upload",{ref:"linkImage",model:{value:t.form.welcome.link.imageUrl,callback:function(e){t.$set(t.form.welcome.link,"imageUrl",e)},expression:"form.welcome.link.imageUrl"}})],1)])])])])]),a("div",{staticClass:"preview"},[a("m-preview",{ref:"preview"})],1)])])},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tips"},[s("p",[t._v("裂变海报设计须知：")]),s("p",[t._v("（1）尺寸：720px*1280px，分辨率72")]),s("p",[t._v("（2）[用户头像] [用户昵称] [裂变带参二维码] 这三个元素需要空出")]),s("p",[t._v("（3）裂变海报其他部分皆可自定义设计")]),s("p",[t._v("（4）裂变海报大小不超过2M")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"qrcode-tips"},[t._v(" 扫一扫上面的二维码图案"),s("br"),t._v(" 加我企业微信 ")])}],b=(s("d3b7"),s("25f0"),{data:function(){return{posterRadio:{list:[{label:"上传海报",value:"0"},{label:"个人名片",value:"1"}],value:"0"},posterTextSwitch:!1,form:{poster:{avatar:!0,nickname:!0,nicknameColor:"#000",imageUrl:"",imageX:120,imageY:300,imageW:82,imageH:82},shareText:"",card:{nickname:"企业昵称",name:"企业名",logoUrl:""},welcome:{text:"",link:{title:"链接标题",desc:"链接摘要",imageUrl:""}}}}},methods:{setOrgData:function(t){var e=t.poster,s=t.welcome;this.posterRadio.value=e.poster_type.toString(),this.form.poster.nickname="true"===e.nickname_show,this.form.poster.avatar="true"===e.avatar_show,this.form.poster.nicknameColor=e.nickname_color,this.$refs.posterImage.setUrl(e.cover_pic),e.foward_text&&(this.posterTextSwitch=!0,this.$refs.fissionText.addUserName(e.foward_text)),this.form.card.nickname=e.card_corp_image_name,this.form.card.name=e.card_corp_name,this.$refs.cardLogo.setUrl(e.card_corp_logo),this.$refs.welcomeText.addUserName(s.msg_text),this.form.welcome.link.title=s.link_title,this.form.welcome.link.desc=s.link_desc,this.$refs.linkImage.setUrl(s.link_cover_url)},getFormData:function(){return Object(l["a"])(Object(l["a"])({},this.form),{},{posterType:this.posterRadio.value})},qrcodeZoom:function(t){this.form.poster.imageW=t.width,this.form.poster.imageH=t.height,this.form.poster.imageX=t.left,this.form.poster.imageY=t.top}},watch:{"form.welcome.text":{handler:function(){this.$refs.preview.setText(this.form.welcome.text)},deep:!0},"form.welcome.link":{handler:function(){var t=this.form.welcome.link;this.$refs.preview.setLink(t.title,t.desc,t.imageUrl)},deep:!0}}}),_=b,k=(s("36f3"),Object(p["a"])(_,g,C,!1,null,"2d712aa8",null)),x=k.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"work-fission-step3"},[s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 企微推送 ")]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("给员工推送：")]),s("div",{staticClass:"input flex"},[s("a-switch",{attrs:{size:"small"},model:{value:t.form.pushEmployee,callback:function(e){t.$set(t.form,"pushEmployee",e)},expression:"form.pushEmployee"}}),s("span",{staticClass:"ml6"},[t._v("开启后，若客户完成裂变任务，MoChat会给所属员工发送通知提醒")])],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("给客户推送：")]),s("div",{staticClass:"input flex"},[s("a-switch",{attrs:{size:"small"},model:{value:t.form.pushContact,callback:function(e){t.$set(t.form,"pushContact",e)},expression:"form.pushContact"}}),s("span",{staticClass:"ml6"},[t._v("客户裂变成功后，给客户发送裂变成功的提醒通知")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.form.pushContact,expression:"form.pushContact"}],staticClass:"preview-form-box flex"},[s("div",{staticClass:"form mr80"},[t._m(0),s("div",{staticClass:"item"},[s("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("消息1：")]),s("m-enter-text",{ref:"enterText",model:{value:t.form.msgText,callback:function(e){t.$set(t.form,"msgText",e)},expression:"form.msgText"}})],1),s("div",{staticClass:"item"},[s("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("消息2：")]),s("div",{staticClass:"content"},[s("div",{staticClass:"mb20"},[t._v(" 选择消息类型： "),s("a-radio-group",{attrs:{options:t.msgType.option,"default-value":"图片"},on:{change:t.selectChange},model:{value:t.msgType.value,callback:function(e){t.$set(t.msgType,"value",e)},expression:"msgType.value"}})],1),s("div",{staticClass:"operating"},["image"===t.msgType.value?s("div",{staticClass:"image"},[s("m-upload",{ref:"image",model:{value:t.form.msgComplex.image,callback:function(e){t.$set(t.form.msgComplex,"image",e)},expression:"form.msgComplex.image"}})],1):t._e(),"link"===t.msgType.value?s("div",{staticClass:"link"},[s("div",{staticClass:"item url"},[s("a-input",{attrs:{placeholder:"链接地址请以http 或https开头"},model:{value:t.form.msgComplex.link.url,callback:function(e){t.$set(t.form.msgComplex.link,"url",e)},expression:"form.msgComplex.link.url"}})],1),s("div",{staticClass:"item"},[s("span",[t._v("链接标题：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msgComplex.link.title,callback:function(e){t.$set(t.form.msgComplex.link,"title",e)},expression:"form.msgComplex.link.title"}})],1)]),s("div",{staticClass:"item"},[s("span",[t._v("链接摘要：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msgComplex.link.desc,callback:function(e){t.$set(t.form.msgComplex.link,"desc",e)},expression:"form.msgComplex.link.desc"}})],1)]),s("div",{staticClass:"item"},[s("span",[t._v("链接封面：")]),s("div",{staticClass:"input"},[s("m-upload",{model:{value:t.form.msgComplex.link.image,callback:function(e){t.$set(t.form.msgComplex.link,"image",e)},expression:"form.msgComplex.link.image"}})],1)])]):t._e(),"miniprogram"===t.msgType.value?s("div",{staticClass:"applets"},[s("a-alert",{staticClass:"mb16",attrs:{type:"info","show-icon":""}},[s("span",{attrs:{slot:"message"},slot:"message"},[t._v(" 只有在企业微信后台绑定的小程序才可在此添加哦 查看如何绑定 ")])]),t.form.msgComplex.applets.title?s("div",[t._v(" 小程序："+t._s(t.form.msgComplex.applets.title)+" "),s("a-button",{on:{click:function(e){return t.$refs.selectApplets.show()}}},[t._v("重新添加")])],1):s("a-button",{on:{click:function(e){return t.$refs.selectApplets.show()}}},[t._v("添加小程序")])],1):t._e()])])])]),s("div",{staticClass:"preview"},[s("m-preview",{ref:"preview"})],1)])]),s("selectApplets",{ref:"selectApplets",on:{change:t.appletsChange}})],1)},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tips mb20"},[t._v(" 提示："),s("br"),t._v(" 1、本次推送将占用1次「企业群发」机会，每个客户每月只可收到4次企业群发"),s("br"),t._v(" 2、如完成任务的客户本月已收次4次群发消息本条邀请将不会成功发送 ")])}],T=s("0d6d"),S={data:function(){return{form:{pushEmployee:!1,pushContact:!1,msgText:"",msgComplex:{link:{url:"",title:"",desc:"",image:""},applets:{title:"",appid:"",path:"",image:""},image:""}},msgType:{option:[{label:"图片",value:"image"},{label:"链接",value:"link"},{label:"小程序",value:"miniprogram"}],value:"image"}}},methods:{setOrgData:function(t){var e=t.push;if(this.form.pushContact="true"===e.push_contact,this.form.pushEmployee="true"===e.push_employee,this.$refs.enterText.addUserName(e.msg_text),this.msgType.value=e.msg_complex_type,e.msg_complex){var s=e.msg_complex;"image"===e.msg_complex_type&&this.$refs.image.setUrl(s.image),"link"===e.msg_complex_type&&this.$refs.image.setUrl(s.image)}},getFormData:function(){return Object(l["a"])(Object(l["a"])({},this.form),{},{msgComplexType:this.msgType.value})},selectChange:function(){this.form.msgComplex={link:{url:"",title:"",desc:"",image:""},applets:{title:"",appid:"",path:"",image:""},image:""}},appletsChange:function(t){this.form.msgComplex.applets=t}},watch:{"form.msgText":{handler:function(){this.$refs.preview.setText(this.form.msgText)},deep:!0},"form.msgComplex":{handler:function(){this.$refs.preview.setImage(this.form.msgComplex.image),this.$refs.preview.setLink(this.form.msgComplex.link.title,this.form.msgComplex.link.desc,this.form.msgComplex.link.image),this.$refs.preview.setApplets(this.form.msgComplex.applets.title,this.form.msgComplex.applets.image)},deep:!0}},components:{selectApplets:T["a"]}},A=S,F=(s("313f"),Object(p["a"])(A,w,y,!1,null,"a32869ae",null)),D=F.exports,$=s("c2bc"),O={data:function(){return{step:0,data:{}}},mounted:function(){var t=this.$route.query.id;this.getUpdateInfo(t)},methods:{getUpdateInfo:function(t){var e=this;Object($["e"])({id:t}).then((function(t){e.$refs.step1.setOrgData(t.data),e.$refs.step2.setOrgData(t.data),e.$refs.step3.setOrgData(t.data)}))},getFissionData:function(){var t=this.$refs.step1.getFormData(),e={active_name:t.name,service_employees:t.services,auto_pass:t.autoPass,auto_add_tag:t.autoAddTag,end_time:t.endTime.format("YYYY-MM-DD hh:ss"),qr_code_invalid:t.expireDay,tasks:t.tasks,receive_prize:t.receivePrizeType,receive_prize_employees:t.receivePrizeServices,receive_links:t.receivePrizeLinks,contact_tags:[]};return e},getPosterData:function(){var t=this.$refs.step2.getFormData(),e={poster_type:t.posterType,foward_text:t.shareText,avatar_show:t.poster.avatar,nickname_show:t.poster.nickname,nickname_color:t.poster.nicknameColor,card_corp_image_name:t.card.nickname,card_corp_name:t.card.name,card_corp_logo:t.card.logoUrl,cover_pic:t.poster.imageUrl,qrcode_w:t.poster.imageW,qrcode_h:t.poster.imageH,qrcode_x:t.poster.imageX,qrcode_y:t.poster.imageY};return e},getWelcomeData:function(){var t=this.$refs.step2.getFormData(),e={msg_text:t.welcome.text,link_title:t.welcome.link.title,link_desc:t.welcome.link.desc,link_cover_url:t.welcome.link.imageUrl};return e},getPushData:function(){var t=this.$refs.step3.getFormData(),e={push_employee:t.pushEmployee,push_contact:t.pushContact,msg_text:t.msgText,msg_complex:t.msgComplex,msg_complex_type:t.msgComplexType};return e},update:function(){var t=this,e={fission:Object(l["a"])({id:this.$route.query.id},this.getFissionData()),poster:this.getPosterData(),welcome:this.getWelcomeData(),push:this.getPushData()},s=this.$message.loading("修改中",1.5);Object($["k"])(e).then((function(e){200===e.code&&s.then((function(){t.$message.success("修改成功",2.5),t.$router.push("/workFission/taskpage")})).then((function(){}))}))}},components:{step1:h,step2:x,step3:D}},M=O,q=(s("ffc1"),Object(p["a"])(M,a,i,!1,null,"342d1cd0",null));e["default"]=q.exports},ceb8:function(t,e,s){},d255:function(t,e,s){"use strict";s("220c")},d9a7:function(t,e,s){"use strict";s("a9e0")},da58:function(t,e,s){},e5a2:function(t,e,s){t.exports=s.p+"img/qr-preview.a1dd61f0.png"},ee75:function(t,e,s){"use strict";s("29dc")},f0cd:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAG+UlEQVR4Xu2dW0hUXRTH1yGtKcnKLmCpWXQjKylQKFJ8yQcpKagwyoq0EBQqCB8KKorEPhJKFDV70C5f6EMUUSqVGUL4EIF2saKiwrQiRbuI5WXif+jsb875TtOos87M0b1gHpzZs87ev/nP2muvvcejEBF1d3eH9fT0/ON0OhOIKBTPSRsygTZFUeocDkf2hAkTWpTfcBudTmfIkF3KN/6PgKIoHQ6HI1rp6Oj41+l0bpGMvE9AUZTLSnt7e6sMC96H+9tjGwA72dxLxyQBM4tAApaAmQkwu5cKloCZCTC7lwqWgJkJMLuXCpaAmQkwu5cKloCZCTC7lwqWgJkJMLuXCpaAmQkwu5cKloCZCTC7H1EK/vjxI3V1dVFfXx8FBwfTjBkzaOzYscwI3bu3PWAAra+vp4cPH9K3b990ow0MDKQFCxZQQkICzZ492yegbQ34wYMHdO3aNfrx48df4cXExNCGDRsoICDgr2292cC2gG/evEl1dXWDYhEZGUm7d+8mKNsqsyXgGzdu0L1793SMpkyZQrGxsRQaGkrjx4+n9+/f07Nnz+jFixe6dtHR0bR161ar+NpvV9kMbnx8PCUmJppOaIjNV69epZ6eHgE1LS2NFi5caAlkWynYDO769etp1apVbmE9efKEysvLRZuIiAjKysqSgF0JDBWu5uPSpUvU2NgoXB46dIgmTZrEDtkWCh4uXFA0qnjbtm20bNkyCdgbcEGxs7OTcnJyBNC1a9cSYje3+bWCvQUXELEgOXHihOCZnJxMq1ev5ubrv1mEN+GC4tOnT6msrEwARaqGlI3b/FLBWPpev35dN3ZPsgV3sIyT3MGDB2ny5MncfP1PwW/evKGioiJyOv87VTtcuEb1juo0raCggN69eyeUlZSUpBZrNOvt7aWfP39SUFCQR+pra2ujkpIS/A5FtN+5cyctXrzYo/cPt5FfhYiWlhbKz88XY5o7dy5lZGSIv1tbW6m4uFgt7syfP5/S09Pdjh9wz549S9+/fxftli9fTlu2WPeLCb8CfOvWLcJDs/3796u1Bc2MBR6kWUi3zMwMbnh4OO3Zs4fGjRs3XGF6/H6/Anzx4kVqampSO+9wOOjYsWO6gbx8+ZJKS0t18Tk1NZWWLl2qa4dCD9q5hgXARSUNfq00vwKMrzMgwv40Ed29e5eqqqoEo6lTp9KBAwdozJgx6nNfv36l3NxcQqzWzFdwcX2fAUZcxFfVtQB+4cIFevTokcoFk9iRI0dMxWZMuXbs2EFRUVFqWxThKysrxfvCwsLUsGC1crUO+AQwQgFAAjAmsZkzZ6r9MS4u/pSrYmvo+PHjIlSgDrxx40bVR3t7O505c0YtT4aEhNC+fft8BtcnCjZCRAqGVAyG8IAwodmKFSsoJSXFVMV5eXmETU4Y9tsyMzNFuy9fvqigEWa00GFl3HW9lqUKNsJVFEVNtZBywQYGBujUqVP0+fNn0cc/LWldw8m0adMoOzvbVwzdXtcywGa1hTVr1hAeroYsAiHE1bZv305LlizRPYd8GXkzbNasWbR3797RC7i6uppqa2t1ALDDu3LlSlMoV65coYaGBvEaJjBMZJrh3MPhw4fV8w8wq/fZBvNJsivYOKujc+7g4vX+/n4qLCwUCjXWbmtqaujOnTtinJjgMNH5o7ECxmRz8uRJXU76N7iukF69eqVmCvPmzRNPIywAPj4EGNIvbP9YuTobzAfJChi7uffv3xf9iYuLo3Xr1g2mf7q2ZstfYzFoyM6Z3sgGGMrDUlcrtEyfPl3NSYd66MMMLpSN5S+yEX81NsCofJ0+fVqMezh7YGZwfb1C8/QDZQNsLHJjueoaSz3toJ3hYoxsgI35LMKDtiT2FO6HDx/UYrlrPdcuytXGyAb49evXanFcs02bNhFOOHpqdlcuO2AUW44ePaouf2E45IHDHp7YSFAuO2BcwLW+i7937dpFixYtcst4JMFljcFwjqOj586dE0AnTpyoqnjOnDmmkJubm6miokK3E2G3mGscGFsM1i50/vx5evz4se66qEEgZKBIgxUZtnhwzBQPV7M7XHYF4wLYAcbSFl/9wRhquShl+monYjB9ddeWXcG4OCY8bPM8f/7co36jOrZ58+Yhr/o8uohFjSwBrI0F53Nv374tdiKMY0TIQH3YqkMhVjC2FLA2oE+fPtHbt28J1TbUEfCbNhwywR7aSDOfAB5pEH0eg0cTUMvTtNEM15I0TQKW/96WVQNykmPFy1gPZu63bdxLBTN/VBKwBMxMgNm9VLAEzEyA2b1UsATMTIDZvVSwBMxMgNm9VLAEzEyA2b1UsATMTIDZvVSwBYDlDfv4ILfJW07ywcWRhMvypqlMgMVNU+Ff3vbXq5R1t/39BVYEAau0E5fmAAAAAElFTkSuQmCC"},f0de:function(t,e,s){},f465:function(t,e,s){},fd16:function(t,e,s){"use strict";s("86f9")},fefc:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"work-fission-create"},[s("div",{staticClass:"steps mb20"},[s("a-card",[s("a-steps",{attrs:{current:t.step}},[s("a-step",{attrs:{title:"活动基本信息"}}),s("a-step",{attrs:{title:"设置欢迎语和海报"}}),s("a-step",{attrs:{title:"设置推送消息"}}),s("a-step",{attrs:{title:"邀请客户参与"}})],1)],1)],1),s("a-card",[s("div",{staticClass:"mb20"},[s("step1",{directives:[{name:"show",rawName:"v-show",value:0===t.step,expression:"step === 0"}],ref:"step1"}),s("step2",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],ref:"step2"}),s("step3",{directives:[{name:"show",rawName:"v-show",value:2===t.step,expression:"step === 2"}],ref:"step3"}),s("step4",{directives:[{name:"show",rawName:"v-show",value:3===t.step,expression:"step === 3"}],ref:"step4"})],1),0!==t.step?s("a-button",{staticClass:"mr",attrs:{size:"large"},on:{click:function(e){t.step--}}},[t._v(" 上一步 ")]):t._e(),3!==t.step?s("a-button",{attrs:{type:"primary",size:"large"},on:{click:t.next}},[t._v(" 下一步 ")]):t._e(),3===t.step?s("a-button",{attrs:{type:"primary",size:"large",loading:t.loading},on:{click:t.add}},[t._v(" 完成 ")]):t._e()],1)],1)},i=[],l=s("5530"),r=(s("b0c0"),s("9911"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step1"},[s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 基本信息 ")]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("活动名称：")]),s("div",{staticClass:"input"},[s("a-input",{attrs:{placeholder:"仅内部可见"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("客服成员：")]),s("div",{staticClass:"input"},[s("div",{staticClass:"add-member mb10 mr16"},[s("a-button",{on:{click:t.memberSelectShow}},[t._v("选择成员")])],1),s("div",{staticClass:"members"},[t.form.services.length?s("div",{staticClass:"item"},t._l(t.form.services,(function(e){return s("a-tag",{key:e.id},[t._v(t._s(e.name))])})),1):t._e()])])]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v(" 自动通过好友 "),s("a-tooltip",[s("template",{slot:"title"},[t._v(" 开启后，客户添加该企业微信时，无需好友验证，将会自动添加成功 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2),t._v(" ：")],1),s("div",{staticClass:"input"},[s("a-switch",{attrs:{size:"small","default-checked":""},model:{value:t.form.autoPass,callback:function(e){t.$set(t.form,"autoPass",e)},expression:"form.autoPass"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("活动结束时间：")]),s("div",{staticClass:"input"},[s("a-date-picker",{attrs:{placeholder:"请选择结束时间",format:"YYYY-MM-DD HH:ss",valueFormat:"YYYY-MM-DD HH:ss"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("二维码有效期：")]),s("div",{staticClass:"input"},[s("a-radio-group",{attrs:{options:t.radio.qrcodeTime.list},model:{value:t.radio.qrcodeTime.value,callback:function(e){t.$set(t.radio.qrcodeTime,"value",e)},expression:"radio.qrcodeTime.value"}})],1)]),s("div",{staticClass:"item ml100 desc-text"},[t._v(" * 失效后二维码不可再扫码添加 ")]),"1"===t.radio.qrcodeTime.value?s("div",{staticClass:"item ml30"},[s("div",{staticClass:"input flex"},[s("a-input-number",{staticClass:"mr10",attrs:{min:1,max:60},model:{value:t.form.expireDay,callback:function(e){t.$set(t.form,"expireDay",e)},expression:"form.expireDay"}}),t._v(" 天后过期 ")],1)]):t._e()]),s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 任务设置 ")]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("裂变任务设置：")]),s("div",{staticClass:"input"},[s("a-table",{attrs:{columns:t.taskTable.col,"data-source":t.taskTable.data,bordered:"",pagination:!1},scopedSlots:t._u([{key:"taskTitle",fn:function(e,a,i){return s("span",{},[t._v(" "+t._s(i+1)+"级裂变任务 ")])}},{key:"userCount",fn:function(e){return s("span",{},[s("a-input",{attrs:{placeholder:"请输入人数"},on:{input:function(t){e.count=e.count.replace(/[^\d.]/g,"")}},model:{value:e.count,callback:function(s){t.$set(e,"count",s)},expression:"item.count"}})],1)}},{key:"operating",fn:function(e,a,i){return s("span",{},[s("a",{on:{click:function(e){return t.delTask(i)}}},[t._v("删除")])])}}])}),s("div",{staticClass:"add-task",on:{click:t.addTask}},[s("a-icon",{staticClass:"mr5",attrs:{type:"plus-circle"}}),t._v(" 添加任务 ")],1)],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("高级设置：")]),s("div",{staticClass:"input"},[s("div",{staticClass:"switch mb10"},[s("a-switch",{attrs:{size:"small"},model:{value:t.form.newFriend,callback:function(e){t.$set(t.form,"newFriend",e)},expression:"form.newFriend"}}),s("span",{staticClass:"ml6"},[t._v(" 新好友才能助力 "),s("a-tooltip",[s("template",{slot:"title"},[t._v(" 开启后，若客户在活动前已添加过企业任意员工，该客户将不被计入助力次数 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)],1),s("div",{staticClass:"switch"},[s("a-switch",{attrs:{size:"small",disabled:t.taskTable.data.length>1},model:{value:t.form.deleteInvalid,callback:function(e){t.$set(t.form,"deleteInvalid",e)},expression:"form.deleteInvalid"}}),s("span",{staticClass:"ml6"},[t._v(" 删除员工好友后助力失效 "),s("a-tooltip",[s("template",{slot:"title"},[t._v(" 仅限裂变任务为一级阶梯时可开通 ")]),s("a-icon",{attrs:{type:"question-circle"}})],2)],1)],1)])]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("领奖方式：")]),s("div",{staticClass:"input"},[s("a-radio-group",{attrs:{options:t.radio.rewardMethod.list},model:{value:t.radio.rewardMethod.value,callback:function(e){t.$set(t.radio.rewardMethod,"value",e)},expression:"radio.rewardMethod.value"}})],1)]),"0"===t.radio.rewardMethod.value?s("div",{staticClass:"item"},[s("div",{staticClass:"input"},[s("a-button",{on:{click:t.prizeMemberShow}},[t._v("选择成员")]),s("div",{staticClass:"mt10"},t._l(t.form.receivePrizeServices,(function(e){return t.form.receivePrizeServices.length?s("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")]):t._e()})),1)],1)]):t._e(),"1"===t.radio.rewardMethod.value?s("div",{staticClass:"item"},[s("div",{staticClass:"input"},[s("span",{staticClass:"desc-text"},[t._v(" * 输入兑奖链接，客户完成任务后会跳转到新的链接领取 ")]),s("a-alert",{staticClass:"mt10",attrs:{message:"提示：不建议填写直接领奖页面的链接，若客户复制领奖链接发给其他好友，其他未完成任务的客户也可以领取到奖励哦。为避免此行为，建议填写表单等无风险链接~",banner:"",closable:""}}),t._l(t.taskTable.data,(function(e,a){return s("div",{key:a,staticClass:"flex mt16"},[s("span",[t._v("完成"+t._s(a+1)+"级任务：")]),s("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入链接"},model:{value:e.prizeLink,callback:function(s){t.$set(e,"prizeLink",s)},expression:"v.prizeLink"}})],1)}))],2)]):t._e()]),s("selectMember",{ref:"selectMember",on:{change:t.memberSelectChange}}),s("selectMember",{ref:"selectPrizeMember",on:{change:t.prizeMemberChange}})],1)}),n=[],o=s("b85c"),c=(s("d81d"),s("a434"),s("4a04")),m=s("2a22"),d={data:function(){return{form:{name:"",services:[],autoPass:!1,autoAddTag:!1,endTime:"",expireDay:7,newFriend:!1,deleteInvalid:!1,receivePrizeServices:[],receivePrizeLinks:[]},radio:{qrcodeTime:{list:[{label:"立即失效",value:"0"},{label:"自定义日期",value:"1"}],value:"0"},rewardMethod:{list:[{label:"联系客服",value:"0"},{label:"兑换链接",value:"1"}],value:"0"}},taskTable:{col:[{title:"任务阶梯",dataIndex:"title",scopedSlots:{customRender:"taskTitle"}},{title:"任务目标人数",scopedSlots:{customRender:"userCount"}},{title:"操作",scopedSlots:{customRender:"operating"}}],data:[{count:"",tags:[]}]}}},methods:{memberSelectShow:function(){this.$refs.selectMember.setSelect(this.form.services)},prizeMemberShow:function(){this.$refs.selectPrizeMember.setSelect(this.form.receivePrizeServices)},getVerify:function(){if(!this.form.name)return"活动名称未填写";if(!this.form.services.length)return"客户成员未选择";if(!this.form.endTime)return"结束时间未填写";if(!this.form.expireDay&&"1"===this.radio.qrcodeTime.value)return"二维码有效期未填写";for(var t=0;t<this.taskTable.data.length;t++){if(!this.taskTable.data[t].count)return"任务目标人数未填写";if(t<this.taskTable.data.length-1&&parseInt(this.taskTable.data[t].count)>parseInt(this.taskTable.data[t+1].count))return"后续的裂变任务人数不能比前面人数少"}if("1"===this.radio.rewardMethod.value){var e,s=Object(o["a"])(this.taskTable.data);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(!a.prizeLink)return"领奖链接未填写"}}catch(i){s.e(i)}finally{s.f()}}else if(!this.form.receivePrizeServices.length)return"领奖客服未选择"},getFormData:function(){var t=Object(l["a"])(Object(l["a"])({},this.form),{},{tasks:this.taskTable.data,receivePrizeType:this.radio.rewardMethod.value});return"1"===this.radio.rewardMethod.value&&(t.receivePrizeLinks=this.taskTable.data.map((function(t){return t.prizeLink}))),t},prizeMemberChange:function(t){this.form.receivePrizeServices=t},memberSelectChange:function(t){this.form.services=t},delTask:function(t){if(1===this.taskTable.data.length)return this.$message.error("至少设置1个任务"),!1;this.taskTable.data.splice(t,1)},addTask:function(){if(5===this.taskTable.data.length)return this.$message.error("最高可设5级"),!1;this.taskTable.data.push({title:"一级阶梯任务",count:"",tags:[]})}},components:{selectMember:c["a"],selectPublic:m["a"]}},u=d,v=(s("7cce"),s("2877")),p=Object(v["a"])(u,r,n,!1,null,"4ebc8518",null),f=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"word-fission-step2"},[a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 裂变海报设置 ")]),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[t._v("裂变海报：")]),a("div",{staticClass:"input"},[a("a-radio-group",{attrs:{options:t.posterRadio.list},model:{value:t.posterRadio.value,callback:function(e){t.$set(t.posterRadio,"value",e)},expression:"posterRadio.value"}})],1)]),"0"===t.posterRadio.value?a("div",{staticClass:"content"},[a("div",{staticClass:"poster-preview"},[a("img",{staticClass:"bg",attrs:{src:t.form.poster.imageUrl}}),a("div",{staticClass:"user-info"},[a("div",{staticClass:"avatar"},[t.form.poster.avatar?a("img",{attrs:{src:s("9728")}}):t._e()]),t.form.poster.nickname?a("div",{staticClass:"name",style:{color:t.form.poster.nicknameColor}},[t._v(" 用户昵称 ")]):t._e()]),a("vue-drag-resize",{attrs:{w:82,h:82,x:120,y:300,sticks:["br","tl","tr","bl"],aspectRatio:!0},on:{resizing:t.qrcodeZoom,dragging:t.qrcodeZoom}},[a("div",{staticClass:"qr-code"},[a("img",{attrs:{src:s("e5a2")}})])])],1),a("div",{staticClass:"setup"},[a("div",{staticClass:"setup-title"},[t._v(" 海报设置： ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"switch"},[a("span",[t._v("用户头像")]),a("a-switch",{attrs:{size:"small","default-checked":""},model:{value:t.form.poster.avatar,callback:function(e){t.$set(t.form.poster,"avatar",e)},expression:"form.poster.avatar"}})],1),a("div",{staticClass:"switch"},[a("span",[t._v("用户昵称")]),a("a-switch",{attrs:{size:"small","default-checked":""},model:{value:t.form.poster.nickname,callback:function(e){t.$set(t.form.poster,"nickname",e)},expression:"form.poster.nickname"}})],1)]),a("div",{staticClass:"row"},[t._v(" 昵称颜色： "),a("colorPicker",{model:{value:t.form.poster.nicknameColor,callback:function(e){t.$set(t.form.poster,"nicknameColor",e)},expression:"form.poster.nicknameColor"}})],1),a("div",{staticClass:"row"},[a("m-upload",{attrs:{type:"btn",preview:!1},model:{value:t.form.poster.imageUrl,callback:function(e){t.$set(t.form.poster,"imageUrl",e)},expression:"form.poster.imageUrl"}})],1),t._m(0)])]):t._e(),"1"===t.posterRadio.value?a("div",{staticClass:"content"},[a("div",{staticClass:"card-preview"},[a("div",{staticClass:"company-info"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.form.card.logoUrl}})]),a("div",{staticClass:"name"},[t._v(" "+t._s(t.form.card.nickname)+" "),a("div",{staticClass:"desc"},[t._v(" "+t._s(t.form.card.name)+" ")])])]),a("div",{staticClass:"qrcode"},[a("img",{attrs:{src:s("e5a2")}}),a("img",{staticClass:"logo",attrs:{src:t.form.card.logoUrl}})]),t._m(1)]),a("div",{staticClass:"setup"},[a("div",{staticClass:"mb20"},[a("div",{staticClass:"mb5"},[t._v("企业形象名称：")]),a("a-input",{attrs:{placeholder:"请输入"},model:{value:t.form.card.nickname,callback:function(e){t.$set(t.form.card,"nickname",e)},expression:"form.card.nickname"}})],1),a("div",{staticClass:"mb20"},[a("div",{staticClass:"mb5"},[t._v("企业名称：")]),a("a-input",{attrs:{placeholder:"请输入"},model:{value:t.form.card.name,callback:function(e){t.$set(t.form.card,"name",e)},expression:"form.card.name"}})],1),a("div",[a("div",{staticClass:"mb5"},[t._v("上传企业LOGO：")]),a("m-upload",{attrs:{type:"btn",preview:!1},model:{value:t.form.card.logoUrl,callback:function(e){t.$set(t.form.card,"logoUrl",e)},expression:"form.card.logoUrl"}})],1)])]):t._e(),a("div",{staticClass:"item mt20"},[a("span",{staticClass:"label"},[t._v("裂变海报：")]),a("div",{staticClass:"input flex"},[a("a-switch",{attrs:{size:"small"},model:{value:t.posterTextSwitch,callback:function(e){t.posterTextSwitch=e},expression:"posterTextSwitch"}}),a("span",{staticClass:"ml6"},[t._v(" 设置海报转发话术，开启后客户可直接复制文案分享 ")])],1)]),t.posterTextSwitch?a("div",{staticClass:"item",staticStyle:{width:"800px"}},[a("m-enter-text",{model:{value:t.form.shareText,callback:function(e){t.$set(t.form,"shareText",e)},expression:"form.shareText"}})],1):t._e()]),a("div",{staticClass:"welcome-form-box flex"},[a("div",{staticClass:"form mr70",staticStyle:{width:"63%"}},[a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 欢迎语素材设置 ")]),a("div",{staticClass:"welcome-box ml30"},[a("div",{staticClass:"welcome-text"},[a("div",{staticClass:"item mb0"},[a("span",{staticClass:"label required"},[t._v("欢迎语：")]),a("div",{staticClass:"text-1"},[a("div",{staticClass:"input"},[a("div",{staticClass:"insert-btn-group",on:{click:function(e){return t.$refs.welcomeText.addUserName("[用户昵称]")}}},[a("span",[t._v("[插入客户名称]")])]),a("m-enter-text",{ref:"welcomeText",model:{value:t.form.welcome.text,callback:function(e){t.$set(t.form.welcome,"text",e)},expression:"form.welcome.text"}})],1)])])])])]),a("div",{staticClass:"block"},[a("div",{staticClass:"title"},[t._v(" 链接设置 ")]),a("div",{staticClass:"text-2 ml30"},[a("div",{staticClass:"link-form"},[a("div",{staticClass:"item"},[a("span",{staticClass:"label required"},[t._v("链接标题：")]),a("div",{staticClass:"input"},[a("a-input",{model:{value:t.form.welcome.link.title,callback:function(e){t.$set(t.form.welcome.link,"title",e)},expression:"form.welcome.link.title"}})],1)]),a("div",{staticClass:"item"},[a("span",{staticClass:"label required"},[t._v("链接摘要：")]),a("div",{staticClass:"input"},[a("a-input",{model:{value:t.form.welcome.link.desc,callback:function(e){t.$set(t.form.welcome.link,"desc",e)},expression:"form.welcome.link.desc"}})],1)]),a("div",{staticClass:"item"},[a("span",[t._v("链接封面：")]),a("div",{staticClass:"input"},[a("m-upload",{model:{value:t.form.welcome.link.imageUrl,callback:function(e){t.$set(t.form.welcome.link,"imageUrl",e)},expression:"form.welcome.link.imageUrl"}})],1)])])])])]),a("div",{staticClass:"preview"},[a("m-preview",{ref:"preview"})],1)])])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tips"},[s("p",[t._v("裂变海报设计须知：")]),s("p",[t._v("（1）尺寸：720px*1280px，分辨率72")]),s("p",[t._v("（2）[用户头像] [用户昵称] [裂变带参二维码] 这三个元素需要空出")]),s("p",[t._v("（3）裂变海报其他部分皆可自定义设计")]),s("p",[t._v("（4）裂变海报大小不超过2M")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"qrcode-tips"},[t._v(" 扫一扫上面的二维码图案"),s("br"),t._v(" 加我企业微信 ")])}],C={data:function(){return{posterRadio:{list:[{label:"上传海报",value:"0"},{label:"个人名片",value:"1"}],value:"0"},posterTextSwitch:!1,form:{poster:{avatar:!0,nickname:!0,nicknameColor:"#000",imageUrl:"",imageX:120,imageY:300,imageW:82,imageH:82},shareText:"",card:{nickname:"企业昵称",name:"企业名",logoUrl:""},welcome:{text:"",link:{title:"链接标题",desc:"链接摘要",imageUrl:""}}}}},mounted:function(){var t="你好，我们正在进行xxx活动，只要邀请x位好友添加我的微信就可以获得奖品\n\n参与流程：\n①点击下面链接，生成专属海报\n②进入链接后长按保存海报，将海报发给好友或朋友圈\n③邀请x位好友扫码添加，即可成功获得奖品\n④进入链接点击查看进度，完成任务后点击「领取奖励」即可领取哦\n\n注意事项：请不要直接转发活动链接给好友，是无法成功记录数据的哦~";this.form.shareText=t,this.$refs.welcomeText.addUserName(t),this.form.welcome.link.title="点击这里，完成任务领取奖品吧👇",this.form.welcome.link.desc="快来参加活动吧"},methods:{getVerify:function(){if("0"===this.posterRadio.value){if(!this.form.poster.imageUrl)return"未上传封面海报"}else{if(!this.form.card.nickname)return"企业形象名称未填写";if(!this.form.card.name)return"企业名称未填写";if(!this.form.card.logoUrl)return"企业LOGO未上传"}return this.posterTextSwitch||this.form.shareText?this.form.welcome.text?this.form.welcome.link.title?this.form.welcome.link.desc?this.form.welcome.link.imageUrl?void 0:"欢迎语链接封面未填写":"欢迎语链接摘要未填写":"欢迎语链接标题未填写":"欢迎语未填写":"海报转发话术未填写"},getFormData:function(){return Object(l["a"])(Object(l["a"])({},this.form),{},{posterType:this.posterRadio.value})},qrcodeZoom:function(t){this.form.poster.imageW=t.width,this.form.poster.imageH=t.height,this.form.poster.imageX=t.left,this.form.poster.imageY=t.top}},watch:{"form.welcome.text":{handler:function(){this.$refs.preview.setText(this.form.welcome.text)},deep:!0},"form.welcome.link":{handler:function(){var t=this.form.welcome.link;this.$refs.preview.setLink(t.title,t.desc,t.imageUrl)},deep:!0}}},b=C,_=(s("b5d0"),Object(v["a"])(b,h,g,!1,null,"64230aee",null)),k=_.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"work-fission-step3"},[s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 企微推送 ")]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("给员工推送：")]),s("div",{staticClass:"input flex"},[s("a-switch",{attrs:{size:"small"},model:{value:t.form.pushEmployee,callback:function(e){t.$set(t.form,"pushEmployee",e)},expression:"form.pushEmployee"}}),s("span",{staticClass:"ml6"},[t._v("开启后，若客户完成裂变任务，MoChat会给所属员工发送通知提醒")])],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label"},[t._v("给客户推送：")]),s("div",{staticClass:"input flex"},[s("a-switch",{attrs:{size:"small"},model:{value:t.form.pushContact,callback:function(e){t.$set(t.form,"pushContact",e)},expression:"form.pushContact"}}),s("span",{staticClass:"ml6"},[t._v("客户裂变成功后，给客户发送裂变成功的提醒通知")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.form.pushContact,expression:"form.pushContact"}],staticClass:"preview-form-box flex"},[s("div",{staticClass:"form mr80"},[t._m(0),s("div",{staticClass:"item"},[s("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("消息1：")]),s("m-enter-text",{model:{value:t.form.msgText,callback:function(e){t.$set(t.form,"msgText",e)},expression:"form.msgText"}})],1),s("div",{staticClass:"item"},[s("span",{staticClass:"label",staticStyle:{width:"70px"}},[t._v("消息2：")]),s("div",{staticClass:"content"},[s("div",{staticClass:"mb20"},[t._v(" 选择消息类型： "),s("a-radio-group",{attrs:{options:t.msgType.option,"default-value":"图片"},on:{change:t.selectChange},model:{value:t.msgType.value,callback:function(e){t.$set(t.msgType,"value",e)},expression:"msgType.value"}})],1),s("div",{staticClass:"operating"},["image"===t.msgType.value?s("div",{staticClass:"image"},[s("m-upload",{model:{value:t.form.msgComplex.image,callback:function(e){t.$set(t.form.msgComplex,"image",e)},expression:"form.msgComplex.image"}})],1):t._e(),"link"===t.msgType.value?s("div",{staticClass:"link"},[s("div",{staticClass:"item url"},[s("a-input",{attrs:{placeholder:"链接地址请以http 或https开头"},model:{value:t.form.msgComplex.link.url,callback:function(e){t.$set(t.form.msgComplex.link,"url",e)},expression:"form.msgComplex.link.url"}})],1),s("div",{staticClass:"item"},[s("span",[t._v("链接标题：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msgComplex.link.title,callback:function(e){t.$set(t.form.msgComplex.link,"title",e)},expression:"form.msgComplex.link.title"}})],1)]),s("div",{staticClass:"item"},[s("span",[t._v("链接摘要：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msgComplex.link.desc,callback:function(e){t.$set(t.form.msgComplex.link,"desc",e)},expression:"form.msgComplex.link.desc"}})],1)]),s("div",{staticClass:"item"},[s("span",[t._v("链接封面：")]),s("div",{staticClass:"input"},[s("m-upload",{model:{value:t.form.msgComplex.link.image,callback:function(e){t.$set(t.form.msgComplex.link,"image",e)},expression:"form.msgComplex.link.image"}})],1)])]):t._e(),"miniprogram"===t.msgType.value?s("div",{staticClass:"applets"},[s("a-alert",{staticClass:"mb16",attrs:{type:"info","show-icon":""}},[s("span",{attrs:{slot:"message"},slot:"message"},[t._v(" 只有在企业微信后台绑定的小程序才可在此添加哦 查看如何绑定 ")])]),t.form.msgComplex.applets.title?s("div",[t._v(" 小程序："+t._s(t.form.msgComplex.applets.title)+" "),s("a-button",{on:{click:function(e){return t.$refs.selectApplets.show()}}},[t._v("重新添加")])],1):s("a-button",{on:{click:function(e){return t.$refs.selectApplets.show()}}},[t._v("添加小程序")])],1):t._e()])])])]),s("div",{staticClass:"preview"},[s("m-preview",{ref:"preview"})],1)])]),s("selectApplets",{ref:"selectApplets",on:{change:t.appletsChange}})],1)},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tips mb20"},[t._v(" 提示："),s("br"),t._v(" 1、本次推送将占用1次「企业群发」机会，每个客户每月只可收到4次企业群发"),s("br"),t._v(" 2、如完成任务的客户本月已收次4次群发消息本条邀请将不会成功发送 ")])}],y=s("0d6d"),T={data:function(){return{form:{pushEmployee:!1,pushContact:!1,msgText:"",msgComplex:{link:{url:"",title:"",desc:"",image:""},applets:{title:"",appid:"",path:"",image:""},image:""}},msgType:{option:[{label:"图片",value:"image"},{label:"链接",value:"link"},{label:"小程序",value:"miniprogram"}],value:"image"}}},methods:{getVerify:function(){if(this.form.pushContact){if(!this.form.msgText)return"消息1未填写";if("image"===this.msgType.value&&!this.form.msgComplex.image)return"图片未上传";if("link"===this.msgType.value&&!this.form.msgComplex.link.url)return"链接未填写";if("link"===this.msgType.value&&!this.form.msgComplex.link.title)return"链接标题未填写";if("link"===this.msgType.value&&!this.form.msgComplex.link.desc)return"链接描述未填写";if("link"===this.msgType.value&&!this.form.msgComplex.link.image)return"链接封面图未上传"}},getFormData:function(){return Object(l["a"])(Object(l["a"])({},this.form),{},{msgComplexType:this.msgType.value})},selectChange:function(){this.form.msgComplex={link:{url:"",title:"",desc:"",image:""},applets:{title:"",appid:"",path:"",image:""},image:""}},appletsChange:function(t){this.form.msgComplex.applets=t}},watch:{"form.msgText":{handler:function(){this.$refs.preview.setText(this.form.msgText)},deep:!0},"form.msgComplex":{handler:function(){this.$refs.preview.setImage(this.form.msgComplex.image),this.$refs.preview.setLink(this.form.msgComplex.link.title,this.form.msgComplex.link.desc,this.form.msgComplex.link.image),this.$refs.preview.setApplets(this.form.msgComplex.applets.title,this.form.msgComplex.applets.image)},deep:!0}},components:{selectApplets:y["a"]}},S=T,A=(s("591b"),Object(v["a"])(S,x,w,!1,null,"3c3eae16",null)),F=A.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"work-fission-step4"},[s("div",{staticClass:"block qr-code"},[t._m(0),s("div",{staticClass:"content"},[s("div",{staticClass:"mb16"},[s("a-radio-group",{attrs:{options:t.plainOptions,"default-value":"选择参与员工"},model:{value:t.inviteValue,callback:function(e){t.inviteValue=e},expression:"inviteValue"}})],1),"选择参与员工"===t.inviteValue?s("div",{staticClass:"option"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("所属员工：")]),s("a-button",{on:{click:t.selectMemberShow}},[t._v("选择员工")]),s("div",{staticClass:"ml16"},t._l(t.filterSendForm.services,(function(e){return s("a-tag",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("选择客服：")]),s("a-radio-group",{attrs:{options:t.serviceOptions,"default-value":"0"},on:{change:t.resetSendCount},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1),s("div",{staticClass:"item"},["1"===t.filterValue?s("div",{staticClass:"filter"},[s("div",{staticClass:"client-info"},[s("span",{staticClass:"client-title"},[t._v("性别：")]),s("a-radio-group",{attrs:{options:t.genderOptions,"default-value":"-1"},on:{change:t.resetSendCount},model:{value:t.genderValue,callback:function(e){t.genderValue=e},expression:"genderValue"}})],1),s("div",{staticClass:"client-info"},[s("span",{staticClass:"client-title"},[t._v("添加时间：")]),s("a-range-picker",{model:{value:t.filterSendForm.time,callback:function(e){t.$set(t.filterSendForm,"time",e)},expression:"filterSendForm.time"}})],1)]):t._e()]),s("div",{staticClass:"select-all"},[t._v(" 将群发消息给全部账号的 "),-1===t.sendCount?s("a",{on:{click:t.getSendCount}},[t._v("获取")]):s("span",[t._v(" "+t._s(t.sendCount)+" ")]),t._v(" 个客户 ")])]):t._e()])]),"选择参与员工"===t.inviteValue?s("div",{staticClass:"block"},[s("div",{staticClass:"title"},[t._v(" 邀请信息 ")]),s("div",{staticClass:"welcome-box"},[s("div",{staticClass:"content welcome-text"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("邀请文案：")]),s("div",{staticClass:"content text-1"},[s("div",{staticClass:"input"},[s("m-enter-text",{ref:"text",model:{value:t.form.msg.text,callback:function(e){t.$set(t.form.msg,"text",e)},expression:"form.msg.text"}})],1)])]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("邀请链接：")]),s("div",{staticClass:"content text-2"},[s("div",{staticClass:"link-form"},[s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("链接标题：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msg.link.title,callback:function(e){t.$set(t.form.msg.link,"title",e)},expression:"form.msg.link.title"}})],1)]),s("div",{staticClass:"item"},[s("span",{staticClass:"label required"},[t._v("链接摘要：")]),s("div",{staticClass:"input"},[s("a-input",{model:{value:t.form.msg.link.desc,callback:function(e){t.$set(t.form.msg.link,"desc",e)},expression:"form.msg.link.desc"}})],1)]),s("div",{staticClass:"item"},[s("span",[t._v("链接封面：")]),s("div",{staticClass:"input"},[s("m-upload",{model:{value:t.form.msg.link.image,callback:function(e){t.$set(t.form.msg.link,"image",e)},expression:"form.msg.link.image"}})],1)])])])])]),s("div",{staticClass:"preview"},[s("div",{staticClass:"tips"},[t._v(" 企业微信邀请客户参与预览 ")]),s("m-preview",{ref:"preview"})],1)])]):t._e(),s("selectMember",{ref:"selectMember",on:{change:t.selectMemberChange}})],1)},$=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[t._v(" 企微群聊二维码设置 "),s("span",[t._v("企业邀请可参与活动的客户")])])}],O=s("c2bc"),M={data:function(){return{form:{msg:{text:"",link:{title:"",desc:"",image:""}}},plainOptions:[{label:"选择参与员工",value:"选择参与员工"},{label:"暂不邀请",value:"暂不邀请"}],serviceOptions:[{label:"全部客户",value:"0"},{label:"筛选客户",value:"1"}],genderOptions:[{label:"全部性别",value:"-1"},{label:"仅男性粉丝",value:"1"},{label:"仅女性粉丝",value:"2"},{label:"未知性别",value:"0"}],inviteValue:"选择参与员工",filterValue:"0",genderValue:"-1",filterSendForm:{time:[],services:[]},sendCount:-1}},mounted:function(){var t="你好，我们正在进行xxx活动，只要邀请x位好友添加我的微信就可以获得奖品\n\n参与流程：\n①点击下面链接，生成专属海报\n②进入链接后长按保存海报，将海报发给好友或朋友圈\n③邀请x位好友扫码添加，即可成功获得奖品\n④进入链接点击查看进度，完成任务后点击「领取奖励」即可领取哦\n\n注意事项：请不要直接转发活动链接给好友，是无法成功记录数据的哦~";this.$refs.text.addUserName(t),this.form.msg.text=t,this.form.msg.link.title="点击这里，完成任务领取奖品吧👇",this.form.msg.link.desc="快来参加活动吧"},methods:{selectMemberShow:function(){this.$refs.selectMember.setSelect(this.filterSendForm.services)},getVerify:function(){if("暂不邀请"!==this.inviteValue){if(!this.form.msg.text)return"邀请文案未填写";if(!this.form.msg.link.title)return"邀请链接标题未填写";if(!this.form.msg.link.desc)return"邀请链接描述未填写";if(!this.form.msg.link.image)return"邀请链接封面未上传";if(!this.filterSendForm.time.length&&"0"!==this.filterValue)return"请选择时间";if(!this.filterSendForm.services.length)return"请选择员工"}},getFormData:function(){return this.form},getInviteMsgFormData:function(){var t={text:this.form.msg.text,link_title:this.form.msg.link.title,link_desc:this.form.msg.link.desc,link_pic:this.form.msg.link.image,filter:this.getSendFilterParams()};return"暂不邀请"!==this.inviteValue&&t},selectMemberChange:function(t){this.filterSendForm.services=t},resetSendCount:function(){this.sendCount=-1},getSendFilterParams:function(){var t={};return t.employee_ids=JSON.stringify(this.filterSendForm.services.map((function(t){return t.id}))),t.is_all=this.filterValue,"0"===this.filterValue?(t.start_time="",t.end_time=""):(t.start_time=this.filterSendForm.time[0].format("YYYY-MM-DD hh:ss"),t.end_time=this.filterSendForm.time[1].format("YYYY-MM-DD hh:ss")),"-1"!==this.genderValue&&(t.gender=this.genderValue),t},getSendCount:function(){var t=this;if(!this.filterSendForm.time.length&&"0"!==this.filterValue)return this.$message.error("请选择时间"),!1;if(!this.filterSendForm.services.length)return this.$message.error("请选择员工"),!1;var e=this.getSendFilterParams();Object(O["b"])(e).then((function(e){t.sendCount=e.data}))}},watch:{"form.msg":{handler:function(){this.$refs.preview.setText(this.form.msg.text),this.$refs.preview.setLink(this.form.msg.link.title,this.form.msg.link.desc,this.form.msg.link.image)},deep:!0}},components:{selectMember:c["a"]}},q=M,j=(s("d255"),Object(v["a"])(q,D,$,!1,null,"1c69815a",null)),E=j.exports,U={data:function(){return{step:0,loading:!1}},methods:{getFissionData:function(){var t=this.$refs.step1.getFormData(),e={active_name:t.name,service_employees:t.services,auto_pass:t.autoPass,auto_add_tag:t.autoAddTag,end_time:t.endTime,qr_code_invalid:t.expireDay,tasks:t.tasks,new_friend:t.newFriend,delete_invalid:t.deleteInvalid,receive_prize:t.receivePrizeType,receive_prize_employees:t.receivePrizeServices,receive_links:t.receivePrizeLinks,contact_tags:[]};return e},getPosterData:function(){var t=this.$refs.step2.getFormData(),e={poster_type:t.posterType,foward_text:t.shareText,avatar_show:t.poster.avatar,nickname_show:t.poster.nickname,nickname_color:t.poster.nicknameColor,card_corp_image_name:t.card.nickname,card_corp_name:t.card.name,card_corp_logo:t.card.logoUrl,cover_pic:t.poster.imageUrl,qrcode_w:t.poster.imageW,qrcode_h:t.poster.imageH,qrcode_x:t.poster.imageX,qrcode_y:t.poster.imageY};return e},getWelcomeData:function(){var t=this.$refs.step2.getFormData(),e={msg_text:t.welcome.text,link_title:t.welcome.link.title,link_desc:t.welcome.link.desc,link_cover_url:t.welcome.link.imageUrl};return e},getPushData:function(){var t=this.$refs.step3.getFormData(),e={push_employee:t.pushEmployee,push_contact:t.pushContact,msg_text:t.msgText,msg_complex:Object(l["a"])(Object(l["a"])({},t.msgComplex),{},{msg_complex_type:t.msgComplexType})};return e},getInviteData:function(){var t=this.$refs.step4.getFormData();return{text:t.msg.text,link_title:t.msg.link.title,link_desc:t.msg.link.desc,link_pic:t.msg.link.image}},add:function(){var t=this,e=this.$refs.step4.getVerify();if(e)return this.$message.error(e),!1;var s={fission:this.getFissionData(),poster:this.getPosterData(),welcome:this.getWelcomeData(),push:this.getPushData(),invite:this.getInviteData()};this.loading=!0,Object(O["a"])(s).then((function(e){if(200===e.code){var s=t.$refs.step4.getInviteMsgFormData();if(s)return s.fission_id=e.data[0],Object(O["j"])(s).then((function(e){200===e.code&&(t.$message.success("添加成功"),t.loading=!1,t.$router.push("/workFission/taskpage"))})),!1;t.$message.success("添加成功"),t.loading=!1,t.$router.push("/workFission/taskpage")}}))},next:function(){var t="";if(0===this.step&&(t=this.$refs.step1.getVerify()),1===this.step&&(t=this.$refs.step2.getVerify()),2===this.step&&(t=this.$refs.step3.getVerify()),t)return this.$message.error(t),t="",!1;this.step++}},components:{step1:f,step2:k,step3:F,step4:E}},P=U,I=(s("d9a7"),Object(v["a"])(P,a,i,!1,null,"b5fedcb4",null));e["default"]=I.exports},ffc1:function(t,e,s){"use strict";s("1a0b")}}]);