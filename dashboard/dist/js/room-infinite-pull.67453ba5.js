(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["room-infinite-pull"],{"06c5":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("fb6a"),s("d3b7"),s("b0c0"),s("a630"),s("3ca3"),s("ac1f");var a=s("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Object(a["a"])(t,e):void 0}}},"1e2c":function(t,e,s){},3992:function(t,e,s){},"45e3":function(t,e,s){},"4f3a":function(t,e,s){"use strict";s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return c})),s.d(e,"e",(function(){return n})),s.d(e,"b",(function(){return r})),s.d(e,"a",(function(){return l}));var a=s("b775");function i(t){return Object(a["b"])({url:"/roomInfinitePull/index",method:"GET",params:t})}function c(t){return Object(a["b"])({url:"/roomInfinitePull/info",method:"GET",params:t})}function n(t){return Object(a["b"])({url:"/roomInfinitePull/update",method:"PUT",data:t})}function r(t){return Object(a["b"])({url:"/roomInfinitePull/destroy",method:"DELETE",data:t})}function l(t){return Object(a["b"])({url:"/roomInfinitePull/store",method:"POST",data:t})}},"59bf":function(t,e,s){"use strict";s("45e3")},6843:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"Join"},[a("a-card",[a("div",{staticClass:"content-top"},[a("div",{staticClass:"title"},[a("span",[t._v(" 活码设置 ")])]),a("div",{staticClass:"join-content"},[a("p",{staticClass:"remind"},[a("a-alert",{attrs:{message:"入群人数统计规则：扫描活码即认为客户入群，扫码人数会与实际扫企业微信活码入群人数有偏差",banner:""}})],1),a("div",[t._v(" 客户入群需要扫描两个二维码，将先扫活码，再扫企业微信活码，入群过程不会添加企业员工，不会成为企业客户哦～ ")]),a("div",{staticClass:"group-name elastic mt20"},[a("span",[t._v(" 拉群名称： ")]),a("a-input",{staticStyle:{width:"420px"},attrs:{placeholder:"名称不会展示给用，用于企业记录渠道名称或使用场景"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("div",{staticClass:"code-preview  mt20",staticStyle:{display:"flex"}},[a("span",[t._v(" 二维码预览： ")]),a("div",{staticClass:"qrcode-avatar"},[a("img",{staticStyle:{width:"118px",height:"118px"},attrs:{src:s("dab2")}}),t.avatar?a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]):t._e()]),a("div",{staticClass:"upload-qc"},[a("m-upload",{attrs:{def:!1,text:"上传头像",preview:!1,type:"btn"},model:{value:t.avatar,callback:function(e){t.avatar=e},expression:"avatar"}})],1)])])]),a("div",{staticClass:"content-bottom"},[a("div",{staticClass:"title mt60"},[a("span",[t._v(" 企微活码设置 ")])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"con-bot-left"},[a("div",{staticClass:"name-set"},[a("span",[t._v(" 群名称设置： ")]),a("a-switch",{attrs:{size:"small"},model:{value:t.switchs.title,callback:function(e){t.$set(t.switchs,"title",e)},expression:"switchs.title"}}),t.switchs.title?a("div",{staticClass:"input"},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入群名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1):t._e()],1),a("div",{staticClass:"name-set mt18"},[a("span",[t._v(" 入群引导语： ")]),a("a-switch",{attrs:{size:"small"},model:{value:t.switchs.describe,callback:function(e){t.$set(t.switchs,"describe",e)},expression:"switchs.describe"}}),t.switchs.describe?a("div",{staticClass:"input"},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入群引导语"},model:{value:t.describe,callback:function(e){t.describe=e},expression:"describe"}})],1):t._e()],1),a("div",{staticClass:"upload-avatar mt18"},[a("span",[t._v(" 上传头像： ")]),a("div",{staticClass:"upload-img"},[a("m-upload",{attrs:{def:!1,text:"上传头像"},model:{value:t.logo,callback:function(e){t.logo=e},expression:"logo"}})],1)]),a("div",{staticClass:"tips mt18"},[a("a-alert",{staticStyle:{width:"600px"},attrs:{message:"请上传在企业微信后台创建的活码",type:"info","show-icon":""}})],1),t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"code-one mt20"},[a("span",[t._v(" 企微活码"+t._s(s+1)+"： ")]),a("div",{staticClass:"back-box"},[a("div",{staticClass:"back-top flex"},[a("m-upload",{attrs:{def:!1,text:"上传企微活码"},model:{value:e.qrcode,callback:function(s){t.$set(e,"qrcode",s)},expression:"v.qrcode"}}),a("a",{staticClass:"del-text",on:{click:function(e){return t.delQrcode(s)}}},[t._v("删除")])],1),a("div",{staticClass:"back-bottom flex"},[t._v(" 群活码人数上限： "),a("div",[a("a-input-number",{attrs:{min:1},model:{value:e.upper_limit,callback:function(s){t.$set(e,"upper_limit",s)},expression:"v.upper_limit"}})],1)])])])})),a("div",{staticClass:"code-two mt20 ml78",on:{click:function(e){return t.list.push({upper_limit:1e3})}}},[a("a-button",[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加活码 ")],1)],1)],2),a("div",{staticClass:"con-bot-right"},[a("div",{staticClass:"phone"},[a("img",{staticClass:"bg",attrs:{src:s("d150")}}),a("div",{staticClass:"info"},[t.logo?a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.logo}})]):t._e(),a("div",{staticClass:"name"},[t.switchs.title?a("div",[t._v(" "+t._s(t.title)+" ")]):t._e(),t.switchs.describe?a("div",[t._v(" "+t._s(t.describe)+" ")]):t._e()])])])])])]),a("div",{staticClass:"btn mt40 ml80"},[a("a-button",{attrs:{type:"primary"},on:{click:t.addClick}},[t._v(" 保存 ")])],1)])],1)])},i=[],c=s("b85c"),n=(s("b0c0"),s("a434"),s("4f3a")),r={data:function(){return{name:"",avatar:"",title:"",describe:"",logo:"",qrCodes:"",switchs:{title:!1,describe:!1},list:[{upper_limit:1e3}]}},methods:{addClick:function(){var t=this;if(!this.name)return this.$message.error("名称未填写"),!1;var e,s=Object(c["a"])(this.list);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(!a.qrcode)return this.$message.error("活码未上传"),!1;if(!a.upper_limit)return this.$message.error("人数上限未填写"),!1}}catch(i){s.e(i)}finally{s.f()}Object(n["a"])({name:this.name,avatar:this.avatar,title_status:this.switchs.title,describe_status:this.switchs.describe,title:this.title,describe:this.describe,logo:this.logo,qw_code:this.list}).then((function(e){t.$message.success("创建成功"),t.$router.push("/roomInfinitePull/index")}))},delQrcode:function(t){if(1===this.list.length)return this.$message.error("不能删除最后一个"),!1;this.list.splice(t,1)}}},l=r,o=(s("59bf"),s("2877")),d=Object(o["a"])(l,a,i,!1,null,"403c44b9",null);e["default"]=d.exports},"6b75":function(t,e,s){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}s.d(e,"a",(function(){return a}))},"7a16":function(t,e,s){},"828a":function(t,e,s){"use strict";s("7a16")},a543:function(t,e,s){"use strict";s("1e2c")},b85c:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");var a=s("06c5");function i(t,e){var s="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var i=0,c=function(){};return{s:c,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,l=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return r=t.done,t},e:function(t){l=!0,n=t},f:function(){try{r||null==s["return"]||s["return"]()}finally{if(l)throw n}}}}},bbe5:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"create"},[s("div",{staticClass:"create-btn"},[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/roomInfinitePull/create")}}},[t._v(" 新建拉群 ")])],1)]),s("a-card",{staticClass:"mt18"},[s("div",{staticClass:"table"},[s("a-table",{attrs:{columns:t.table.col,"data-source":t.table.data},scopedSlots:t._u([{key:"group",fn:function(e){return s("div",{},t._l(e.qwCode,(function(e,a){return s("div",{key:a,staticClass:"chat-li"},[s("div",{staticClass:"chat-info"},[s("img",{attrs:{src:e.qrcode,height:"32",width:"32"}}),s("span",{staticClass:"chat-name ml8"},[t._v("群活码"+t._s(a+1))])]),s("div",{staticClass:"ml8"},[0===e.status?s("a-tag",[t._v("未开始")]):t._e(),1===e.status?s("a-tag",{attrs:{color:"green"}},[t._v("拉人中")]):t._e(),2===e.status?s("a-tag",{attrs:{color:"red"}},[t._v("已停用")]):t._e()],1)])})),0)}},{key:"operate",fn:function(e){return s("div",{},[s("a",{on:{click:function(s){return t.$refs.details.show(e)}}},[t._v("详情")]),s("a-divider",{attrs:{type:"vertical"}}),s("a",{on:{click:function(s){return t.createQrcode(e.link)}}},[t._v("下载")]),s("a-divider",{attrs:{type:"vertical"}}),s("a-dropdown",[s("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[t._v(" 编辑 "),s("a-icon",{attrs:{type:"down"}})],1),s("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[s("a-menu-item",[s("a",{on:{click:function(s){return t.$router.push({path:"/roomInfinitePull/show",query:{id:e.id}})}}},[t._v("修改")])]),s("a-menu-item",[s("a",{on:{click:function(s){return t.delClick(e.id)}}},[t._v("删除")])])],1)],1)],1)}}])})],1)]),s("div",{ref:"qrCode",staticClass:"qr-code"}),s("Details",{ref:"details"})],1)},i=[],c=s("4f3a"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"word-fission-details"},[s("a-modal",{attrs:{width:636,footer:!1,centered:""},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[s("template",{slot:"title"},[t._v("活动详情")]),s("div",{staticClass:"content"},[s("div",{staticClass:"left-content"},[s("div",{ref:"qrCode",staticClass:"qr-code"}),s("div",{staticClass:"name"},[t._v("111111")]),s("div",{staticClass:"btn"},[s("a-button",{attrs:{type:"primary",block:""},on:{click:t.downQrcode}},[t._v("下载二维码")])],1),s("div",{staticClass:"btn"},[s("a-button",{attrs:{block:""}},[t._v("修改")])],1)]),s("div",{staticClass:"right-content"},[s("div",{staticClass:"block"},[s("span",{staticClass:"title"},[t._v("扫码人数：")]),s("div",{staticClass:"block-content"},[s("div",{staticClass:"flex"},[s("span",{staticClass:"ellipses link-text"},[t._v(" "+t._s(t.data.total_num)+" ")])])])]),s("div",{staticClass:"block"},[s("span",{staticClass:"title"},[t._v("创建时间：")]),s("div",{staticClass:"block-content"},[s("div",{staticClass:"flex"},[s("span",{staticClass:"ellipses link-text"},[t._v(" "+t._s(t.data.created_at)+" ")])])])]),s("div",{staticClass:"block"},[s("span",{staticClass:"title"},[t._v("群活码详情：")])]),s("div",{staticClass:"block"},[s("div",{staticClass:"ml30"},t._l(t.data.qwCode,(function(e,a){return s("div",{key:a,staticClass:"chat-li"},[s("div",{staticClass:"chat-info"},[s("img",{attrs:{src:e.qrcode,height:"32",width:"32"}}),s("span",{staticClass:"chat-name ml8"},[t._v("群活码"+t._s(a+1))])]),s("div",{staticClass:"ml8"},[0===e.status?s("a-tag",[t._v("未开始")]):t._e(),1===e.status?s("a-tag",{attrs:{color:"green"}},[t._v("拉人中")]):t._e(),2===e.status?s("a-tag",{attrs:{color:"red"}},[t._v("已停用")]):t._e()],1)])})),0)])])])],2)],1)},r=[],l=(s("9911"),s("d044")),o=s.n(l),d={data:function(){return{modalShow:!1,loading:!1,data:{}}},methods:{downQrcode:function(){var t=this.$refs.qrCode.childNodes[1],e=document.createElement("a"),s=new MouseEvent("click");e.download="qrcode",e.href=t.src,e.dispatchEvent(s)},initQrcode:function(){var t=this;setTimeout((function(){t.$refs.qrCode.innerHTML="",new o.a(t.$refs.qrCode,{text:t.data.link,width:122,height:122})}),100)},show:function(t){this.data=t,this.modalShow=!0,this.initQrcode()},hide:function(){this.modalShow=!1}}},u=d,v=(s("828a"),s("2877")),f=Object(v["a"])(u,n,r,!1,null,"122ddcd3",null),m=f.exports,p={data:function(){return{table:{col:[{title:"名称",dataIndex:"name"},{title:"创建时间",dataIndex:"created_at"},{title:"扫码人数",dataIndex:"total_num"},{title:"群聊",scopedSlots:{customRender:"group"}},{title:"操作",scopedSlots:{customRender:"operate"}}],data:[]}}},mounted:function(){this.getData()},methods:{delClick:function(t){var e=this;this.$confirm({title:"提示",content:"是否删除",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(c["b"])({id:t}).then((function(t){e.$message.success("删除成功"),e.getData()}))}})},createQrcode:function(t){var e=this;setTimeout((function(){e.$refs.qrCode.innerHTML="",new o.a(e.$refs.qrCode,{text:t,width:122,height:122})}),100),setTimeout((function(){var t=e.$refs.qrCode.childNodes[1],s=document.createElement("a"),a=new MouseEvent("click");s.download="qrcode",s.href=t.src,s.dispatchEvent(a)}),200)},getData:function(){var t=this;Object(c["d"])().then((function(e){t.table.data=e.data.list}))}},components:{Details:m}},h=p,b=(s("a543"),Object(v["a"])(h,a,i,!1,null,"17ce50c6",null));e["default"]=b.exports},d150:function(t,e,s){t.exports=s.p+"img/phone-preview-bg.c5d7cc58.png"},dab2:function(t,e,s){t.exports=s.p+"img/wework-qrcode.32867c6a.png"},ee4b:function(t,e,s){"use strict";s("3992")},f770:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"Join"},[a("a-card",[a("div",{staticClass:"content-top"},[a("div",{staticClass:"title"},[a("span",[t._v(" 活码设置 ")])]),a("div",{staticClass:"join-content"},[a("div",{staticClass:"group-name elastic mt20"},[a("span",[t._v(" 拉群名称： ")]),a("a-input",{staticStyle:{width:"420px"},attrs:{placeholder:"名称不会展示给用，用于企业记录渠道名称或使用场景"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("div",{staticClass:"code-preview  mt20",staticStyle:{display:"flex"}},[a("span",[t._v(" 二维码预览： ")]),a("div",{staticClass:"qrcode-avatar"},[a("img",{staticStyle:{width:"118px",height:"118px"},attrs:{src:s("dab2")}}),t.avatar?a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]):t._e()]),a("div",{staticClass:"upload-qc"},[a("m-upload",{attrs:{def:!1,text:"上传头像",preview:!1,type:"btn"},model:{value:t.avatar,callback:function(e){t.avatar=e},expression:"avatar"}})],1)])])]),a("div",{staticClass:"content-bottom"},[a("div",{staticClass:"title mt60"},[a("span",[t._v(" 企微活码设置 ")])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"con-bot-left"},[a("div",{staticClass:"name-set"},[a("span",[t._v(" 群名称设置： ")]),a("a-switch",{attrs:{size:"small"},model:{value:t.switchs.title,callback:function(e){t.$set(t.switchs,"title",e)},expression:"switchs.title"}}),t.switchs.title?a("div",{staticClass:"input"},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入群名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1):t._e()],1),a("div",{staticClass:"name-set mt18"},[a("span",[t._v(" 入群引导语： ")]),a("a-switch",{attrs:{size:"small"},model:{value:t.switchs.describe,callback:function(e){t.$set(t.switchs,"describe",e)},expression:"switchs.describe"}}),t.switchs.describe?a("div",{staticClass:"input"},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入群引导语"},model:{value:t.describe,callback:function(e){t.describe=e},expression:"describe"}})],1):t._e()],1),a("div",{staticClass:"upload-avatar mt18"},[a("span",[t._v(" 上传头像： ")]),a("div",{staticClass:"upload-img"},[a("m-upload",{ref:"logo",attrs:{def:!1,text:"上传头像"},model:{value:t.logo,callback:function(e){t.logo=e},expression:"logo"}})],1)]),a("div",{staticClass:"tips mt18"},[a("a-alert",{staticStyle:{width:"600px"},attrs:{message:"请上传在企业微信后台创建的活码",type:"info","show-icon":""}})],1),t._l(t.list,(function(e,s){return a("div",{key:s,staticClass:"code-one mt20"},[a("span",[t._v(" 企微活码"+t._s(s+1)+"： ")]),a("div",{staticClass:"back-box"},[a("div",{staticClass:"back-top flex"},[a("m-upload",{ref:"qrcode"+s,refInFor:!0,attrs:{def:!1,text:"上传企微活码"},model:{value:e.qrcode,callback:function(s){t.$set(e,"qrcode",s)},expression:"v.qrcode"}}),1===e.status?a("a-button",{on:{click:function(t){e.status=2}}},[t._v(" 停用 ")]):t._e()],1),a("div",{staticClass:"back-bottom flex"},[t._v(" 群活码人数上限： "),a("div",[a("a-input-number",{attrs:{min:1},model:{value:e.upper_limit,callback:function(s){t.$set(e,"upper_limit",s)},expression:"v.upper_limit"}})],1)])])])})),a("div",{staticClass:"code-two mt20 ml78",on:{click:function(e){return t.list.push({upper_limit:1e3})}}},[a("a-button",[a("a-icon",{attrs:{type:"plus"}}),t._v(" 添加活码 ")],1)],1)],2),a("div",{staticClass:"con-bot-right"},[a("div",{staticClass:"phone"},[a("img",{staticClass:"bg",attrs:{src:s("d150")}}),a("div",{staticClass:"info"},[t.logo?a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.logo}})]):t._e(),a("div",{staticClass:"name"},[t.switchs.title?a("div",[t._v(" "+t._s(t.title)+" ")]):t._e(),t.switchs.describe?a("div",[t._v(" "+t._s(t.describe)+" ")]):t._e()])])])])])]),a("div",{staticClass:"btn mt40 ml80"},[a("a-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(" 保存 ")])],1)])],1)])},i=[],c=s("b85c"),n=(s("b0c0"),s("d3b7"),s("159b"),s("4f3a")),r={data:function(){return{name:"",avatar:"",title:"",describe:"",logo:"",switchs:{title:!1,describe:!1},list:[{upper_limit:1e3}]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;Object(n["c"])({id:this.$route.query.id}).then((function(e){t.title=e.data.title,t.name=e.data.name,t.avatar=e.data.avatar,t.describe=e.data.describe,t.describe=e.data.describe,t.list=e.data.qwCode,t.switchs.title=1===e.data.titleStatus,t.switchs.describe=1===e.data.describeStatus,t.$refs.logo.setUrl(e.data.logo),setTimeout((function(){t.list.forEach((function(e,s){t.$refs["qrcode".concat(s)][0].setUrl(e.qrcode)}))}),100)}))},confirm:function(){var t=this;if(!this.name)return this.$message.success("名称未填写"),!1;var e,s=Object(c["a"])(this.list);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(!a.qrcode)return this.$message.success("活码未上传"),!1;if(!a.upper_limit)return this.$message.success("人数上限未填写"),!1}}catch(i){s.e(i)}finally{s.f()}Object(n["e"])({id:this.$route.query.id,name:this.name,avatar:this.avatar,title_status:this.switchs.title,describe_status:this.switchs.describe,title:this.title,describe:this.describe,logo:this.logo,qw_code:this.list}).then((function(e){t.$message.success("保存成功"),t.$router.push("/roomInfinitePull/index")}))}}},l=r,o=(s("ee4b"),s("2877")),d=Object(o["a"])(l,a,i,!1,null,"76d3baf4",null);e["default"]=d.exports}}]);